(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4863:function(){},2963:function(){},891:function(e,a,s){Promise.resolve().then(s.bind(s,3072))},3072:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return R}});var t=s(2841),l=s(9790),r=s(1685),n=s(2729),i=s(870);let d=l.forwardRef((e,a)=>{let{className:s,variant:l="default",size:r="md",loading:n,children:d,...c}=e;return(0,t.jsx)("button",{ref:a,className:(0,i.cn)("inline-flex items-center justify-center rounded-2xl font-medium transition shadow-soft disabled:opacity-60 disabled:cursor-not-allowed",{default:"bg-brand text-white hover:opacity-90",outline:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-50",ghost:"text-gray-700 hover:bg-gray-100",destructive:"bg-red-600 text-white hover:bg-red-700"}[l],{sm:"px-3 py-2 text-sm",md:"px-4 py-3",lg:"px-6 py-4 text-lg"}[r],s),...c,children:n?"...":d})});d.displayName="Button";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("input",{ref:a,className:(0,i.cn)("w-full rounded-2xl border border-gray-300 bg-white px-3 py-3","outline-none focus:ring-2 focus:ring-brand/40","text-base"),...l})});function o(e){let{className:a,...s}=e;return(0,t.jsx)("span",{className:(0,i.cn)("inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-800",a),...s})}function h(e){let{className:a,...s}=e;return(0,t.jsx)("table",{className:(0,i.cn)("w-full text-sm",a),...s})}function m(e){return(0,t.jsx)("thead",{...e})}function u(e){return(0,t.jsx)("tbody",{...e})}function x(e){let{className:a,...s}=e;return(0,t.jsx)("th",{className:(0,i.cn)("text-left font-semibold text-gray-700 px-3 py-2",a),...s})}function p(e){let{className:a,...s}=e;return(0,t.jsx)("td",{className:(0,i.cn)("px-3 py-2 border-t border-gray-100",a),...s})}c.displayName="Input";let f=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return a.filter((e,a,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===a).join(" ").trim()};var j={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let w=(0,l.forwardRef)((e,a)=>{let{color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:d,iconNode:c,...o}=e;return(0,l.createElement)("svg",{ref:a,...j,width:t,height:t,stroke:s,strokeWidth:n?24*Number(r)/Number(t):r,className:v("lucide",i),...o},[...c.map(e=>{let[a,s]=e;return(0,l.createElement)(a,s)}),...Array.isArray(d)?d:[d]])}),g=(e,a)=>{let s=(0,l.forwardRef)((s,t)=>{let{className:r,...n}=s;return(0,l.createElement)(w,{ref:t,iconNode:a,className:v("lucide-".concat(f(e)),r),...n})});return s.displayName="".concat(e),s},N=g("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),y=g("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),b=g("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),k=g("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),C=g("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),A=g("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),E=g("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),M=g("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),S=g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),z=g("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_=g("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),L=g("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function R(){let[e,a]=(0,l.useState)([]),[s,i]=(0,l.useState)(!1),[f,v]=(0,l.useState)(""),[j,w]=(0,l.useState)(""),[g,R]=(0,l.useState)([]),[W,O]=(0,l.useState)(null),D=(0,l.useRef)(null),P=(0,l.useRef)(null);async function F(){i(!0);try{let e=await fetch("/api/guests"),s=await e.json().catch(()=>({}));a(Array.isArray(s.guests)?s.guests:[])}finally{i(!1)}}function I(e){let a=r.ij(new Uint8Array(e),{type:"array"}),s=a.Sheets[a.SheetNames[0]];if(!s)return[];let[t,...l]=r.P6.sheet_to_json(s,{header:1});if(!t||!Array.isArray(t))return[];let n=t.map(e=>(function(e){let a=e.trim().toLowerCase();return a.includes("nome")?"fullName":a.includes("e-mail")||a.includes("email")?"email":a.includes("whatsapp")?"whatsapp":a.includes("categoria")?"category":a})(String(null!=e?e:"")));return l.filter(e=>Array.isArray(e)&&e.length>0).map(e=>{let a={};return n.forEach((s,t)=>{let l=String(s),r=e[t];a[l]="string"==typeof r?r.trim():String(null!=r?r:"").trim()}),{fullName:a.fullName||"",email:a.email||"",whatsapp:a.whatsapp||"",category:a.category||""}}).filter(e=>!!e.fullName&&!!e.email)}(0,l.useEffect)(()=>{F()},[]),(0,l.useEffect)(()=>{let e=setTimeout(()=>v(j),220);return()=>clearTimeout(e)},[j]);let q=(0,l.useCallback)(e=>{var a,s;e.preventDefault(),e.stopPropagation();let t=null===(s=e.dataTransfer)||void 0===s?void 0:null===(a=s.files)||void 0===a?void 0:a[0];if(!t)return;let l=new FileReader;l.onload=()=>R(I(l.result)),l.readAsArrayBuffer(t)},[]);async function T(e){if(!g.length){alert("Nenhum dado para importar.");return}O(e?"import_send":"import");try{let a=await fetch("/api/guests/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rows:g,sendEmails:e})});if(a.ok)R([]),await F(),e&&alert("Convites enviados com sucesso!");else{let e=await a.json().catch(()=>({}));alert(e.error||"Falha na importa\xe7\xe3o")}}finally{O(null)}}async function U(){if(confirm("Enviar QR por E-mail para todos os convidados?")){O("email_all");try{let e=await fetch("/api/guests/send-all",{method:"POST"});if(e.ok)alert("Convites enviados!"),await F();else{let a=await e.json().catch(()=>({}));alert(a.error||"Falha ao enviar para todos")}}finally{O(null)}}}async function B(e){O("email_".concat(e));try{(await fetch("/api/guests/".concat(e,"/invite"),{method:"POST"})).ok||alert("Falha ao enviar"),await F()}finally{O(null)}}async function H(e){if(confirm("Tens a certeza que queres apagar este convidado? Esta a\xe7\xe3o \xe9 irrevers\xedvel.")){O("delete_".concat(e));try{let a=await fetch("/api/guests/".concat(e),{method:"DELETE"});if(a.ok)await F();else{let e=await a.json().catch(()=>({}));alert((null==e?void 0:e.error)||"Falha ao apagar convidado.")}}finally{O(null)}}}async function X(e){O("wa_".concat(e));try{let a=await fetch("/api/guests/".concat(e,"/whatsapp"),{method:"POST"}),s=a.headers.get("content-type")||"",t=await a.text(),l={};try{l=s.includes("application/json")&&t?JSON.parse(t):{raw:t}}catch(e){l={raw:t}}if(!a.ok){let e="Falha ao enviar WhatsApp.";"error"in l&&l.error&&(e=l.error),"details"in l&&l.details&&(e+="\nDetalhes: ".concat(JSON.stringify(l.details))),alert(e);return}alert("WhatsApp enviado!"),await F()}finally{O(null)}}async function Z(){if(confirm("Enviar WhatsApp com QR para todos os convidados com WhatsApp definido?")){O("wa_all");try{let t=await fetch("/api/guests/send-all-whatsapp",{method:"POST"}),l=await t.json().catch(()=>({}));if(t.ok){var e,a,s;let t=null!==(e=l.sent)&&void 0!==e?e:0,r=null!==(a=l.skipped)&&void 0!==a?a:0,n=null!==(s=l.failed)&&void 0!==s?s:0;alert("WhatsApp → enviados: ".concat(t,", ignorados: ").concat(r,", falhados: ").concat(n))}else alert((null==l?void 0:l.error)||"Falha ao enviar WhatsApp em massa.")}finally{O(null)}}}(0,l.useEffect)(()=>{let e=P.current;if(!e)return;let a=e=>{e.preventDefault(),e.stopPropagation()},s=e=>{q(e)};return e.addEventListener("dragover",a),e.addEventListener("dragenter",a),e.addEventListener("drop",s),()=>{e.removeEventListener("dragover",a),e.removeEventListener("dragenter",a),e.removeEventListener("drop",s)}},[q]);let Q=(0,l.useMemo)(()=>{let a=f.trim().toLowerCase();return a?e.filter(e=>{let s=(e.whatsapp||"").toLowerCase(),t=(e.category||"").toLowerCase();return e.fullName.toLowerCase().includes(a)||e.email.toLowerCase().includes(a)||s.includes(a)||t.includes(a)}):e},[f,e]);return(0,t.jsxs)("div",{className:"min-h-dvh bg-white",children:[(0,t.jsx)("div",{className:"sticky top-0 z-30 border-b bg-white/90 backdrop-blur",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-3 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-slate-900 text-white",children:(0,t.jsx)(N,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h1",{className:"truncate text-lg font-semibold leading-tight",children:"Gestor Diodigital"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Importar • Convidar • Check-in"})]}),(0,t.jsxs)("div",{className:"ml-auto hidden items-center gap-2 md:flex",children:[(0,t.jsx)(d,{variant:"ghost",size:"md",title:"Atualizar",disabled:s||null!==W,onClick:()=>void F(),className:"rounded-lg",children:s?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(b,{className:"h-4 w-4"})}),(0,t.jsx)(d,{variant:"ghost",size:"md",title:"Exportar CSV",onClick:function(){let a=new Blob([[["Nome","Email","WhatsApp","Categoria","Estado","CheckInAt"],...e.map(e=>[e.fullName,e.email,e.whatsapp||"",e.category||"",e.status,e.checkInAt?new Date(e.checkInAt).toISOString():""])].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download="convidados.csv",t.click(),URL.revokeObjectURL(s)},className:"rounded-lg",children:(0,t.jsx)(k,{className:"h-4 w-4"})}),(0,t.jsx)("a",{href:"/scan",title:"Abrir Scanner",children:(0,t.jsx)(d,{variant:"default",size:"md",className:"rounded-lg",children:(0,t.jsx)(N,{className:"h-4 w-4"})})}),(0,t.jsx)(d,{variant:"default",size:"md",title:"Enviar e-mail a todos",onClick:()=>void U(),disabled:null!==W,className:"rounded-lg",children:"email_all"===W?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(C,{className:"h-4 w-4"})}),(0,t.jsx)(d,{variant:"default",size:"md",title:"WhatsApp a todos",onClick:()=>void Z(),disabled:null!==W,className:"rounded-lg",children:"wa_all"===W?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(A,{className:"h-4 w-4"})})]})]})})}),(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-5 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,t.jsxs)(n.Zb,{className:"lg:col-span-1",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(E,{className:"h-5 w-5"})," Importar XLSX"]})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:["Estrutura: ",(0,t.jsx)("b",{children:"Nome completo"}),", ",(0,t.jsx)("b",{children:"WhatsApp"}),", ",(0,t.jsx)("b",{children:"E-mail"}),", ",(0,t.jsx)("b",{children:"Categoria"})," (1\xaa folha)."]}),(0,t.jsxs)("label",{ref:P,className:function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return a.filter(Boolean).join(" ")}("group relative block cursor-pointer rounded-xl border border-dashed p-5 transition","border-slate-300 hover:border-slate-400 hover:bg-slate-50"),onClick:()=>{var e;return null===(e=D.current)||void 0===e?void 0:e.click()},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"grid h-12 w-12 place-items-center rounded-lg bg-slate-900 text-white",children:(0,t.jsx)(M,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate font-medium",children:"Arrasta o .xlsx aqui"}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:"ou toca para selecionar"})]})]}),(0,t.jsx)("input",{ref:D,type:"file",accept:".xlsx",className:"sr-only",onChange:function(e){var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;let t=new FileReader;t.onload=()=>R(I(t.result)),t.readAsArrayBuffer(s)}})]}),g.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-slate-700",children:["Pr\xe9-visualiza\xe7\xe3o ",(0,t.jsxs)("span",{className:"text-slate-500",children:["(",g.length," linhas)"]})]}),(0,t.jsx)("div",{className:"rounded-lg border",children:(0,t.jsxs)(h,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)(x,{children:"Nome"}),(0,t.jsx)(x,{children:"Email"}),(0,t.jsx)(x,{className:"hidden md:table-cell",children:"WhatsApp"}),(0,t.jsx)(x,{className:"hidden lg:table-cell",children:"Categoria"})]})}),(0,t.jsx)(u,{children:g.slice(0,10).map((e,a)=>(0,t.jsxs)("tr",{className:"align-top",children:[(0,t.jsx)(p,{className:"whitespace-pre-wrap break-words",children:e.fullName}),(0,t.jsx)(p,{className:"whitespace-pre-wrap break-words",children:e.email}),(0,t.jsx)(p,{className:"hidden whitespace-pre-wrap break-words md:table-cell",children:e.whatsapp||"-"}),(0,t.jsx)(p,{className:"hidden whitespace-pre-wrap break-words lg:table-cell",children:e.category||"-"})]},a))})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,t.jsxs)(d,{disabled:null!==W,onClick:()=>void T(!1),className:"flex-1",children:["import"===W?(0,t.jsx)(y,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(M,{className:"mr-2 h-4 w-4"}),"Importar (sem enviar)"]}),(0,t.jsxs)(d,{disabled:null!==W,onClick:()=>void T(!0),className:"flex-1",children:["import_send"===W?(0,t.jsx)(y,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(M,{className:"mr-2 h-4 w-4"}),"Importar & enviar"]})]})]}):(0,t.jsx)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:"Sem pr\xe9-visualiza\xe7\xe3o. Importa um ficheiro para come\xe7ar."})]})]}),(0,t.jsxs)(n.Zb,{className:"lg:col-span-2",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsx)(n.ll,{children:"Convidados"}),(0,t.jsxs)("div",{className:"relative w-full sm:w-96",children:[(0,t.jsx)(S,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,t.jsx)(c,{value:j,onChange:e=>w(e.target.value),placeholder:"Procurar por nome, email, WhatsApp, categoria…",className:"w-full rounded-lg pl-9"})]})]})}),(0,t.jsxs)(n.aY,{children:[!s&&0===Q.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-xl border border-slate-200 bg-white p-10 text-center",children:[(0,t.jsx)("div",{className:"mb-3 text-4xl",children:"\uD83D\uDDC2️"}),(0,t.jsx)("div",{className:"text-base font-medium",children:"Nada encontrado"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-slate-600",children:"Ajusta a pesquisa ou importa um XLSX."}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsxs)(d,{variant:"outline",onClick:()=>void F(),children:[(0,t.jsx)(b,{className:"mr-2 h-4 w-4"})," Atualizar"]}),(0,t.jsxs)(d,{onClick:()=>{var e;return null===(e=D.current)||void 0===e?void 0:e.click()},children:[(0,t.jsx)(z,{className:"mr-2 h-4 w-4"})," Importar XLSX"]})]})]}),Q.length>0&&(0,t.jsx)("div",{className:"hidden sm:block",children:(0,t.jsx)("div",{className:"rounded-xl border",children:(0,t.jsxs)(h,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)(x,{className:"w-[24%]",children:"Nome"}),(0,t.jsx)(x,{className:"w-[26%]",children:"Email"}),(0,t.jsx)(x,{className:"hidden w-[18%] md:table-cell",children:"WhatsApp"}),(0,t.jsx)(x,{className:"hidden w-[14%] lg:table-cell",children:"Categoria"}),(0,t.jsx)(x,{className:"w-[10%]",children:"Estado"}),(0,t.jsx)(x,{className:"w-[8%] text-right",children:"A\xe7\xf5es"})]})}),(0,t.jsx)(u,{children:Q.map(e=>{let a=W==="email_".concat(e.id),s=W==="wa_".concat(e.id),l=W==="delete_".concat(e.id);return(0,t.jsxs)("tr",{className:"align-top",children:[(0,t.jsx)(p,{className:"whitespace-pre-wrap break-words",children:e.fullName}),(0,t.jsx)(p,{className:"whitespace-pre-wrap break-words",children:e.email}),(0,t.jsx)(p,{className:"hidden whitespace-pre-wrap break-words md:table-cell",children:e.whatsapp||"-"}),(0,t.jsx)(p,{className:"hidden whitespace-pre-wrap break-words lg:table-cell",children:e.category||"-"}),(0,t.jsx)(p,{children:"checked_in"===e.status?(0,t.jsx)(o,{className:"bg-green-100 text-green-700",children:"Presente"}):"invited"===e.status?(0,t.jsx)(o,{children:"Convidado"}):(0,t.jsx)(o,{className:"bg-yellow-100 text-yellow-700",children:"Pendente"})}),(0,t.jsx)(p,{children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-8 w-8 rounded-md",title:"Abrir QR / link de check-in",onClick:()=>{let a="/checkin?token=".concat(encodeURIComponent(e.token));window.open(a,"_blank","noopener,noreferrer")},children:(0,t.jsx)(N,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-8 w-8 rounded-md",title:"Enviar e-mail",disabled:a||null!==W,onClick:()=>void B(e.id),children:a?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(_,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-8 w-8 rounded-md",title:"Enviar WhatsApp",disabled:s||null!==W,onClick:()=>void X(e.id),children:s?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(A,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-8 w-8 rounded-md text-red-600 hover:text-red-700",title:"checked_in"===e.status?"N\xe3o \xe9 poss\xedvel apagar presen\xe7a registada":"Apagar convidado",disabled:l||"checked_in"===e.status||null!==W,onClick:()=>void H(e.id),children:l?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(L,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),(0,t.jsx)("div",{className:"sm:hidden space-y-3",children:Q.map(e=>{let a=W==="email_".concat(e.id),s=W==="wa_".concat(e.id);return(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium",children:e.fullName}),(0,t.jsx)("div",{className:"truncate text-xs text-slate-600",children:e.email}),(e.whatsapp||e.category)&&(0,t.jsxs)("div",{className:"mt-1 space-x-2 text-[11px] text-slate-600",children:[e.whatsapp&&(0,t.jsxs)("span",{children:["\uD83D\uDCF1 ",e.whatsapp]}),e.category&&(0,t.jsxs)("span",{children:["\uD83C\uDFF7 ",e.category]})]}),(0,t.jsx)("div",{className:"mt-2",children:"checked_in"===e.status?(0,t.jsx)(o,{className:"bg-green-100 text-green-700",children:"Presente"}):"invited"===e.status?(0,t.jsx)(o,{children:"Convidado"}):(0,t.jsx)(o,{className:"bg-yellow-100 text-yellow-700",children:"Pendente"})})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-9 w-9 rounded-lg",title:"QR / link",onClick:()=>{let a="/checkin?token=".concat(encodeURIComponent(e.token));window.open(a,"_blank","noopener,noreferrer")},children:(0,t.jsx)(N,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-9 w-9 rounded-lg",title:"E-mail",disabled:a||null!==W,onClick:()=>void B(e.id),children:a?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(_,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"md",variant:"ghost",className:"h-9 w-9 rounded-lg",title:"WhatsApp",disabled:s||null!==W,onClick:()=>void X(e.id),children:s?(0,t.jsx)(y,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(A,{className:"h-4 w-4"})})]})]})},e.id)})})]})]})]})}),(0,t.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-40 border-t border-slate-200 bg-white/95 px-4 py-3 backdrop-blur sm:hidden",children:(0,t.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between",children:[(0,t.jsx)(d,{variant:"ghost",size:"md",className:"h-10 w-10 rounded-lg",title:"Atualizar",onClick:()=>void F(),disabled:s||null!==W,children:s?(0,t.jsx)(y,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(b,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"/scan",title:"Scanner",children:(0,t.jsx)(d,{variant:"default",size:"md",className:"h-10 w-10 rounded-lg",children:(0,t.jsx)(N,{className:"h-5 w-5"})})}),(0,t.jsx)(d,{variant:"default",size:"md",className:"h-10 w-10 rounded-lg",title:"WhatsApp a todos",onClick:()=>void Z(),disabled:null!==W,children:"wa_all"===W?(0,t.jsx)(y,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(A,{className:"h-5 w-5"})})]})})]})}},2729:function(e,a,s){"use strict";s.d(a,{Ol:function(){return n},Zb:function(){return r},aY:function(){return d},ll:function(){return i}});var t=s(2841);s(9790);var l=s(870);function r(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("rounded-2xl border border-gray-200 bg-white shadow-soft",a),...s})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("p-4 border-b border-gray-100",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("h3",{className:(0,l.cn)("text-lg font-semibold",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("p-4",a),...s})}},870:function(e,a,s){"use strict";s.d(a,{cn:function(){return r}});var t=s(1118),l=s(7927);function r(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,l.m6)((0,t.W)(...a))}}},function(e){e.O(0,[531,441,390,173,744],function(){return e(e.s=891)}),_N_E=e.O()}]);