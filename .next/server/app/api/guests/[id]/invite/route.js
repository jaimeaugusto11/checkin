"use strict";(()=>{var e={};e.id=626,e.ids=[626],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3263:e=>{e.exports=import("firebase-admin/app")},2929:e=>{e.exports=import("firebase-admin/firestore")},9491:e=>{e.exports=require("assert")},852:e=>{e.exports=require("async_hooks")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},4492:e=>{e.exports=require("node:stream")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},4449:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>u,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>h});var s=r(2411),i=r(7081),o=r(6224),a=r(3933),c=e([a]);a=(c.then?(await c)():c)[0];let d=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/guests/[id]/invite/route",pathname:"/api/guests/[id]/invite",filename:"route",bundlePath:"app/api/guests/[id]/invite/route"},resolvedPagePath:"C:\\Users\\jaime.andre\\Documents\\As Minhas Formas\\downloads\\gestor-convidados\\app\\api\\guests\\[id]\\invite\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:p}=d,f="/api/guests/[id]/invite/route";function u(){return(0,o.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:h})}n()}catch(e){n(e)}})},3933:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{POST:()=>u});var s=r(3120),i=r(1068),o=r(3697),a=r(9599),c=e([i]);i=(c.then?(await c)():c)[0];let d=process.env.RESEND_API_KEY?new o.R(process.env.RESEND_API_KEY):null;async function u(e,{params:t}){try{if(!d)return s.NextResponse.json({error:"Resend n\xe3o configurado"},{status:500});let e=await i.i.collection("guests").doc(t.id).get();if(!e.exists)return s.NextResponse.json({error:"Convidado n\xe3o encontrado"},{status:404});let r=e.data(),n=await (0,a.T)(r.token),o=process.env.APP_BASE_URL||"http://localhost:3000",c=`
    <div style="font-family:Arial,Helvetica,sans-serif">
      <h2>Convite: ${process.env.EVENT_NAME||"Palestra"}</h2>
      <p>Ol\xe1 ${r.fullName},</p>
      <p>Segue novamente o seu QR de check-in.</p>
      <p><img src="${n}" /></p>
      <p>Ou aceda: <a href="${o}/checkin?token=${encodeURIComponent(r.token)}">${o}/checkin?token=${encodeURIComponent(r.token)}</a></p>
    </div>`;return await d.emails.send({from:process.env.EMAIL_FROM||"Convites <no-reply@example.com>",to:[r.email],subject:`Reenvio do convite - ${process.env.EVENT_NAME||"Palestra"}`,html:c,replyTo:process.env.EMAIL_REPLY_TO||void 0}),await i.i.collection("guests").doc(t.id).update({inviteSentAt:Date.now(),updatedAt:Date.now()}),s.NextResponse.json({ok:!0})}catch(e){return console.error(e),s.NextResponse.json({error:e.message||"Erro a reenviar."},{status:500})}}n()}catch(e){n(e)}})},1068:(e,t,r)=>{r.a(e,async(e,n)=>{try{let a;r.d(t,{i:()=>c});var s=r(3263),i=r(2929),o=e([s,i]);if([s,i]=o.then?(await o)():o,(0,s.getApps)().length)a=(0,s.getApps)()[0];else{let e=process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n");process.env.FIREBASE_PROJECT_ID&&process.env.FIREBASE_CLIENT_EMAIL&&e||console.warn("[firebase-admin] Credenciais incompletas. APIs protegidas podem falhar."),a=(0,s.initializeApp)({credential:(0,s.cert)({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:e})})}let c=(0,i.getFirestore)(a);n()}catch(e){n(e)}})},9599:(e,t,r)=>{r.d(t,{T:()=>s});var n=r(6596);async function s(e){try{return await n.toDataURL(e,{errorCorrectionLevel:"H",type:"image/png",margin:2,width:300,color:{dark:"#000000",light:"#ffffff"}})}catch(e){throw console.error("Erro ao gerar QRCode:",e),Error("Falha ao gerar QR Code")}}},3697:(e,t,r)=>{r.d(t,{R:()=>A});var n=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&u(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&u(e,r,t[r]);return e},l=(e,t)=>s(e,i(t)),h=(e,t,r)=>new Promise((n,s)=>{var i=e=>{try{a(r.next(e))}catch(e){s(e)}},o=e=>{try{a(r.throw(e))}catch(e){s(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,o);a((r=r.apply(e,t)).next())}),p=class{constructor(e){this.resend=e}create(e){return h(this,arguments,function*(e,t={}){return yield this.resend.post("/api-keys",e,t)})}list(){return h(this,null,function*(){return yield this.resend.get("/api-keys")})}remove(e){return h(this,null,function*(){return yield this.resend.delete(`/api-keys/${e}`)})}},f=class{constructor(e){this.resend=e}create(e){return h(this,arguments,function*(e,t={}){return yield this.resend.post("/audiences",e,t)})}list(){return h(this,null,function*(){return yield this.resend.get("/audiences")})}get(e){return h(this,null,function*(){return yield this.resend.get(`/audiences/${e}`)})}remove(e){return h(this,null,function*(){return yield this.resend.delete(`/audiences/${e}`)})}},y=class{constructor(e){this.resend=e}send(e){return h(this,arguments,function*(e,t={}){return this.create(e,t)})}create(e){return h(this,arguments,function*(e,t={}){for(let t of e)if(t.react){if(!this.renderAsync)try{let{renderAsync:e}=yield r.e(942).then(r.bind(r,9942));this.renderAsync=e}catch(e){throw Error("Failed to render React component. Make sure to install `@react-email/render`")}t.html=yield this.renderAsync(t.react),t.react=void 0}return yield this.resend.post("/emails/batch",e,t)})}},m=class{constructor(e){this.resend=e}create(e){return h(this,arguments,function*(e,t={}){return yield this.resend.post(`/audiences/${e.audienceId}/contacts`,{unsubscribed:e.unsubscribed,email:e.email,first_name:e.firstName,last_name:e.lastName},t)})}list(e){return h(this,null,function*(){return yield this.resend.get(`/audiences/${e.audienceId}/contacts`)})}get(e){return h(this,null,function*(){return yield this.resend.get(`/audiences/${e.audienceId}/contacts/${e.id}`)})}update(e){return h(this,null,function*(){return yield this.resend.patch(`/audiences/${e.audienceId}/contacts/${e.id}`,{unsubscribed:e.unsubscribed,first_name:e.firstName,last_name:e.lastName})})}remove(e){return h(this,null,function*(){return yield this.resend.delete(`/audiences/${e.audienceId}/contacts/${(null==e?void 0:e.email)?null==e?void 0:e.email:null==e?void 0:e.id}`)})}},g=class{constructor(e){this.resend=e}create(e){return h(this,arguments,function*(e,t={}){return yield this.resend.post("/domains",e,t)})}list(){return h(this,null,function*(){return yield this.resend.get("/domains")})}get(e){return h(this,null,function*(){return yield this.resend.get(`/domains/${e}`)})}update(e){return h(this,null,function*(){return yield this.resend.patch(`/domains/${e.id}`,{click_tracking:e.clickTracking,open_tracking:e.openTracking,tls:e.tls})})}remove(e){return h(this,null,function*(){return yield this.resend.delete(`/domains/${e}`)})}verify(e){return h(this,null,function*(){return yield this.resend.post(`/domains/${e}/verify`)})}},v=class{constructor(e){this.resend=e}send(e){return h(this,arguments,function*(e,t={}){return this.create(e,t)})}create(e){return h(this,arguments,function*(e,t={}){if(e.react){if(!this.renderAsync)try{let{renderAsync:e}=yield r.e(942).then(r.bind(r,9942));this.renderAsync=e}catch(e){throw Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/emails",{attachments:e.attachments,bcc:e.bcc,cc:e.cc,from:e.from,headers:e.headers,html:e.html,reply_to:e.replyTo,scheduled_at:e.scheduledAt,subject:e.subject,tags:e.tags,text:e.text,to:e.to},t)})}get(e){return h(this,null,function*(){return yield this.resend.get(`/emails/${e}`)})}update(e){return h(this,null,function*(){return yield this.resend.patch(`/emails/${e.id}`,{scheduled_at:e.scheduledAt})})}cancel(e){return h(this,null,function*(){return yield this.resend.post(`/emails/${e}/cancel`)})}},E="undefined"!=typeof process&&process.env&&process.env.RESEND_BASE_URL||"https://api.resend.com",R="undefined"!=typeof process&&process.env&&process.env.RESEND_USER_AGENT||"resend-node:4.0.1",A=class{constructor(e){if(this.key=e,this.apiKeys=new p(this),this.audiences=new f(this),this.batch=new y(this),this.contacts=new m(this),this.domains=new g(this),this.emails=new v(this),!e&&("undefined"!=typeof process&&process.env&&(this.key=process.env.RESEND_API_KEY),!this.key))throw Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":R,"Content-Type":"application/json"})}fetchRequest(e){return h(this,arguments,function*(e,t={}){try{let r=yield fetch(`${E}${e}`,t);if(!r.ok)try{let e=yield r.text();return{data:null,error:JSON.parse(e)}}catch(t){if(t instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};let e={message:r.statusText,name:"application_error"};if(t instanceof Error)return{data:null,error:l(d({},e),{message:t.message})};return{data:null,error:e}}return{data:yield r.json(),error:null}}catch(e){return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(e,t){return h(this,arguments,function*(e,t,r={}){let n=d({method:"POST",headers:this.headers,body:JSON.stringify(t)},r);return this.fetchRequest(e,n)})}get(e){return h(this,arguments,function*(e,t={}){let r=d({method:"GET",headers:this.headers},t);return this.fetchRequest(e,r)})}put(e,t){return h(this,arguments,function*(e,t,r={}){let n=d({method:"PUT",headers:this.headers,body:JSON.stringify(t)},r);return this.fetchRequest(e,n)})}patch(e,t){return h(this,arguments,function*(e,t,r={}){let n=d({method:"PATCH",headers:this.headers,body:JSON.stringify(t)},r);return this.fetchRequest(e,n)})}delete(e,t){return h(this,null,function*(){let r={method:"DELETE",headers:this.headers,body:JSON.stringify(t)};return this.fetchRequest(e,r)})}}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[860,642,596],()=>r(4449));module.exports=n})();