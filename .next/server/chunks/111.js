"use strict";exports.id=111,exports.ids=[111],exports.modules={3111:(e,t,s)=>{let n,i,r,a,o,l,c,u,p;s.d(t,{VD:()=>Te});let m=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,s){return arguments.length>=2?t(e,s):function(s){return t(s,e)}};case 3:return function(e,s,n){return arguments.length>=3?t(e,s,n):function(n){return t(n,e,s)}};case 4:return function(e,s,n,i){return arguments.length>=4?t(e,s,n,i):function(i){return t(i,e,s,n)}};case 5:return function(e,s,n,i,r){return arguments.length>=5?t(e,s,n,i,r):function(r){return t(r,e,s,n,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let s=arguments;return function(e){return t(e,...s)}}}},h=e=>e,d=e=>()=>e,f=d(!0),g=d(!1),b=d(void 0);function x(e,t,s,n,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return o(a(r(i(n(s(t(e)))))));case 9:return l(o(a(r(i(n(s(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let y=()=>"3.4.5",v=Symbol.for(`effect/GlobalValue/globalStoreId/${y()}`);v in globalThis||(globalThis[v]=new Map);let _=globalThis[v],S=(e,t)=>(_.has(e)||_.set(e,t()),_.get(e)),w=e=>!!e,k=e=>"string"==typeof e,O=e=>"number"==typeof e,I=e=>"boolean"==typeof e,E=e=>"bigint"==typeof e,T=e=>"symbol"==typeof e,R=e=>"function"==typeof e,N=e=>void 0===e,F=e=>void 0!==e,A=e=>null!==e,M=e=>!1,j=e=>"object"==typeof e&&null!==e,C=e=>j(e)||R(e),L=m(2,(e,t)=>C(e)&&t in e),U=m(2,(e,t)=>L(e,"_tag")&&e._tag===t),$=e=>null==e,D=e=>null!=e,P=e=>e instanceof Date,z=e=>L(e,Symbol.iterator),B=e=>j(e)&&!Array.isArray(e),q=e=>L(e,"then")&&R(e.then),K=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class J{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new J(this.self)}}class V{_state;constructor(e,t,s,n){return $(t)&&$(e)?(t=4294967295*Math.random()>>>0,e=0):$(t)&&(t=e,e=0),$(n)&&$(s)?(n=this._state?this._state[3]:4150755663,s=this._state?this._state[2]:335903614):$(n)&&(n=s,s=0),this._state=new Int32Array([0,0,s>>>0,(1|(n||0))>>>0]),this._next(),G(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,s=(-e>>>0)%e>>>0;for(t=this._next();t<s;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,s,n,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,s=(65535&a)*19605>>>0,n=(65535&a)*32557>>>0,i=(a>>>16)*19605+((s>>>16)+(t>>>16))>>>0,(n=n+(s=s<<16>>>0)>>>0)>>>0<s>>>0&&(i=i+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=n,G(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function G(e,t,s,n,i){let r=t+n>>>0,a=s+i>>>0;a>>>0<s>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let H=Symbol.for("effect/Utils/YieldWrap");class W{#e;constructor(e){this.#e=e}[H](){return this.#e}}function Y(e){if("object"==typeof e&&null!==e&&H in e)return e[H]();throw Error(K("yieldWrapGet"))}let Q=S("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),X=(e=>{let t={[e]:e=>e()};return function(s){return t[e](s)}})("effect_internal_function"),Z=S(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),ee=Symbol.for("effect/Hash"),et=e=>{if(!0===Q.enabled)return 0;switch(typeof e){case"number":return ea(e);case"bigint":return eo(e.toString(10));case"boolean":case"symbol":return eo(String(e));case"string":return eo(e);case"undefined":return eo("undefined");case"function":case"object":if(null===e)return eo("null");if(e instanceof Date)return et(e.toISOString());if(er(e))return e[ee]();return es(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},es=e=>(Z.has(e)||Z.set(e,ea(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Z.get(e)),en=e=>t=>53*t^e,ei=e=>3221225471&e|e>>>1&1073741824,er=e=>L(e,ee),ea=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ei(e)},eo=e=>{let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return ei(t)},el=(e,t)=>{let s=12289;for(let n=0;n<t.length;n++)s^=x(eo(t[n]),en(et(e[t[n]])));return ei(s)},ec=e=>el(e,Object.keys(e)),eu=e=>{let t=6151;for(let s=0;s<e.length;s++)t=x(t,en(et(e[s])));return ei(t)},ep=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,ee,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,ee,{value:()=>t,enumerable:!1}),t},em=Symbol.for("effect/Equal");function eh(){return 1==arguments.length?e=>ed(e,arguments[0]):ed(arguments[0],arguments[1])}function ed(e,t){if(e===t)return!0;let s=typeof e;if(s!==typeof t)return!1;if("object"===s||"function"===s){if(null!==e&&null!==t){if(ef(e)&&ef(t))return!!(et(e)===et(t)&&e[em](t))||!!Q.enabled&&!!Q.tester&&Q.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(Q.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,s)=>ed(e,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let s=Object.keys(e),n=Object.keys(t);if(s.length===n.length){for(let n of s)if(!(n in t&&ed(e[n],t[n])))return!!Q.tester&&Q.tester(e,t);return!0}}return!!Q.tester&&Q.tester(e,t)}}return!!Q.enabled&&!!Q.tester&&Q.tester(e,t)}let ef=e=>L(e,em),eg=()=>eh,eb=Symbol.for("nodejs.util.inspect.custom"),ex=e=>L(e,"toJSON")&&R(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(ex):e,ey=e=>JSON.stringify(e,null,2),ev=(e,t=2)=>{try{return"object"==typeof e?e_(e,t):String(e)}catch(t){return String(e)}},e_=(e,t)=>{let s=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?s.includes(t)?void 0:s.push(t)&&t:t,t);return s=void 0,n},eS=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let s=e;for(let e=0,n=t.length;e<n;e++)s=t[e](s);return s}}},ew="Async",ek="Commit",eO="Failure",eI="OnFailure",eE="OnSuccess",eT="OnSuccessAndFailure",eR="Success",eN="Sync",eF="UpdateRuntimeFlags",eA="While",eM="WithRuntime",ej="Yield",eC="RevertFlags",eL=Symbol.for("effect/Effect"),eU=Symbol.for("effect/Stream"),e$=Symbol.for("effect/Sink"),eD=Symbol.for("effect/Channel"),eP={_R:e=>e,_E:e=>e,_A:e=>e,_V:y()},ez={[eL]:eP,[eU]:eP,[e$]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[eD]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[em](e){return this===e},[ee](){return ep(this,es(this))},[Symbol.iterator](){return new J(new W(this))},pipe(){return eS(this,arguments)}},eB={[ee](){return ep(this,ec(this))},[em](e){let t=Object.keys(this),s=Object.keys(e);if(t.length!==s.length)return!1;for(let s of t)if(!(s in e&&eh(this[s],e[s])))return!1;return!0}},eq={...{...ez,_op:ek},...eB},eK=Symbol.for("effect/Option"),eJ={...ez,[eK]:{_A:e=>e},[eb](){return this.toJSON()},toString(){return ey(this.toJSON())}},eV=Object.assign(Object.create(eJ),{_tag:"Some",_op:"Some",[em](e){return eW(e)&&eQ(e)&&eh(this.value,e.value)},[ee](){return ep(this,en(et(this._tag))(et(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:ex(this.value)}}}),eG=et("None"),eH=Object.assign(Object.create(eJ),{_tag:"None",_op:"None",[em]:e=>eW(e)&&eY(e),[ee]:()=>eG,toJSON(){return{_id:"Option",_tag:this._tag}}}),eW=e=>L(e,eK),eY=e=>"None"===e._tag,eQ=e=>"Some"===e._tag,eX=Object.create(eH),eZ=e=>{let t=Object.create(eV);return t.value=e,t},e0=Symbol.for("effect/Context/Tag"),e1=Symbol.for("effect/STM"),e2={...ez,_tag:"Tag",_op:"Tag",[e1]:eP,[e0]:{_Service:e=>e,_Identifier:e=>e},toString(){return ey(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[eb](){return this.toJSON()},of:e=>e,context(e){return e9(this,e)}},e3=Symbol.for("effect/Context"),e5={[e3]:{_Services:e=>e},[em](e){if(e8(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!eh(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[ee](){return ep(this,ea(this.unsafeMap.size))},pipe(){return eS(this,arguments)},toString(){return ey(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(ex)}},[eb](){return this.toJSON()}},e4=e=>{let t=Object.create(e5);return t.unsafeMap=e,t},e6=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let s=e.stack.split("\n");if(s.length>2){let e=s[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},e8=e=>L(e,e3),e7=e4(new Map),e9=(e,t)=>e4(new Map([[e.key,t]])),te=m(3,(e,t,s)=>{let n=new Map(e.unsafeMap);return n.set(t.key,s),e4(n)}),tt=m(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw e6(t);return e.unsafeMap.get(t.key)}),ts=m(2,(e,t)=>e.unsafeMap.has(t.key)?eZ(e.unsafeMap.get(t.key)):eX),tn=m(2,(e,t)=>{let s=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)s.set(e,n);return e4(s)}),ti=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();Error.stackTraceLimit=t;let n=Object.create(e2);return Object.defineProperty(n,"stack",{get:()=>s.stack}),n.key=e,n},tr=e=>L(e,e0),ta=()=>e7,to=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,e2),n.key=e,Object.defineProperty(n,"stack",{get:()=>s.stack}),n},tl=Symbol.for("effect/Either"),tc={...ez,[tl]:{_R:e=>e},[eb](){return this.toJSON()},toString(){return ey(this.toJSON())}},tu=Object.assign(Object.create(tc),{_tag:"Right",_op:"Right",[em](e){return tm(e)&&td(e)&&eh(this.right,e.right)},[ee](){return en(et(this._tag))(et(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:ex(this.right)}}}),tp=Object.assign(Object.create(tc),{_tag:"Left",_op:"Left",[em](e){return tm(e)&&th(e)&&eh(this.left,e.left)},[ee](){return en(et(this._tag))(et(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:ex(this.left)}}}),tm=e=>L(e,tl),th=e=>"Left"===e._tag,td=e=>"Right"===e._tag,tf=e=>{let t=Object.create(tp);return t.left=e,t},tg=e=>{let t=Object.create(tu);return t.right=e,t},tb=m(2,(e,t)=>eY(e)?tf(t()):tg(e.value)),tx=m(2,(e,{onLeft:t,onRight:s})=>th(e)?t(e.left):s(e.right))({onLeft:h,onRight:h}),ty=m(2,(e,t)=>{if(td(e))return e.right;throw t(e.left)});class tv{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new tv(this.self)}}let t_=Symbol.for("effect/Micro"),tS=Symbol.for("effect/Micro/runSymbol"),tw=e=>"object"==typeof e&&null!==e&&t_ in e,tk=Symbol.for("effect/Micro/Failure"),tO={_E:h};class tI extends globalThis.Error{_tag;traces;[tk];constructor(e,t,s){let n,i,r;let a=`Failure${e}`;if(t instanceof globalThis.Error){n=`(${a}) ${t.name}`;let e=(i=t.message).split("\n").length;r=t.stack?`(${a}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${n}: ${i}`}else n=a,i=ev(t,0),r=`${n}: ${i}`;s.length>0&&(r+=`
    ${s.join("\n    ")}`),super(i),this._tag=e,this.traces=s,this[tk]=tO,this.name=n,this.stack=r}pipe(){return eS(this,arguments)}toString(){return this.stack}[eb](){return this.stack}}class tE extends tI{error;constructor(e,t=[]){super("Expected",e,t),this.error=e}}let tT=(e,t=[])=>new tE(e,t);class tR extends tI{defect;constructor(e,t=[]){super("Unexpected",e,t),this.defect=e}}let tN=(e,t=[])=>new tR(e,t);class tF extends tI{constructor(e=[]){super("Aborted","aborted",e)}}let tA=(e=[])=>new tF(e),tM=m(2,(e,t)=>"Expected"===e._tag?tT(e.error,[...e.traces,t]):"Unexpected"===e._tag?tN(e.defect,[...e.traces,t]):tA([...e.traces,t])),tj=tf(tA()),tC=e=>tf(tT(e)),tL=e=>tf(tN(e)),tU=Symbol.for("effect/Micro/Env"),t$=Symbol.for("effect/Micro/EnvRef"),tD={[tU]:{_R:h},pipe(){return eS(this,arguments)}},tP=e=>{let t=Object.create(tD);return t.refs=e,t},tz=()=>{let e=new AbortController,t=Object.create(null);return t[tH.key]=e,t[tW.key]=e.signal,tP(t)},tB=m(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),tq=m(3,(e,t,s)=>{let n=Object.assign(Object.create(null),e.refs);return n[t.key]=s,tP(n)}),tK=m(2,(e,t)=>tP(t(Object.assign(Object.create(null),e.refs)))),tJ=e=>t3(function(t,s){s(tg(tt(tB(t,tY),e)))}),tV={[t$]:t$},tG=(e,t)=>S(e,()=>{let s=Object.create(tV);return s.key=e,s.initial=t(),s}),tH=tG("effect/Micro/currentAbortController",()=>void 0),tW=tG("effect/Micro/currentAbortSignal",()=>void 0),tY=tG("effect/Micro/currentContext",()=>ta()),tQ=tG("effect/Micro/currentMaxDepthBeforeYield",()=>2048),tX=tG("effect/Micro/currentInterruptible",()=>!0),tZ={...ez,_op:"Micro",[t_]:{_A:h,_E:h,_R:h},[Symbol.iterator](){return new tv(new W(this))}},t0=S("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:tQ.initial})),t1=e=>{let t=Object.create(tZ);return t[tS]=e,t},t2=(e,t)=>t1(function s(n,i){if(t&&!1!==n.refs[tX.key]&&n.refs[tW.key].aborted)return i(tj);if(t0.depth++,1===t0.depth&&(t0.maxDepthBeforeYield=tB(n,tQ)),t0.depth>=t0.maxDepthBeforeYield)sa(()=>s(n,i));else try{e(n,i)}catch(e){i(tL(e))}t0.depth--}),t3=e=>t2(e,!0),t5=e=>t3(function(t,s){s(e)}),t4=e=>t5(tg(e)),t6=e=>t5(tC(e)),t8=e=>t3(function(t,s){s(tg(e()))}),t7=e=>t3(function(t,s){e()[tS](t,s)}),t9=t4(void 0),se=e=>t3(function(t,s){let n,i=!1,r=e.length>1?new AbortController:void 0,a=tB(t,tW);function o(){n?l(sb(su(n,t5(tj)))):l(t5(tj)),void 0!==r&&r.abort()}function l(e){i||(i=!0,a.removeEventListener("abort",o),e[tS](t,s))}n=void 0===r?e(l):e(l,r.signal),i||a.addEventListener("abort",o)}),st=e=>t3(function(t,s){try{s(tg(e.try()))}catch(t){s(tC(e.catch(t)))}}),ss=e=>se(function(t,s){try{e.try(s).then(e=>t(t4(e)),s=>t(t6(e.catch(s))))}catch(s){t(t6(e.catch(s)))}}),sn=S("effect/Micro/yieldState",()=>({tasks:[],working:!1})),si=()=>{let e=sn.tasks;sn.tasks=[];for(let t=0,s=e.length;t<s;t++)e[t]()},sr="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),sa=e=>{sn.tasks.push(e),sn.working||(sn.working=!0,sr(()=>{sn.working=!1,si()}))},so=(...e)=>t3(function(t,s){let n;let i=1===e.length?e[0]():e[1].call(e[0]),r=!1;!function e(){r=!0;try{let a=!0;for(;a;){let o=i.next(n);if(o.done)return s(tg(o.value));a=!1,Y(o.value)[tS](t,function(t){"Left"===t._tag?s(t):(a=!0,n=t.right,r||e())})}}catch(e){s(tL(e))}r=!1}()}),sl=m(2,(e,t)=>t3(function(s,n){e[tS](s,function(e){n("Left"===e._tag?e:tg(t(e.right)))})})),sc=m(2,(e,t)=>t3(function(s,n){e[tS](s,function(e){if("Left"===e._tag)return n(e);t(e.right)[tS](s,n)})})),su=m(2,(e,t)=>t3(function(s,n){e[tS](s,function(e){if("Left"===e._tag)return n(e);if(tB(s,tW).aborted)return n(tj);let i=tw(t)?t:"function"==typeof t?t(e.right):t;tw(i)?i[tS](s,n):n(tg(i))})})),sp=e=>sl(e,e=>void 0),sm=e=>t3(function(t,s){e[tS](t,function(e){s(tg(e))})}),sh=m(e=>tw(e[0]),(e,t,s)=>sc(e,e=>t(e)?t4(e):t6(s(e)))),sd=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let s=e=>s=>t2(function(n,i){s[tS](n,function(s){i("Left"===s._tag?tf(function(e,s){let n=t.stack;if(!n)return s;let i=n.split("\n")[2]?.trim().replace(/^at /,"");if(!i)return s;let r=i.match(/\((.*)\)$/);return tM(s,`at ${e} (${r?r[1]:i})`)}(e,s.left)):s)})},!1);return 2==arguments.length?s(arguments[1])(arguments[0]):s(arguments[0])},sf=Symbol.for("effect/Micro/MicroScope");class sg{[sf];state={_tag:"Open",finalizers:new Set};constructor(){this[sf]=sf}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return t7(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),t9):e(this.state.result))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return t7(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",result:e},sc(sx(t,t=>sm(t(e))),e=>sp(t5(Either.all(e))))}return t9})}get fork(){return t8(()=>{let e=new sg;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>t8(()=>this.unsafeRemoveFinalizer(t))),e})}}let sb=e=>t2(function(t,s){let n=tK(t,function(e){return e[tX.key]=!1,e[tW.key]=new AbortController().signal,e});e[tS](n,s)},!1),sx=(e,t,s)=>t3(function(n,i){let r;let a=s?.concurrency==="inherit"?tB(n,null):s?.concurrency??1,o="unbounded"===a?Number.POSITIVE_INFINITY:Math.max(1,a),[l,c]=function(e){let t=new AbortController,s=tB(e,tW);function n(){t.abort(),s.removeEventListener("abort",n)}return s.addEventListener("abort",n),[tK(e,function(e){return e[tH.key]=t,e[tW.key]=t.signal,e}),n]}(n),u=Array.from(e),p=u.length,m=s?.discard?void 0:Array(p),h=0,d=0,f=0,g=!1;!function e(){for(g=!0;d<o&&h<p;){let s=h,n=u[s];h++,d++;try{t(n,s)[tS](l,function(t){"Left"===t._tag?void 0===r&&(r=t,p=h,c()):void 0!==m&&(m[s]=t.right),f++,d--,f===p?i(r??Either.right(m)):!g&&d<o&&e()})}catch(e){r=tL(e),p=h,c()}}g=!1}()}),sy=function(){class e extends globalThis.Error{[tS](e,t){t(tC(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eb](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,tZ,eB),e}(),sv=class extends sy{constructor(e){super(),e&&Object.assign(this,e)}},s_=e=>{class t extends sv{_tag=e}return t.prototype.name=e,t},sS=Object.create(null),sw=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?sS:globalThis),sk=new Proxy(sS,{get:(e,t)=>sw()[t]??sS[t],has:(e,t)=>t in sw()||t in sS,set:(e,t,s)=>(sw(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;let s=sw(!0);return delete s[t],!0},ownKeys:()=>Object.keys(sw(!0))}),sO="u">typeof process&&process.env&&"production"||"",sI=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CLOUDFLARE_WORKERS","WORKERS_CI",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["CODESANDBOX","CODESANDBOX_HOST",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"],["DENO-DEPLOY","DENO_DEPLOYMENT_ID"],["FIREBASE_APP_HOSTING","FIREBASE_APP_HOSTING",{ci:!0}]],sE=function(){if(globalThis.process?.env)for(let e of sI){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function sT(e){return!!e&&"false"!==e}sE.name;let sR=globalThis.process?.platform||"",sN=(sT(sk.CI)||sE.ci,sT(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),sF=(sT(sk.DEBUG),"test"===sO||sT(sk.TEST),sT(sk.MINIMAL),/^win/i.test(sR)),sA=(/^linux/i.test(sR),/^darwin/i.test(sR),!sT(sk.NO_COLOR)&&(sT(sk.FORCE_COLOR)||(sN||sF)&&sk.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),sM=(sA?.split(".")[0],globalThis.process||Object.create(null)),sj={versions:{}},sC=new Proxy(sM,{get:(e,t)=>"env"===t?sk:t in e?e[t]:t in sj?sj[t]:void 0}),sL=globalThis.process?.release?.name==="node",sU=!!globalThis.Bun||!!globalThis.process?.versions?.bun,s$=!!globalThis.Deno,sD=!!globalThis.fastly,sP=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[sD,"fastly"],[s$,"deno"],[sU,"bun"],[sL,"node"]],sz=function(){let e=sP.find(e=>e[0]);if(e)return{name:e[1]}}();sz?.name;let sB={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},sq={},sK={};function sJ(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(sV)return;sV=!0;let s=["nginx","apache",void 0,"iana"];Object.keys(sB).forEach(n=>{let i=sB[n],r=i.extensions;if(r?.length)for(let a of(e[n]=r,r)){if(t[a]){let e=s.indexOf(sB[t[a]].source),n=s.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>n||e===n&&t[a].startsWith("application/")))continue}t[a]=n}})}(sq,sK),sK)[t]||!1)}let sV=!1;class sG extends s_("InvalidRouteConfig"){constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`})}}class sH extends s_("UnknownFileType"){constructor(e){super({reason:`Could not determine type for ${e}`})}}class sW extends s_("InvalidFileType"){constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`})}}class sY extends s_("InvalidFileSize"){constructor(e){super({reason:`Invalid file size: ${e}`})}}class sQ extends s_("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class sX extends s_("RetryError"){}class sZ extends s_("FetchError"){}class s0 extends s_("InvalidJson"){}class s1 extends s_("BadRequestError"){getMessage(){return B(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}function s2(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let s3=e=>{if(Array.isArray(e))return t4(e.reduce((e,t)=>(e[t]={maxFileSize:s2(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let s of s9(e)){let n=e[s];if(!n)return t6(new sG(s));let i={maxFileSize:s2(s),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[s]={...i,...n}}return t4(t)},s5=(e,t)=>{let s=sJ(e);if(!s)return t.includes("blob")?t4("blob"):t6(new sH(e));if(t.some(e=>e.includes("/"))&&t.includes(s))return t4(s);let n="application/pdf"===s.toLowerCase()?"pdf":s.split("/")[0];return t.includes(n)?t4(n):t.includes("blob")?t4("blob"):t6(new sW(n,e))};function s4(e){let t="https://uploadthing.com";return sC.env.CUSTOM_INFRA_URL&&(t=sC.env.CUSTOM_INFRA_URL),`${t}${e}`}let s6=["B","KB","MB","GB"],s8=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${s6.join("|")})$`,"i"),s=e.match(t);if(!s)return t6(new sY(e));let n=parseFloat(s[1]),i=s[3].toUpperCase();return t4(Math.floor(n*Math.pow(1024,s6.indexOf(i))))},s7=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${s6[t]}`};function s9(e){return Object.keys(e)}function ne(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function nt(e){return Array.isArray(e)?e:[e]}let ns=e=>so(function*(){let t="undefined"!=typeof window?window.location.origin:sC.env?.VERCEL_URL?`https://${sC.env.VERCEL_URL}`:"http://localhost:3000",s=yield*st({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new sQ(e??"/api/uploadthing")});return"/"===s.pathname&&(s.pathname="/api/uploadthing"),s});class nn extends sv{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:ne(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(nn.toObject(e))}}class ni extends to("uploadthing/FetchContext")(){}let nr=(e,t)=>sc(tJ(ni),({fetch:s,baseHeaders:n})=>{let i=new Headers(t?.headers??[]);for(let[e,t]of Object.entries(n))"string"==typeof t&&i.set(e,t);let r={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(i)};return ss({try:n=>s(e,{...t,headers:i,signal:n}),catch:e=>new sZ({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:r})}).pipe(sl(e=>Object.assign(e,{requestUrl:r.url})),sd("fetch"))}),na=e=>ss({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new s0({error:t,input:e.requestUrl})}).pipe(sh(({ok:e})=>e,({json:t,status:s})=>new s1({status:s,message:`Request to ${e.requestUrl} failed with status ${s}`,json:t})),sl(({json:e})=>e),sd("parseJson")),no=e=>ss({try:()=>e.json(),catch:t=>new s0({error:t,input:e.url})}).pipe(sd("parseRequestJson")),nl="hmac-sha256=",nc={name:"HMAC",hash:"SHA-256"},nu=async(e,t)=>{let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(t),nc,!1,["sign"]),i=await crypto.subtle.sign(nc,n,s.encode(e)).then(e=>Buffer.from(e).toString("hex"));return`${nl}${i}`},np=async(e,t,s)=>{let n=t?.slice(nl.length);if(!n)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(s),nc,!1,["verify"]);return await crypto.subtle.verify(nc,r,Uint8Array.from(Buffer.from(n,"hex")),i.encode(e))},nm=e=>(t,s)=>t===s||e(t,s),nh=(e,t)=>e===t,nd=m(2,(e,t)=>nm((s,n)=>e(t(s),t(n)))),nf=nd(nh,e=>e.getTime()),ng=e=>nm((t,s)=>{if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],s[n]))return!1;return!0}),nb=e=>e.length>0,nx=()=>eX,ny=m(2,(e,{onNone:t,onSome:s})=>eY(e)?t():s(e.value)),nv=m(2,(e,t)=>eY(e)?t():e.value),n_=m(2,(e,t)=>eY(e)?t():e),nS=m(2,(e,t)=>eY(e)?eZ(t()):e),nw=e=>null==e?nx():eZ(e),nk=nv(b),nO=e=>(...t)=>{try{return eZ(e(...t))}catch(e){return nx()}},nI=m(2,(e,t)=>{if(eQ(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),nE=m(2,(e,t)=>eY(e)?nx():eZ(t(e.value))),nT=m(2,(e,t)=>eY(e)?nx():t(e.value)),nR=m(2,(e,t)=>eY(e)?nx():t(e.value)),nN=m(2,(e,t)=>nR(e,e=>t(e)?eZ(e):eX)),nF=e=>nm((t,s)=>eY(t)?eY(s):!eY(s)&&e(t.value,s.value)),nA=(n=eg(),m(2,(e,t)=>!eY(e)&&n(e.value,t)));Symbol.iterator,()=>nM;let nM={next:()=>({done:!0,value:void 0})},nj=e=>(t,s)=>t===s?0:e(t,s),nC=nj((e,t)=>e<t?-1:1),nL=((e,t)=>e<t?-1:1,m(2,(e,t)=>nj((s,n)=>e(t(s),t(n)))));Object.fromEntries,(e,t)=>{let s=[];for(let n of nU(e))s.push(t(n,e[n]));return s};let nU=e=>Object.keys(e),n$=(...e)=>e,nD=e=>Array(e),nP=e=>Array.isArray(e)?e:Array.from(e),nz=m(2,(e,{onEmpty:t,onNonEmpty:s})=>nG(e)?s(nZ(e),n2(e)):t()),nB=m(2,(e,t)=>[t,...e]),nq=m(2,(e,t)=>[...e,t]),nK=m(2,(e,t)=>nP(e).concat(nP(t))),nJ=Array.isArray,nV=e=>0===e.length,nG=nb,nH=(e,t)=>e<0||e>=t.length,nW=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),nY=m(2,(e,t)=>{let s=Math.floor(t);return nH(s,e)?nx():eZ(e[s])}),nQ=m(2,(e,t)=>{let s=Math.floor(t);if(nH(s,e))throw Error(`Index ${s} out of bounds`);return e[s]}),nX=nY(0),nZ=nQ(0),n0=e=>nG(e)?eZ(n1(e)):nx(),n1=e=>e[e.length-1],n2=e=>e.slice(1),n3=(e,t)=>{let s=0;for(let n of e){if(!t(n,s))break;s++}return s},n5=m(2,(e,t)=>it(e,n3(e,t))),n4=m(2,(e,t)=>{let s=nP(e);return s.slice(nW(t,s),s.length)}),n6=e=>Array.from(e).reverse(),n8=m(2,(e,t)=>{let s=Array.from(e);return s.sort(t),s}),n7=m(2,(e,t)=>n9(e,t,n$)),n9=m(3,(e,t,s)=>{let n=nP(e),i=nP(t);if(nG(n)&&nG(i)){let e=[s(nZ(n),nZ(i))],t=Math.min(n.length,i.length);for(let r=1;r<t;r++)e[r]=s(n[r],i[r]);return e}return[]}),ie=eg(),it=m(2,(e,t)=>{let s=Array.from(e),n=Math.floor(t);return nG(s)?n>=1?is(s,n):[[],s]:[s,[]]}),is=m(2,(e,t)=>{let s=Math.max(1,Math.floor(t));return s>=e.length?[ii(e),[]]:[nB(e.slice(1,s),nZ(e)),e.slice(s)]}),ii=e=>e.slice(),ir=m(3,(e,t,s)=>{let n=nP(e),i=nP(t);return nG(n)?nG(i)?ig(s)(nK(n,i)):n:i}),ia=m(2,(e,t)=>ir(e,t,ie)),io=()=>[],il=e=>[e],ic=m(2,(e,t)=>e.map(t)),iu=m(2,(e,t)=>{if(nV(e))return[];let s=[];for(let n=0;n<e.length;n++){let i=t(e[n],n);for(let e=0;e<i.length;e++)s.push(i[e])}return s}),ip=iu(h),im=m(2,(e,t)=>{let s=nP(e),n=[];for(let e=0;e<s.length;e++){let i=t(s[e],e);eQ(i)&&n.push(i.value)}return n}),ih=m(3,(e,t,s)=>nP(e).reduce((e,t,n)=>s(e,t,n),t)),id=((e,t,s)=>nP(e).reduceRight((e,t,n)=>s(e,t,n),t),(e,t)=>{let s;let n=[],i=e;for(;eQ(s=t(i));){let[e,t]=s.value;n.push(e),i=t}return n}),ig=m(2,(e,t)=>{let s=nP(e);if(nG(s)){let e=[nZ(s)];for(let n of n2(s))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),ib=e=>ig(e,eg()),ix=m(2,(e,t)=>nP(e).join(t)),iy=Symbol.for("effect/BigDecimal"),iv={[iy]:iy,[ee](){let e=iE(this);return x(et(e.value),en(ea(e.scale)),ep(this))},[em](e){return i_(e)&&iN(this,e)},toString(){return`BigDecimal(${iM(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},i_=e=>L(e,iy),iS=(e,t)=>{let s=Object.create(iv);return s.value=e,s.scale=t,s},iw=(e,t)=>{if(e!==ik&&e%iO===ik)throw RangeError("Value must be normalized");let s=iS(e,t);return s.normalized=s,s},ik=BigInt(0),iO=BigInt(10),iI=iw(ik,0),iE=e=>{if(void 0===e.normalized){if(e.value===ik)e.normalized=iI;else{let t=`${e.value}`,s=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])s++;else break;0===s&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-s)),i=e.scale-s;e.normalized=iw(n,i)}}return e.normalized},iT=(e,t)=>t>e.scale?iS(e.value*iO**BigInt(t-e.scale),t):t<e.scale?iS(e.value/iO**BigInt(e.scale-t),t):e,iR=nm((e,t)=>e.scale>t.scale?iT(t,e.scale).value===e.value:e.scale<t.scale?iT(e,t.scale).value===t.value:e.value===t.value),iN=m(2,(e,t)=>iR(e,t)),iF=e=>{let[t,s=""]=`${e}`.split(".");return iS(BigInt(`${t}${s}`),s.length)},iA=e=>{let t,s;let n=e.search(/\./);if(-1!==n){let i=e.slice(0,n),r=e.slice(n+1);t=`${i}${r}`,s=r.length}else t=e,s=0;return""===t?eZ(iI):/^(?:\+|-)?\d+$/.test(t)?eZ(iS(BigInt(t),s)):nx()},iM=e=>{let t,s;let n=e.value<ik,i=n?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",s="0".repeat(e.scale-i.length)+i;else{let n=i.length-e.scale;if(n>i.length){let e=n-i.length;t=`${i}${"0".repeat(e)}`,s=""}else s=i.slice(n),t=i.slice(0,n)}let r=""===s?t:`${t}.${s}`;return n?`-${r}`:r},ij=e=>Number(iM(e)),iC=e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?nx():eZ(Number(e)),iL=e=>{try{return""===e.trim()?nx():eZ(BigInt(e))}catch(e){return nx()}},iU=e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return nx();try{return eZ(BigInt(e))}catch(e){return nx()}},i$=e=>!e,iD=Symbol.for("effect/Chunk"),iP=[],iz=nm((e,t)=>e.length===t.length&&iQ(e).every((e,s)=>eh(e,i2(t,s)))),iB={[iD]:{_A:e=>e},toString(){return ey(this.toJSON())},toJSON(){return{_id:"Chunk",values:iQ(this).map(ex)}},[eb](){return this.toJSON()},[em](e){return iK(e)&&iz(this,e)},[ee](){return ep(this,eu(iQ(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return iP[Symbol.iterator]();default:return iQ(this)[Symbol.iterator]()}},pipe(){return eS(this,arguments)}},iq=e=>{let t=Object.create(iB);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=iJ,t.right=iJ;break;case"ISingleton":t.length=1,t.depth=0,t.left=iJ,t.right=iJ;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=iJ,t.right=iJ}return t},iK=e=>L(e,iD),iJ=iq({_tag:"IEmpty"}),iV=()=>iJ,iG=(...e)=>1===e.length?iH(e[0]):i1(e),iH=e=>iq({_tag:"ISingleton",a:e}),iW=e=>iK(e)?e:iq({_tag:"IArray",array:nP(e)}),iY=(e,t,s)=>{switch(e.backing._tag){case"IArray":!function(e,t,s,n,i){for(let t=0;t<Math.min(e.length,0+i);t++)s[n+t-0]=e[t]}(e.backing.array,0,t,s,e.length);break;case"IConcat":iY(e.left,t,s),iY(e.right,t,s+e.left.length);break;case"ISingleton":t[s]=e.backing.a;break;case"ISlice":{let n=0,i=s;for(;n<e.length;)t[i]=i2(e,n),n+=1,i+=1}}},iQ=e=>{switch(e.backing._tag){case"IEmpty":return iP;case"IArray":return e.backing.array;default:{let t=Array(e.length);return iY(e,t,0),e.backing={_tag:"IArray",array:t},e.left=iJ,e.right=iJ,e.depth=0,t}}},iX=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return iq({_tag:"IArray",array:n6(e.backing.array)});case"IConcat":return iq({_tag:"IConcat",left:iX(e.backing.right),right:iX(e.backing.left)});case"ISlice":return i0(n6(iQ(e)))}},iZ=m(2,(e,t)=>t<0||t>=e.length?nx():eZ(i2(e,t))),i0=e=>iq({_tag:"IArray",array:e}),i1=e=>i0(e),i2=m(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?i2(e.left,t):i2(e.right,t-e.left.length);case"ISlice":return i2(e.backing.chunk,t+e.backing.offset)}}),i3=m(2,(e,t)=>i6(e,iH(t))),i5=m(2,(e,t)=>i6(iH(t),e)),i4=m(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return iJ;switch(e.backing._tag){case"ISlice":return iq({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return i4(e.right,t-e.left.length);return iq({_tag:"IConcat",left:i4(e.left,t),right:e.right});default:return iq({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),i6=m(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let s=t.depth-e.depth;if(1>=Math.abs(s))return iq({_tag:"IConcat",left:e,right:t});if(s<-1){if(e.left.depth>=e.right.depth){let s=i6(e.right,t);return iq({_tag:"IConcat",left:e.left,right:s})}{let s=i6(e.right.right,t);if(s.depth===e.depth-3){let t=iq({_tag:"IConcat",left:e.right.left,right:s});return iq({_tag:"IConcat",left:e.left,right:t})}{let t=iq({_tag:"IConcat",left:e.left,right:e.right.left});return iq({_tag:"IConcat",left:t,right:s})}}}if(t.right.depth>=t.left.depth)return iq({_tag:"IConcat",left:i6(e,t.left),right:t.right});{let s=i6(e,t.left.left);if(s.depth===t.depth-3){let e=iq({_tag:"IConcat",left:s,right:t.left.right});return iq({_tag:"IConcat",left:e,right:t.right})}{let e=iq({_tag:"IConcat",left:t.left.right,right:t.right});return iq({_tag:"IConcat",left:s,right:e})}}}),i8=e=>0===e.length,i7=e=>e.length>0,i9=iZ(0),re=e=>i2(e,0),rt=e=>i4(e,1);function rs(e,t){var s;return s=e&t-1,s-=s>>1&1431655765,s=(s=(858993459&s)+(s>>2&858993459))+(s>>4)&252645135,s+=s>>8,127&(s+=s>>16)}let rn=(e,t)=>({value:e,previous:t});function ri(e,t,s,n){let i=n;if(!e){let e=n.length;i=Array(e);for(let t=0;t<e;++t)i[t]=n[t]}return i[t]=s,i}function rr(e,t,s){let n=s.length-1,i=0,r=0,a=s;if(e)i=r=t;else for(a=Array(n);i<t;)a[r++]=s[i++];for(++i;i<=n;)a[r++]=s[i++];return e&&(a.length=n),a}class ra{_tag="EmptyNode";modify(e,t,s,n,i,r){let a=s(nx());return eY(a)?new ra:(++r.value,new rc(e,n,i,a))}}function ro(e){return U(e,"EmptyNode")}function rl(e,t){return!ro(e)&&t===e.edit}class rc{edit;hash;key;value;_tag="LeafNode";constructor(e,t,s,n){this.edit=e,this.hash=t,this.key=s,this.value=n}modify(e,t,s,n,i,r){if(eh(i,this.key)){let t=s(this.value);return t===this.value?this:eY(t)?(--r.value,new ra):rl(this,e)?(this.value=t,this):new rc(e,n,i,t)}let a=s(nx());return eY(a)?this:(++r.value,rh(e,t,this.hash,this,n,new rc(e,n,i,a)))}}class ru{edit;hash;children;_tag="CollisionNode";constructor(e,t,s){this.edit=e,this.hash=t,this.children=s}modify(e,t,s,n,i,r){if(n===this.hash){let t=rl(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,s,i,r);return n===this.children?this:n.length>1?new ru(e,this.hash,n):n[0]}let a=s(nx());return eY(a)?this:(++r.value,rh(e,t,this.hash,this,n,new rc(e,n,i,a)))}updateCollisionList(e,t,s,n,i,r,a){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&eh(r,o.key)){let c=o.value,u=i(c);if(u===c)return n;if(eY(u))return--a.value,rr(e,l,n);return ri(e,l,new rc(t,s,r,u),n)}}let l=i(nx());return eY(l)?n:(++a.value,ri(e,o,new rc(t,s,r,l),n))}}class rp{edit;mask;children;_tag="IndexedNode";constructor(e,t,s){this.edit=e,this.mask=t,this.children=s}modify(e,t,s,n,i,r){let a;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=rs(o,u),m=o&u,h=rl(this,e);if(!m){let a=new ra().modify(e,t+5,s,n,i,r);return a?l.length>=16?function(e,t,s,n,i){let r=[],a=n,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=s,new rm(e,o+1,r)}(e,c,a,o,l):new rp(e,o|u,function(e,t,s,n){let i=n.length;if(e){let e=i;for(;e>=t;)n[e--]=n[e];return n[t]=s,n}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=n[r++];for(o[t]=s;r<i;)o[++a]=n[r++];return o}(h,p,a,l)):this}let d=l[p],f=d.modify(e,t+5,s,n,i,r);if(d===f)return this;let g=o;if(ro(f)){var b;if(!(g&=~u))return new ra;if(l.length<=2&&(ro(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=rr(h,p,l)}else a=ri(h,p,f,l);return h?(this.mask=g,this.children=a,this):new rp(e,g,a)}}class rm{edit;size;children;_tag="ArrayNode";constructor(e,t,s){this.edit=e,this.size=t,this.children=s}modify(e,t,s,n,i,r){let a,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new ra).modify(e,t+5,s,n,i,r);if(u===p)return this;let m=rl(this,e);if(ro(u)&&!ro(p))++o,a=ri(m,c,p,l);else if(!ro(u)&&ro(p)){if(--o<=8)return function(e,t,s,n){let i=Array(t-1),r=0,a=0;for(let e=0,t=n.length;e<t;++e)if(e!==s){let t=n[e];t&&!ro(t)&&(i[r++]=t,a|=1<<e)}return new rp(e,a,i)}(e,o,c,l);a=ri(m,c,new ra,l)}else a=ri(m,c,p,l);return m?(this.size=o,this.children=a,this):new rm(e,o,a)}}function rh(e,t,s,n,i,r){let a;let o=t;for(;;){let t=function(e,t,s,n,i,r){if(s===i)return new ru(e,s,[r,n]);let a=s>>>t&31,o=i>>>t&31;return a===o?t=>new rp(e,1<<a|1<<o,[t]):new rp(e,1<<a|1<<o,a<o?[n,r]:[r,n])}(e,o,s,n,i,r);if("function"==typeof t)a=rn(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let rd="effect/HashMap",rf=Symbol.for(rd),rg={[rf]:rf,[Symbol.iterator](){return new rx(this,(e,t)=>[e,t])},[ee](){let e=et(rd);for(let t of this)e^=x(et(t[0]),en(et(t[1])));return ep(this,e)},[em](e){if(rk(e)){if(e._size!==this._size)return!1;for(let t of this){let s=x(e,rI(t[0],et(t[0])));if(eY(s)||!eh(t[1],s.value))return!1}return!0}return!1},toString(){return ey(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(ex)}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},rb=(e,t,s,n)=>{let i=Object.create(rg);return i._editable=e,i._edit=t,i._root=s,i._size=n,i};class rx{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=rv(this.map._root,this.f,void 0)}next(){if(eY(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=ry(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new rx(this.map,this.f)}}let ry=e=>e?r_(e[0],e[1],e[2],e[3],e[4]):nx(),rv=(e,t,s)=>{switch(e._tag){case"LeafNode":if(eQ(e.value))return eZ({value:t(e.key,e.value.value),cont:s});return ry(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return r_(n.length,n,0,t,s)}default:return ry(s)}},r_=(e,t,s,n,i)=>{for(;s<e;){let r=t[s++];if(r&&!ro(r))return rv(r,n,[e,t,s,n,i])}return ry(i)},rS=rb(!1,0,new ra,0),rw=()=>rS,rk=e=>L(e,rf),rO=m(2,(e,t)=>rI(e,t,et(t))),rI=m(3,(e,t,s)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return eh(t,n.key)?n.value:nx();case"CollisionNode":if(s===n.hash){let e=n.children;for(let s=0,n=e.length;s<n;++s){let n=e[s];if("key"in n&&eh(t,n.key))return n.value}}return nx();case"IndexedNode":{let e=1<<(s>>>i&31);if(n.mask&e){n=n.children[rs(n.mask,e)],i+=5;break}return nx()}case"ArrayNode":if(n=n.children[s>>>i&31]){i+=5;break}return nx();default:return nx()}}),rE=m(2,(e,t)=>eQ(rI(e,t,et(t)))),rT=m(3,(e,t,s)=>rj(e,t,()=>eZ(s))),rR=m(3,(e,t,s)=>e._editable?(e._root=t,e._size=s,e):t===e._root?e:rb(e._editable,e._edit,t,s)),rN=e=>new rx(e,e=>e),rF=e=>e._size,rA=e=>rb(!0,e._edit+1,e._root,e._size),rM=e=>(e._editable=!1,e),rj=((e,t)=>{let s=rA(e);return t(s),rM(s)},m(3,(e,t,s)=>rC(e,t,et(t),s))),rC=m(4,(e,t,s,n)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,n,s,t,i);return x(e,rR(r,i.value))}),rL=m(2,(e,t)=>rj(e,t,nx)),rU=m(2,(e,t)=>rD(e,rw(),(e,s,n)=>rT(e,n,t(s,n)))),r$=m(2,(e,t)=>rD(e,void 0,(e,s,n)=>t(s,n))),rD=m(3,(e,t,s)=>{let n;let i=e._root;if("LeafNode"===i._tag)return eQ(i.value)?s(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;n=r.pop();)for(let e=0,i=n.length;e<i;){let i=n[e++];i&&!ro(i)&&("LeafNode"===i._tag?eQ(i.value)&&(t=s(t,i.value.value,i.key)):r.push(i.children))}return t}),rP="effect/HashSet",rz=Symbol.for(rP),rB={[rz]:rz,[Symbol.iterator](){return rN(this._keyMap)},[ee](){return ep(this,en(et(this._keyMap))(et(rP)))},[em](e){return!!rK(e)&&rF(this._keyMap)===rF(e._keyMap)&&eh(this._keyMap,e._keyMap)},toString(){return ey(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(ex)}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},rq=e=>{let t=Object.create(rB);return t._keyMap=e,t},rK=e=>L(e,rz),rJ=rq(rw()),rV=()=>rJ,rG=m(2,(e,t)=>rE(e._keyMap,t)),rH=m(2,(e,t)=>{let s=!1;for(let n of e)if(s=t(n))break;return s}),rW=m(2,(e,t)=>!rH(e,e=>!t(e))),rY=e=>rq(rA(e._keyMap)),rQ=e=>(e._keyMap._editable=!1,e),rX=m(2,(e,t)=>{let s=rY(e);return t(s),rQ(s)}),rZ=m(2,(e,t)=>e._keyMap._editable?(rT(t,!0)(e._keyMap),e):rq(rT(t,!0)(e._keyMap))),r0=m(2,(e,t)=>e._keyMap._editable?(rL(t)(e._keyMap),e):rq(rL(t)(e._keyMap))),r1=m(2,(e,t)=>rX(e,e=>{for(let s of t)r0(e,s)})),r2=m(2,(e,t)=>rX(rV(),s=>{for(let n of(r3(e,e=>rZ(s,e)),t))rZ(s,n)})),r3=m(2,(e,t)=>r$(e._keyMap,(e,s)=>t(s))),r5=m(3,(e,t,s)=>rD(e._keyMap,t,(e,t,n)=>s(e,n))),r4=e=>{let t=rY(rV());for(let s of e)rZ(t,s);return rQ(t)},r6=(...e)=>{let t=rY(rV());for(let s of e)rZ(t,s);return rQ(t)},r8=e=>rF(e._keyMap),r7=Symbol.for("effect/MutableRef"),r9={[r7]:r7,toString(){return ey(this.toJSON())},toJSON(){return{_id:"MutableRef",current:ex(this.current)}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},ae=e=>{let t=Object.create(r9);return t.current=e,t},at=m(3,(e,t,s)=>!!eh(t,e.current)&&(e.current=s,!0)),as=e=>e.current,an=m(2,(e,t)=>(e.current=t,e)),ai="effect/FiberId",ar=Symbol.for(ai),aa="None",ao="Runtime",al="Composite",ac=eo(`${ai}-${aa}`);class au{[ar]=ar;_tag=aa;id=-1;startTimeMillis=-1;[ee](){return ac}[em](e){return ad(e)&&e._tag===aa}toString(){return ey(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[eb](){return this.toJSON()}}class ap{id;startTimeMillis;[ar]=ar;_tag=ao;constructor(e,t){this.id=e,this.startTimeMillis=t}[ee](){return ep(this,eo(`${ai}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[em](e){return ad(e)&&e._tag===ao&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return ey(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[eb](){return this.toJSON()}}class am{left;right;[ar]=ar;_tag=al;constructor(e,t){this.left=e,this.right=t}_hash;[ee](){return x(eo(`${ai}-${this._tag}`),en(et(this.left)),en(et(this.right)),ep(this))}[em](e){return ad(e)&&e._tag===al&&eh(this.left,e.left)&&eh(this.right,e.right)}toString(){return ey(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:ex(this.left),right:ex(this.right)}}[eb](){return this.toJSON()}}let ah=new au,ad=e=>L(e,ar),af=e=>e._tag===aa||x(a_(e),rW(e=>af(e))),ag=m(2,(e,t)=>e._tag===aa?t:t._tag===aa?e:new am(e,t)),ab=m(2,(e,t)=>af(e)?t:e),ax=e=>{switch(e._tag){case aa:return rV();case ao:return r6(e.id);case al:return x(ax(e.left),r2(ax(e.right)))}},ay=S(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>ae(0)),av=e=>Array.from(ax(e)).map(e=>`#${e}`).join(","),a_=e=>{switch(e._tag){case aa:return rV();case ao:return r6(e);case al:return x(a_(e.left),r2(a_(e.right)))}},aS=ah,aw=(e,t)=>new ap(e,t),ak=(e,t)=>new am(e,t),aO=ad,aI=()=>{let e=as(ay);return x(ay,an(e+1)),new ap(e,Date.now())},aE=e=>{let t=rA(rw());for(let s of e)rT(t,s[0],s[1]);return rM(t)},aT=e=>e&&ro(e._root),aR=Symbol.for("effect/List"),aN=e=>nP(e),aF=nd(ng(eh),aN),aA={[aR]:aR,_tag:"Cons",toString(){return ey(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:aN(this).map(ex)}},[eb](){return this.toJSON()},[em](e){return aL(e)&&this._tag===e._tag&&aF(this,e)},[ee](){return ep(this,eu(aN(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let s=t.head;return t=t.tail,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eS(this,arguments)}},aM=(e,t)=>{let s=Object.create(aA);return s.head=e,s.tail=t,s},aj=eo("Nil"),aC=Object.create({[aR]:aR,_tag:"Nil",toString(){return ey(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[eb](){return this.toJSON()},[ee]:()=>aj,[em](e){return aL(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eS(this,arguments)}}),aL=e=>L(e,aR),aU=e=>"Nil"===e._tag,a$=e=>"Cons"===e._tag,aD=(e,t)=>aM(e,t),aP=()=>aC,az=e=>aM(e,aC),aB=m(2,(e,t)=>aK(t,e)),aq=m(2,(e,t)=>aD(t,e)),aK=m(2,(e,t)=>{if(aU(e))return t;if(aU(t))return e;{let s=aM(t.head,e),n=s,i=t.tail;for(;!aU(i);){let t=aM(i.head,e);n.tail=t,n=t,i=i.tail}return s}}),aJ=m(3,(e,t,s)=>{let n=t,i=e;for(;!aU(i);)n=s(n,i.head),i=i.tail;return n}),aV=e=>{let t=aP(),s=e;for(;!aU(s);)t=aq(t,s.head),s=s.tail;return t},aG="Expected List to be non-empty",aH=e=>{if(aU(e))throw Error(aG);return e.head},aW=e=>{if(aU(e))throw Error(aG);return e.tail};Array.prototype;let aY=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=eB,e}(),aQ=e=>Object.assign(Object.create(eB),e),aX=Symbol.for("effect/DifferChunkPatch");function aZ(e){return e}({...aY.prototype,[aX]:{_Value:aZ,_Patch:aZ}});let a0=Symbol.for("effect/DifferContextPatch");function a1(e){return e}let a2={...aY.prototype,[a0]:{_Value:a1,_Patch:a1}},a3=Object.create(Object.assign(Object.create(a2),{_tag:"Empty"})),a5=()=>a3,a4=Object.assign(Object.create(a2),{_tag:"AndThen"}),a6=(e,t)=>{let s=Object.create(a4);return s.first=e,s.second=t,s},a8=Object.assign(Object.create(a2),{_tag:"AddService"}),a7=(e,t)=>{let s=Object.create(a8);return s.key=e,s.service=t,s},a9=Object.assign(Object.create(a2),{_tag:"RemoveService"}),oe=e=>{let t=Object.create(a9);return t.key=e,t},ot=Object.assign(Object.create(a2),{_tag:"UpdateService"}),os=(e,t)=>{let s=Object.create(ot);return s.key=e,s.update=t,s},on=(e,t)=>{let s=new Map(e.unsafeMap),n=a5();for(let[e,i]of t.unsafeMap.entries())if(s.has(e)){let t=s.get(e);s.delete(e),eh(t,i)||(n=oi(os(e,()=>i))(n))}else s.delete(e),n=oi(a7(e,i))(n);for(let[e]of s.entries())n=oi(oe(e))(n);return n},oi=m(2,(e,t)=>a6(e,t)),or=m(2,(e,t)=>{if("Empty"===e._tag)return t;let s=!1,n=iH(e),i=new Map(t.unsafeMap);for(;i7(n);){let e=re(n),t=rt(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=i5(i5(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),s=!0,n=t}}if(!s)return e4(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return e4(r)}),oa=Symbol.for("effect/DifferHashMapPatch");function oo(e){return e}({...aY.prototype,[oa]:{_Value:oo,_Key:oo,_Patch:oo}});let ol=Symbol.for("effect/DifferHashSetPatch");function oc(e){return e}let ou={...aY.prototype,[ol]:{_Value:oc,_Key:oc,_Patch:oc}},op=Object.create(Object.assign(Object.create(ou),{_tag:"Empty"})),om=()=>op,oh=Object.assign(Object.create(ou),{_tag:"AndThen"}),od=(e,t)=>{let s=Object.create(oh);return s.first=e,s.second=t,s},of=Object.assign(Object.create(ou),{_tag:"Add"}),og=e=>{let t=Object.create(of);return t.value=e,t},ob=Object.assign(Object.create(ou),{_tag:"Remove"}),ox=e=>{let t=Object.create(ob);return t.value=e,t},oy=(e,t)=>{let[s,n]=r5([e,om()],([e,t],s)=>rG(s)(e)?[r0(s)(e),t]:[e,ov(og(s))(t)])(t);return r5(n,(e,t)=>ov(ox(t))(e))(s)},ov=m(2,(e,t)=>od(e,t)),o_=m(2,(e,t)=>{if("Empty"===e._tag)return t;let s=t,n=iH(e);for(;i7(n);){let e=re(n),t=rt(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=i5(e.first)(i5(e.second)(t));break;case"Add":s=rZ(e.value)(s),n=t;break;case"Remove":s=r0(e.value)(s),n=t}}return s}),oS=Symbol.for("effect/DifferOrPatch");function ow(e){return e}let ok={...aY.prototype,[oS]:{_Value:ow,_Key:ow,_Patch:ow}},oO=Object.create(Object.assign(Object.create(ok),{_tag:"Empty"})),oI=Object.assign(Object.create(ok),{_tag:"AndThen"}),oE=(e,t)=>{let s=Object.create(oI);return s.first=e,s.second=t,s},oT=Object.assign(Object.create(ok),{_tag:"SetLeft"}),oR=Object.assign(Object.create(ok),{_tag:"SetRight"}),oN=Object.assign(Object.create(ok),{_tag:"UpdateLeft"}),oF=Object.assign(Object.create(ok),{_tag:"UpdateRight"}),oA=((e,t)=>oE(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function oM(e){return e}let oj={...aY.prototype,[oA]:{_Value:oM,_Patch:oM}},oC=Object.create(Object.assign(Object.create(oj),{_tag:"Empty"})),oL=()=>oC,oU=Object.assign(Object.create(oj),{_tag:"AndThen"}),o$=(e,t)=>{let s=Object.create(oU);return s.first=e,s.second=t,s},oD=Object.assign(Object.create(oj),{_tag:"Append"}),oP=e=>{let t=Object.create(oD);return t.values=e,t},oz=Object.assign(Object.create(oj),{_tag:"Slice"}),oB=(e,t)=>{let s=Object.create(oz);return s.from=e,s.until=t,s},oq=Object.assign(Object.create(oj),{_tag:"Update"}),oK=(e,t)=>{let s=Object.create(oq);return s.index=e,s.patch=t,s},oJ=e=>{let t=0,s=oL();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(n,i);eh(r,e.differ.empty)||(s=oV(s,oK(t,r))),t+=1}return t<e.oldValue.length&&(s=oV(s,oB(0,t))),t<e.newValue.length&&(s=oV(s,oP(n4(t)(e.newValue)))),s},oV=m(2,(e,t)=>o$(e,t)),oG=m(3,(e,t,s)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=il(e);for(;nb(i);){let e=nZ(i),t=n2(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=s.patch(e.patch,n[e.index]),i=t}}return n}),oH={[Symbol.for("effect/Differ")]:{_P:h,_V:h}},oW=e=>{let t=Object.create(oH);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},oY=()=>oW({empty:a5(),combine:(e,t)=>oi(t)(e),diff:(e,t)=>on(e,t),patch:(e,t)=>or(t)(e)}),oQ=()=>oW({empty:om(),combine:(e,t)=>ov(t)(e),diff:(e,t)=>oy(e,t),patch:(e,t)=>o_(t)(e)}),oX=e=>oW({empty:oL(),combine:(e,t)=>oV(e,t),diff:(t,s)=>oJ({oldValue:t,newValue:s,differ:e}),patch:(t,s)=>oG(t,s,e)}),oZ=()=>o0((e,t)=>t),o0=e=>oW({empty:h,combine:(e,t)=>e===h?t:t===h?e:s=>t(e(s)),diff:(e,t)=>eh(e,t)?h:d(t),patch:(t,s)=>e(s,t(s))}),o1=e=>255&e,o2=e=>e>>8&255,o3=(e,t)=>(255&e)+((t&e&255)<<8),o5=o3(0,0),o4=m(2,(e,t)=>o3(o1(e)&~t,o2(e))),o6=m(2,(e,t)=>e|t),o8=e=>~e>>>0&255,o7=e=>ls(e,32),o9=m(2,(e,t)=>e|t),le=e=>lt(e)&&!la(e),lt=e=>ls(e,1),ls=m(2,(e,t)=>(e&t)!=0),ln=(...e)=>e.reduce((e,t)=>e|t,0),li=ln(0),lr=e=>ls(e,4),la=e=>ls(e,16),lo=m(2,(e,t)=>o3(e^t,t)),ll=m(2,(e,t)=>e&(o8(o1(t))|o2(t))|o1(t)&o2(t)),lc=oW({empty:o5,diff:(e,t)=>lo(e,t),combine:(e,t)=>o6(t)(e),patch:(e,t)=>ll(t,e)}),lu=e=>o3(e,e),lp=e=>o3(e,0),lm="Empty",lh="Fail",ld="Interrupt",lf="Parallel",lg="Sequential",lb="effect/Cause",lx=Symbol.for(lb),ly={[lx]:{_E:e=>e},[ee](){return x(et(lb),en(et(lB(this))),ep(this))},[em](e){return lI(e)&&lz(this,e)},pipe(){return eS(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:ex(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:ex(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:ex(this.left),right:ex(this.right)}}},toString(){return lX(this)},[eb](){return this.toJSON()}},lv=(()=>{let e=Object.create(ly);return e._tag=lm,e})(),l_=e=>{let t=Object.create(ly);return t._tag=lh,t.error=e,t},lS=e=>{let t=Object.create(ly);return t._tag="Die",t.defect=e,t},lw=e=>{let t=Object.create(ly);return t._tag=ld,t.fiberId=e,t},lk=(e,t)=>{let s=Object.create(ly);return s._tag=lf,s.left=e,s.right=t,s},lO=(e,t)=>{let s=Object.create(ly);return s._tag=lg,s.left=e,s.right=t,s},lI=e=>L(e,lx),lE=e=>"Die"===e._tag,lT=e=>e._tag===lm||lY(e,!0,(e,t)=>{switch(t._tag){case lm:return eZ(e);case"Die":case lh:case ld:return eZ(!1);default:return nx()}}),lR=e=>eQ(lL(e)),lN=e=>lQ(void 0,lV)(e),lF=e=>iX(lY(e,iV(),(e,t)=>t._tag===lh?eZ(x(e,i5(t.error))):nx())),lA=e=>iX(lY(e,iV(),(e,t)=>"Die"===t._tag?eZ(x(e,i5(t.defect))):nx())),lM=e=>lY(e,rV(),(e,t)=>t._tag===ld?eZ(x(e,rZ(t.fiberId))):nx()),lj=e=>lK(e,e=>e._tag===lh?eZ(e.error):nx()),lC=e=>{let t=lj(e);switch(t._tag){case"None":return tg(e);case"Some":return tf(t.value)}},lL=e=>lK(e,e=>e._tag===ld?eZ(e.fiberId):nx()),lU=e=>lW(e,{onEmpty:nx(),onFail:e=>eZ(lS(e)),onDie:e=>eZ(lS(e)),onInterrupt:()=>nx(),onSequential:(e,t)=>eQ(e)&&eQ(t)?eZ(lO(e.value,t.value)):eQ(e)&&eY(t)?eZ(e.value):eY(e)&&eQ(t)?eZ(t.value):nx(),onParallel:(e,t)=>eQ(e)&&eQ(t)?eZ(lk(e.value,t.value)):eQ(e)&&eY(t)?eZ(e.value):eY(e)&&eQ(t)?eZ(t.value):nx()}),l$=e=>lW(e,{onEmpty:lv,onFail:()=>lv,onDie:e=>lS(e),onInterrupt:e=>lw(e),onSequential:lO,onParallel:lk}),lD=e=>lW(e,{onEmpty:lv,onFail:e=>lS(e),onDie:e=>lS(e),onInterrupt:e=>lw(e),onSequential:(e,t)=>lO(e,t),onParallel:(e,t)=>lk(e,t)}),lP=((e,t)=>lP(e,e=>l_(t(e))),m(2,(e,t)=>lW(e,{onEmpty:lv,onFail:e=>t(e),onDie:e=>lS(e),onInterrupt:e=>lw(e),onSequential:(e,t)=>lO(e,t),onParallel:(e,t)=>lk(e,t)}))),lz=(e,t)=>{let s=iH(e),n=iH(t);for(;i7(s)&&i7(n);){let[e,t]=x(re(s),lY([rV(),iV()],([e,t],s)=>{let[n,i]=lJ(s);return eZ([x(e,r2(n)),x(t,i6(i))])})),[i,r]=x(re(n),lY([rV(),iV()],([e,t],s)=>{let[n,i]=lJ(s);return eZ([x(e,r2(n)),x(t,i6(i))])}));if(!eh(e,i))return!1;s=t,n=r}return!0},lB=e=>lq(iH(e),iV()),lq=(e,t)=>{for(;;){let[s,n]=x(e,ih([rV(),iV()],([e,t],s)=>{let[n,i]=lJ(s);return[x(e,r2(n)),x(t,i6(i))]})),i=r8(s)>0?x(t,i5(s)):t;if(i8(n))return iX(i);e=n,t=i}throw Error(K("Cause.flattenCauseLoop"))},lK=m(2,(e,t)=>{let s=[e];for(;s.length>0;){let e=s.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case lg:case lf:s.push(e.right),s.push(e.left)}break;case"Some":return n}}return nx()}),lJ=e=>{let t=e,s=[],n=rV(),i=iV();for(;void 0!==t;)switch(t._tag){case lm:if(0===s.length)return[n,i];t=s.pop();break;case lh:if(n=rZ(n,iG(t._tag,t.error)),0===s.length)return[n,i];t=s.pop();break;case"Die":if(n=rZ(n,iG(t._tag,t.defect)),0===s.length)return[n,i];t=s.pop();break;case ld:if(n=rZ(n,iG(t._tag,t.fiberId)),0===s.length)return[n,i];t=s.pop();break;case lg:switch(t.left._tag){case lm:t=t.right;break;case lg:t=lO(t.left.left,lO(t.left.right,t.right));break;case lf:t=lk(lO(t.left.left,t.right),lO(t.left.right,t.right));break;default:i=i5(i,t.right),t=t.left}break;case lf:s.push(t.right),t=t.left}throw Error(K("Cause.evaluateCauseLoop"))},lV={emptyCase:f,failCase:g,dieCase:g,interruptCase:f,sequentialCase:(e,t,s)=>t&&s,parallelCase:(e,t,s)=>t&&s},lG="SequentialCase",lH="ParallelCase",lW=m(2,(e,{onDie:t,onEmpty:s,onFail:n,onInterrupt:i,onParallel:r,onSequential:a})=>lQ(e,void 0,{emptyCase:()=>s,failCase:(e,t)=>n(t),dieCase:(e,s)=>t(s),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,s)=>a(t,s),parallelCase:(e,t,s)=>r(t,s)})),lY=m(3,(e,t,s)=>{let n=t,i=e,r=[];for(;void 0!==i;){let e=s(n,i);switch(n=eQ(e)?e.value:n,i._tag){case lg:case lf:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return n}),lQ=m(3,(e,t,s)=>{let n=[e],i=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case lm:i.push(tg(s.emptyCase(t)));break;case lh:i.push(tg(s.failCase(t,e.error)));break;case"Die":i.push(tg(s.dieCase(t,e.defect)));break;case ld:i.push(tg(s.interruptCase(t,e.fiberId)));break;case lg:n.push(e.right),n.push(e.left),i.push(tf({_tag:lG}));break;case lf:n.push(e.right),n.push(e.left),i.push(tf({_tag:lH}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case lG:{let e=r.pop(),n=r.pop(),i=s.sequentialCase(t,e,n);r.push(i);break}case lH:{let e=r.pop(),n=r.pop(),i=s.parallelCase(t,e,n);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),lX=e=>lN(e)?"All fibers interrupted without errors.":l4(e).map(e=>e.stack).join("\n");class lZ extends globalThis.Error{span=void 0;constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(l0(e)),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=t,this.name=e instanceof Error?e.name:"Error","object"==typeof e&&null!==e&&(l5 in e&&(this.span=e[l5]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=l3(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let l0=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(L(e,"toString")&&R(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},l1=/\((.*)\)/,l2=S("effect/Tracer/spanToTrace",()=>new WeakMap),l3=(e,t,s)=>{let n=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<i.length&&!i[e].includes("Generator.next");e++){if(i[e].includes("effect_internal_function")){n.pop();break}n.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(s){let e=s,t=0;for(;e&&"Span"===e._tag&&t<10;){let s=l2.get(e);if("function"==typeof s){let t=s(),i=t.match(l1),r=i?i[1]:t.replace(/^at /,"");n.push(`    at ${e.name} (${r})`)}else n.push(`    at ${e.name}`);e=nk(e.parent),t++}}return n.join("\n")},l5=Symbol.for("effect/SpanAnnotation"),l4=e=>lQ(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new lZ(t)],failCase:(e,t)=>[new lZ(t)],interruptCase:()=>[],parallelCase:(e,t,s)=>[...t,...s],sequentialCase:(e,t,s)=>[...t,...s]}),l6="Pending",l8="Done",l7=Symbol.for("effect/Deferred"),l9={_E:e=>e,_A:e=>e},ce=e=>({_tag:l6,joiners:e}),ct=e=>({_tag:l8,effect:e}),cs=Symbol.for("effect/Tracer"),cn=ti("effect/Tracer"),ci=ti("effect/ParentSpan"),cr=function(){let e="abcdef0123456789",t=e.length;return function(s){let n="";for(let i=0;i<s;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class ca{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,s,n,i,r){this.name=e,this.parent=t,this.context=s,this.links=n,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:cr(32),this.spanId=cr(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,s){this.events.push([e,t,s??{}])}}let co=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let s=Error();Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(!1!==n)return n;if(void 0!==s.stack){let e=s.stack.split("\n");if(void 0!==e[3])return n=e[3].trim()}}}},cl=Symbol.for("effect/EffectError"),cc=e=>L(e,cl),cu=e=>({[cl]:cl,_tag:"EffectError",cause:e}),cp=(e,t)=>{let s=new cf("Blocked");return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s},cm=e=>{let t=new cf("RunBlocked");return t.effect_instruction_i0=e,t},ch=Symbol.for("effect/Effect");class cd{patch;op;_op=eC;constructor(e,t){this.patch=e,this.op=t}}class cf{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[ch]=eP;constructor(e){this._op=e}[em](e){return this===e}[ee](){return ep(this,es(this))}pipe(){return eS(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:ex(this.effect_instruction_i0),effect_instruction_i1:ex(this.effect_instruction_i1),effect_instruction_i2:ex(this.effect_instruction_i2)}}toString(){return ey(this.toJSON())}[eb](){return this.toJSON()}[Symbol.iterator](){return new tv(new W(this))}}class cg{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[ch]=eP;constructor(e){this._op=e,this._tag=e}[em](e){return pc(e)&&"Failure"===e._op&&eh(this.effect_instruction_i0,e.effect_instruction_i0)}[ee](){return x(eo(this._tag),en(et(this.effect_instruction_i0)),ep(this))}get cause(){return this.effect_instruction_i0}pipe(){return eS(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return ey(this.toJSON())}[eb](){return this.toJSON()}[Symbol.iterator](){return new tv(new W(this))}}class cb{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[ch]=eP;constructor(e){this._op=e,this._tag=e}[em](e){return pc(e)&&"Success"===e._op&&eh(this.effect_instruction_i0,e.effect_instruction_i0)}[ee](){return x(eo(this._tag),en(et(this.effect_instruction_i0)),ep(this))}get value(){return this.effect_instruction_i0}pipe(){return eS(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:ex(this.value)}}toString(){return ey(this.toJSON())}[eb](){return this.toJSON()}[Symbol.iterator](){return new tv(new W(this))}}let cx=e=>L(e,ch),cy=e=>{let t=new cf(eM);return t.effect_instruction_i0=e,t},cv=m(3,(e,t,s)=>ua(n=>cB(e,e=>cB(cC(ue(()=>n(t(e)))),t=>ue(()=>s(e,t)).pipe(cG({onFailure:e=>{switch(t._tag){case eO:return c$(lk(t.effect_instruction_i0,e));case eR:return c$(e)}},onSuccess:()=>t})))))),c_=m(2,(e,t)=>cB(e,()=>c9(t))),cS=e=>c_(e,void 0),cw=function(){let e=new cf(ek);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(K("you're not supposed to end up here"))}return e},ck=(e,t=aS)=>{let s;let n=new cf(ew);return n.effect_instruction_i0=t=>{s=e(t)},n.effect_instruction_i1=t,void 0!==s?c5(n,e=>s):n},cO=(e,t=aS)=>cw(e,function(){let e,s,n,i;function r(t){e?e(t):void 0===s&&(s=t)}let a=new cf(ew);return a.effect_instruction_i0=t=>{e=t,s&&t(s)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,n=X(()=>this.effect_instruction_i0(r,i.signal))):n=X(()=>this.effect_instruction_i0(r)),n||i?c5(a,e=>(i&&i.abort(),n??uo)):a}),cI=m(2,(e,t)=>{let s=new cf(eI);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),cE=m(2,(e,t)=>cH(e,{onFailure:t,onSuccess:c9})),cT=m(3,(e,t,s)=>cI(e,e=>{let n=lC(e);switch(n._tag){case"Left":return t(n.left)?s(n.left):c$(e);case"Right":return c$(n.right)}})),cR=Symbol.for("effect/SpanAnnotation"),cN=Symbol.for("effect/OriginalAnnotation"),cF=(e,t)=>eQ(t)?new Proxy(e,{has:(e,t)=>t===cR||t===cN||t in e,get:(s,n)=>n===cR?t.value:n===cN?e:s[n]}):e,cA=e=>!C(e)||cR in e?c$(lS(e)):cy(t=>c$(lS(cF(e,pq(t))))),cM=e=>cD(()=>lS(new ps(e))),cj=e=>cH(e,{onFailure:e=>c9(tf(e)),onSuccess:e=>c9(tg(e))}),cC=e=>cV(e,{onFailure:pb,onSuccess:pw}),cL=e=>!C(e)||cR in e?c$(l_(e)):cy(t=>c$(l_(cF(e,pq(t))))),cU=e=>cB(ut(e),cL),c$=e=>{let t=new cg(eO);return t.effect_instruction_i0=e,t},cD=e=>cB(ut(e),c$),cP=cy(e=>c9(e.id())),cz=e=>cy(t=>e(t.id())),cB=m(2,(e,t)=>{let s=new cf(eE);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),cq=m(2,(e,t)=>cB(e,e=>{let s="function"==typeof t?t(e):t;return cx(s)?s:q(s)?cO(e=>{s.then(t=>e(c9(t)),t=>e(cL(new pl(t))))}):c9(s)})),cK=e=>{let t=new cf("OnStep");return t.effect_instruction_i0=e,t},cJ=e=>cB(e,h),cV=m(2,(e,t)=>cG(e,{onFailure:e=>c9(t.onFailure(e)),onSuccess:e=>c9(t.onSuccess(e))})),cG=m(2,(e,t)=>{let s=new cf(eT);return s.effect_instruction_i0=e,s.effect_instruction_i1=t.onFailure,s.effect_instruction_i2=t.onSuccess,s}),cH=m(2,(e,t)=>cG(e,{onFailure:e=>{if(lA(e).length>0)return c$(lD(e));let s=lF(e);return s.length>0?t.onFailure(re(s)):c$(e)},onSuccess:t.onSuccess})),cW=m(2,(e,t)=>ue(()=>{let s=nP(e),n=nD(s.length),i=0;return c_(uu({while:()=>i<s.length,body:()=>t(s[i],i),step:e=>{n[i++]=e}}),n)})),cY=m(2,(e,t)=>ue(()=>{let s=nP(e),n=0;return uu({while:()=>n<s.length,body:()=>t(s[n],n),step:()=>{n++}})})),cQ=(e=>"boolean"==typeof e[0]||cx(e[0]),e=>c$(lw(e))),cX=e=>{let t=new cf(eF);return t.effect_instruction_i0=lu(1),t.effect_instruction_i1=()=>e,t},cZ=m(2,(e,t)=>ua(s=>cB(cC(s(e)),e=>pA(t,e)))),c0=m(2,(e,t)=>cB(e,e=>ut(()=>t(e)))),c1=m(2,(e,t)=>cH(e,{onFailure:e=>cU(()=>t.onFailure(e)),onSuccess:e=>ut(()=>t.onSuccess(e))})),c2=m(2,(e,t)=>cG(e,{onFailure:e=>{let s=lC(e);switch(s._tag){case"Left":return cU(()=>t(s.left));case"Right":return c$(s.right)}},onSuccess:c9})),c3=((e,t)=>c3(e,e=>pp(e)?uo:t(e.effect_instruction_i0)),m(2,(e,t)=>ua(s=>cG(s(e),{onFailure:e=>{let s=pb(e);return cG(t(s),{onFailure:t=>pb(lO(e,t)),onSuccess:()=>s})},onSuccess:e=>{let s=pw(e);return uf(t(s),s)}})))),c5=m(2,(e,t)=>c3(e,p_({onFailure:e=>lN(e)?cS(t(lM(e))):uo,onSuccess:()=>uo}))),c4=m(2,(e,t)=>ui(e,t,c9)),c6=e=>c8(e,h),c8=m(2,(e,t)=>cH(e,{onFailure:e=>cA(t(e)),onSuccess:c9})),c7=(e,t)=>nP(e).reduceRight(([e,s],n)=>{let i=t(n);switch(i._tag){case"Left":return[[i.left,...e],s];case"Right":return[e,[i.right,...s]]}},[io(),io()]),c9=((e,t)=>c9(t.runtimeFlags),e=>{let t=new cb(eR);return t.effect_instruction_i0=e,t}),ue=e=>cB(ut(e),h),ut=e=>{let t=new cf(eN);return t.effect_instruction_i0=e,t},us=m(2,(e,t)=>cB(e,e=>{let s="function"==typeof t?t(e):t;return cx(s)?c_(s,e):q(s)?cO(t=>{s.then(s=>t(c9(e)),e=>t(cL(new pl(e))))}):c9(e)})),un=e=>cy(t=>{let s=x(t.getFiberRef(uQ),nv(()=>t.scope()));return e(uM(uQ,eZ(s)))}),ui=m(3,(e,t,s)=>cG(e,{onFailure:e=>lA(e).length>0?c$(nI(lU(e))):t(),onSuccess:s})),ur=e=>{let t=new cf(eF);return t.effect_instruction_i0=lp(1),t.effect_instruction_i1=()=>e,t},ua=e=>cw(e,function(){let e=new cf(eF);return e.effect_instruction_i0=lp(1),e.effect_instruction_i1=e=>lt(e)?X(()=>this.effect_instruction_i0(cX)):X(()=>this.effect_instruction_i0(ur)),e}),uo=c9(void 0),ul=e=>{let t=new cf(eF);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},uc=m(2,(e,t)=>cB(t,t=>t?x(e,c0(eZ)):c9(nx()))),uu=e=>{let t=new cf(eA);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},up=m(2,(e,t)=>{let s=new cf(eF);return s.effect_instruction_i0=t,s.effect_instruction_i1=()=>e,s}),um=e=>{let t=new cf(ej);return void 0!==e?.priority?uV(t,e.priority):t},uh=m(2,(e,t)=>cB(e,e=>c0(t,t=>[e,t]))),ud=m(2,(e,t)=>cB(e,e=>c_(t,e))),uf=m(2,(e,t)=>cB(e,()=>t)),ug=m(3,(e,t,s)=>cB(e,e=>c0(t,t=>s(e,t)))),ub=(()=>{let e=setInterval(()=>{},2147483648-1);return ut(()=>clearInterval(e))},e=>cB(cP,t=>x(e,ux(t)))),ux=m(2,(e,t)=>cB(e.interruptAsFork(t),()=>e.await)),uy={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eS(this,arguments)}},uv={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eS(this,arguments)}},u_={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eS(this,arguments)}},uS={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eS(this,arguments)}},uw=Symbol.for("effect/FiberRef"),uk={_A:e=>e},uO=e=>uT(e,e=>[e,e]),uI=m(2,(e,t)=>cB(uO(e),t)),uE=m(2,(e,t)=>uT(e,()=>[void 0,t])),uT=m(2,(e,t)=>cy(s=>{let[n,i]=t(s.getFiberRef(e));return s.setFiberRef(e,i),c9(n)})),uR=Symbol.for("effect/RequestResolver"),uN={_A:e=>e,_R:e=>e};class uF{runAll;target;[uR]=uN;constructor(e,t){this.runAll=e,this.target=t}[ee](){return ep(this,this.target?et(this.target):es(this))}[em](e){return this.target?uA(e)&&eh(this.target,e.target):this===e}identified(...e){return new uF(this.runAll,iW(e))}pipe(){return eS(this,arguments)}}let uA=e=>L(e,uR),uM=m(3,(e,t,s)=>cv(ud(uO(t),uE(t,s)),()=>e,e=>uE(t,e))),uj=m(3,(e,t,s)=>uI(t,n=>uM(e,t,s(n)))),uC=(e,t)=>uD(e,{differ:oZ(),fork:t?.fork??h,join:t?.join}),uL=e=>{let t=oQ();return uD(e,{differ:t,fork:t.empty})},uU=e=>{let t=oX(oZ());return uD(e,{differ:t,fork:t.empty})},u$=e=>{let t=oY();return uD(e,{differ:t,fork:t.empty})},uD=(e,t)=>({[uw]:uk,initial:e,diff:(e,s)=>t.differ.diff(e,s),combine:(e,s)=>t.differ.combine(e,s),patch:e=>s=>t.differ.patch(e,s),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eS(this,arguments)}}),uP=S(Symbol.for("effect/FiberRef/currentContext"),()=>u$(ta())),uz=S(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>uC(0)),uB=S(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>uC(2048)),uq=S(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>uC(rw())),uK=S(Symbol.for("effect/FiberRef/currentLogLevel"),()=>uC(uv)),uJ=S(Symbol.for("effect/FiberRef/currentLogSpan"),()=>uC(aP())),uV=m(2,(e,t)=>uM(e,uz,t)),uG=S(Symbol.for("effect/FiberRef/currentConcurrency"),()=>uC("unbounded")),uH=S(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>uC(!0)),uW=S(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>uC(eZ(u_))),uY=S(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>uU(io())),uQ=S(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>uC(nx(),{fork:()=>nx(),join:(e,t)=>e})),uX=S(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>uC(lv,{fork:()=>lv,join:(e,t)=>e})),uZ=S(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>uC(!0)),u0=S(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>uC(!0)),u1=S(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>uC(rw())),u2=S(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>uC(iV())),u3=Symbol.for("effect/Scope"),u5=Symbol.for("effect/CloseableScope"),u4=(e,t)=>e.addFinalizer(()=>cS(t)),u6=(e,t)=>e.addFinalizer(t),u8=(e,t)=>e.close(t),u7=(e,t)=>e.fork(t),u9=function(){class e extends globalThis.Error{commit(){return cL(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eb](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,eq),e}(),pe=(e,t)=>{class s extends u9{_tag=t}return Object.assign(s.prototype,e),s.prototype.name=t,s},pt=Symbol.for("effect/Cause/errors/RuntimeException"),ps=pe({[pt]:pt},"RuntimeException"),pn=Symbol.for("effect/Cause/errors/InterruptedException"),pi=e=>L(e,pn),pr=Symbol.for("effect/Cause/errors/NoSuchElement"),pa=pe({[pr]:pr},"NoSuchElementException"),po=Symbol.for("effect/Cause/errors/UnknownException"),pl=function(){class e extends u9{error;_tag="UnknownException";constructor(e,t){super(t??(L(e,"message")&&k(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[po]:po,name:"UnknownException"}),e}(),pc=e=>cx(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),pu=e=>"Failure"===e._tag,pp=e=>"Success"===e._tag,pm=m(2,(e,t)=>{switch(e._tag){case eO:return pb(e.effect_instruction_i0);case eR:return pw(t)}}),ph=e=>pm(e,void 0),pd=(e,t)=>pI(e,t?.parallel?lk:lO),pf=e=>pb(lS(e)),pg=e=>pb(l_(e)),pb=e=>{let t=new cg(eO);return t.effect_instruction_i0=e,t},px=((e,t)=>{switch(e._tag){case eO:return pb(e.effect_instruction_i0);case eR:return t(e.effect_instruction_i0)}},m(2,(e,t)=>{switch(e._tag){case eO:return c9(pb(e.effect_instruction_i0));case eR:return cC(t(e.effect_instruction_i0))}})),py=e=>pb(lw(e)),pv=m(2,(e,t)=>{switch(e._tag){case eO:return pb(e.effect_instruction_i0);case eR:return pw(t(e.effect_instruction_i0))}}),p_=m(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eO:return t(e.effect_instruction_i0);case eR:return s(e.effect_instruction_i0)}}),pS=m(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eO:return t(e.effect_instruction_i0);case eR:return s(e.effect_instruction_i0)}}),pw=e=>{let t=new cb(eR);return t.effect_instruction_i0=e,t},pk=pw(void 0),pO=m(3,(e,t,{onFailure:s,onSuccess:n})=>{switch(e._tag){case eO:switch(t._tag){case eR:return pb(e.effect_instruction_i0);case eO:return pb(s(e.effect_instruction_i0,t.effect_instruction_i0))}case eR:switch(t._tag){case eR:return pw(n(e.effect_instruction_i0,t.effect_instruction_i0));case eO:return pb(t.effect_instruction_i0)}}}),pI=(e,t)=>{let s=iW(e);return i7(s)?x(rt(s),ih(x(re(s),pv(iH)),(e,s)=>x(e,pO(s,{onSuccess:(e,t)=>x(e,i5(t)),onFailure:t}))),pv(iX),pv(e=>iQ(e)),eZ):nx()},pE=e=>({[l7]:l9,state:ae(ce([])),blockingOn:e,pipe(){return eS(this,arguments)}}),pT=()=>cB(cP,e=>pR(e)),pR=e=>ut(()=>pE(e)),pN=e=>cO(t=>{let s=as(e.state);switch(s._tag){case l8:return t(s.effect);case l6:return s.joiners.push(t),pL(e,t)}},e.blockingOn),pF=m(2,(e,t)=>ut(()=>{let s=as(e.state);switch(s._tag){case l8:return!1;case l6:an(e.state,ct(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t);return!0}})),pA=m(2,(e,t)=>pF(e,t)),pM=m(2,(e,t)=>pF(e,c$(t))),pj=m(2,(e,t)=>pF(e,c9(t))),pC=(e,t)=>{let s=as(e.state);if(s._tag===l6){an(e.state,ct(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t)}},pL=(e,t)=>ut(()=>{let s=as(e.state);if(s._tag===l6){let e=s.joiners.indexOf(t);e>=0&&s.joiners.splice(e,1)}}),pU=uO(uP),p$=()=>pU,pD=e=>cB(p$(),e),pP=m(2,(e,t)=>uM(uP,t)(e)),pz=m(2,(e,t)=>uj(uP,e=>tn(e,t))(e)),pB=m(2,(e,t)=>pD(s=>pP(e,t(s)))),pq=e=>{let t=e.getFiberRef(uP).unsafeMap.get(ci.key);return void 0!==t&&"Span"===t._tag?eZ(t):nx()},pK={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:nx(),context:ta(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:pk},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},pJ=e=>{let t=Object.create(pK);return t.name=e,t},pV=class extends u9{constructor(e){super(),e&&Object.assign(this,e)}},pG=e=>{class t extends pV{_tag=e}return t.prototype.name=e,t},pH=Symbol.for("effect/Duration"),pW=BigInt(0),pY=BigInt(24),pQ=BigInt(60),pX=BigInt(1e3),pZ=BigInt(1e6),p0=BigInt(1e9),p1=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,p2=e=>{if(p8(e))return e;if(O(e))return ms(e);if(E(e))return me(e);if(Array.isArray(e)){if(2===e.length&&O(e[0])&&O(e[1]))return me(BigInt(e[0])*p0+BigInt(e[1]))}else if(k(e)){p1.lastIndex=0;let t=p1.exec(e);if(t){let[e,s,n]=t,i=Number(s);switch(n){case"nano":case"nanos":return me(BigInt(s));case"micro":case"micros":return mt(BigInt(s));case"milli":case"millis":return ms(i);case"second":case"seconds":return mn(i);case"minute":case"minutes":return mi(i);case"hour":case"hours":return mr(i);case"day":case"days":return ma(i);case"week":case"weeks":return mo(i)}}}throw Error("Invalid DurationInput")},p3={_tag:"Millis",millis:0},p5={_tag:"Infinity"},p4={[pH]:pH,[ee](){return ep(this,ec(this.value))},[em](e){return p8(e)&&my(this,e)},toString(){return`Duration(${mv(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:mp(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},p6=e=>{let t=Object.create(p4);return O(e)?isNaN(e)||e<=0?t.value=p3:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=p5:e<=pW?t.value=p3:t.value={_tag:"Nanos",nanos:e},t},p8=e=>L(e,pH),p7=p6(0),p9=p6(1/0),me=e=>p6(e),mt=e=>p6(e*pX),ms=e=>p6(e),mn=e=>p6(1e3*e),mi=e=>p6(6e4*e),mr=e=>p6(36e5*e),ma=e=>p6(864e5*e),mo=e=>p6(6048e5*e),ml=e=>{let t=p2(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},mc=e=>{let t=p2(e);switch(t.value._tag){case"Infinity":return nx();case"Nanos":return eZ(t.value.nanos);case"Millis":return eZ(BigInt(Math.round(1e6*t.value.millis)))}},mu=e=>{let t=p2(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},mp=e=>{let t=p2(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/p0),Number(t.value.nanos%p0)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},mm=m(2,(e,t)=>{let s=p2(e);switch(s.value._tag){case"Nanos":return t.onNanos(s.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(s.value.millis)}}),mh=m(3,(e,t,s)=>{let n=p2(e),i=p2(t);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return s.onMillis(ml(n),ml(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return s.onNanos(e,t)}return s.onMillis(n.value.millis,i.value.millis)}),md=(e,t)=>mh(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),mf=m(2,(e,t)=>mm(e,{onMillis:e=>p6(e*t),onNanos:e=>p6(e*BigInt(t))})),mg=m(2,(e,t)=>mh(e,t,{onMillis:(e,t)=>p6(e+t),onNanos:(e,t)=>p6(e+t)})),mb=((e,t)=>mh(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),m(2,(e,t)=>mh(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),mx=m(2,(e,t)=>mh(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),my=m(2,(e,t)=>md(p2(e),p2(t))),mv=e=>{let t=p2(e),s=[];if("Infinity"===t.value._tag)return"Infinity";let n=mu(t);n%pZ&&s.push(`${n%pZ}ns`);let i=n/pZ;i%pX!==pW&&s.push(`${i%pX}ms`);let r=i/pX;r%pQ!==pW&&s.push(`${r%pQ}s`);let a=r/pQ;a%pQ!==pW&&s.push(`${a%pQ}m`);let o=a/pQ;o%pY!==pW&&s.push(`${o%pY}h`);let l=o/pY;return l!==pW&&s.push(`${l}d`),s.reverse().join(" ")},m_=Symbol.for("effect/Encoding/errors/Decode"),mS=(e,t)=>{let s={_tag:"DecodeException",[m_]:m_,input:e};return k(t)&&(s.message=t),s};function mw(e){if(e>=mO.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=mO[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let mk=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],mO=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],mI=e=>{if("NaN"===e)return eZ(NaN);if("Infinity"===e)return eZ(1/0);if("-Infinity"===e)return eZ(-1/0);if(""===e.trim())return eX;let t=Number(e);return Number.isNaN(t)?eX:eZ(t)},mE=Symbol.for("@effect/schema/ArbitraryHookId"),mT=(e,t,s,n)=>(n.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,s),{minLength:1,maxLength:2})):e.array(e.tuple(t,s))).map(e=>{let t={};for(let[s,n]of e)t[s]=n;return t}),mR=(e,t,s)=>{let n=mU(t.constraints,mL(e));return mN(e.from,n?{...t,constraints:n}:t,s)},mN=(e,t,s)=>{let n=(null)(e);if(Option.isSome(n))switch(e._tag){case"Declaration":return n.value(...e.typeParameters.map(e=>mN(e,t,s)));case"Refinement":return n.value(mR(e,t,s));default:return n.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryMissingAnnotationErrorMessage(s,e));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryUnsupportedErrorMessage(s,e))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let s=t.string({maxLength:5}),n=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(s):i.push(n),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let n=[],i=!1,r=0;for(let a of e.elements)n.push(mN(a.type,t,s.concat(r++))),a.isOptional&&(i=!0);let a=e.rest.map(e=>mN(e.type,t,s));return s=>{let r=s.tuple(...n.map(e=>e(s)));if(i){let t=s.tuple(...e.elements.map(e=>e.isOptional?s.boolean():s.constant(!0)));r=r.chain(e=>t.map(t=>{for(let[s,n]of t.reverse().entries())n||e.splice(t.length-s,1);return e}))}if(Arr.isNonEmptyReadonlyArray(a)){let[e,...n]=a,i=e(s),o=t.constraints;r=r.chain(e=>{let n=s.array(i);return t.isSuspend?n=s.oneof({depthSize:1},s.constant([]),s.array(i,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(n=s.array(i,o.constraints)),n.map(t=>[...e,...t])});for(let e=0;e<n.length;e++)r=r.chain(t=>n[e](s).map(e=>[...t,e]))}return r}}case"TypeLiteral":{let n=e.propertySignatures.map(e=>mN(e.type,t,s.concat(e.name))),i=e.indexSignatures.map(e=>[mN(e.parameter,t,s),mN(e.type,t,s)]);return s=>{let r={},a=[];for(let t=0;t<n.length;t++){let i=e.propertySignatures[t],o=i.name;i.isOptional||a.push(o),r[o]=n[t](s)}let o=s.record(r,{requiredKeys:a});for(let e=0;e<i.length;e++){let n=i[e][0](s),r=i[e][1](s);o=o.chain(e=>mT(s,n,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let n=e.types.map(e=>mN(e,t,s));return e=>e.oneof({depthSize:1},...n.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryEmptyEnumErrorMessage(s));return t=>t.oneof(...e.enums.map(([e,s])=>t.constant(s)));case"Refinement":{let n=mR(e,t,s);return t=>n(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let n=util_.memoizeThunk(()=>mN(e.f(),{...t,isSuspend:!0},s));return e=>e.constant(null).chain(()=>n()(e))}case"Transformation":return mN(e.to,t,s)}};class mF{_tag="NumberConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class mA{_tag="StringConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class mM{_tag="IntegerConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class mj{_tag="ArrayConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class mC{_tag="BigIntConstraints";constraints;constructor(e){this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let mL=e=>{let t=e.annotations[AST.TypeAnnotationId],s=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new mM({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new mF({min:s.exclusiveMinimum??s.minimum,max:s.exclusiveMaximum??s.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new mC(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new mA(s);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new mj({minLength:s.minItems,maxLength:s.maxItems})}},mU=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new mj({minLength:mD(e.constraints.minLength,t.constraints.minLength),maxLength:mP(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new mF({min:mD(e.constraints.min,t.constraints.min),max:mP(e.constraints.max,t.constraints.max),noNaN:m$(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:m$(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new mM({min:mD(e.constraints.min,t.constraints.min),max:mP(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new mC({min:mD(e.constraints.min,t.constraints.min),max:mP(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new mA({minLength:mD(e.constraints.minLength,t.constraints.minLength),maxLength:mP(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new mM({min:mD(e.constraints.min,t.constraints.min),max:mP(e.constraints.max,t.constraints.max)})}}},m$=(e,t)=>void 0===e?t:void 0===t?e:e||t;function mD(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function mP(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let mz=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),mB=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return mB(e,t.from)}},mq=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),mK=e=>{let t,s=!1;return()=>(s||(t=e(),s=!0),t)},mJ=e=>{if(k(e))return JSON.stringify(e);if(O(e)||null==e||I(e)||T(e)||P(e))return String(e);if(E(e))return String(e)+"n";if(!nJ(e)&&L(e,"toString")&&R(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),nJ(e))return`[${e.map(mJ).join(",")}]`;return`{${mq(e).map(t=>`${k(t)?JSON.stringify(t):String(t)}:${mJ(e[t])}`).join(",")}}`}catch(t){return String(e)}},mV=e=>"string"==typeof e?JSON.stringify(e):String(e),mG=e=>Array.isArray(e),mH=e=>!Array.isArray(e),mW=e=>`[${mV(e)}]`,mY=e=>mG(e)?e.map(mW).join(""):mW(e),mQ=(e,t,s,n)=>{let i=e;return s&&nG(s)&&(i+=`
at path: ${mY(s)}`),void 0!==t&&(i+=`
details: ${t}`),n&&(i+=`
schema (${n._tag}): ${n}`),i},mX=(e,t,s)=>mQ("Missing annotation",e,t,s),mZ=(e,t,s)=>mQ("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,s),m0=e=>mQ("Unsupported key schema",void 0,void 0,e),m1=e=>mQ("Unsupported literal",`literal value: ${mJ(e)}`),m2=e=>mQ("Duplicate index signature",`${e} index signature`),m3=mQ("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),m5=mQ("Invalid element","A required element cannot follow an optional element. ts(1257)"),m4=e=>mQ("Duplicate property signature transformation",`Duplicate key ${mJ(e)}`),m6=e=>mQ("Duplicate property signature",`Duplicate key ${mJ(e)}`),m8=Symbol.for("@effect/schema/annotation/Type"),m7=Symbol.for("@effect/schema/annotation/Message"),m9=Symbol.for("@effect/schema/annotation/MissingMessage"),he=Symbol.for("@effect/schema/annotation/Identifier"),ht=Symbol.for("@effect/schema/annotation/Title"),hs=Symbol.for("@effect/schema/annotation/Description"),hn=Symbol.for("@effect/schema/annotation/Examples"),hi=Symbol.for("@effect/schema/annotation/Default"),hr=Symbol.for("@effect/schema/annotation/JSONSchema"),ha=Symbol.for("@effect/schema/annotation/Documentation"),ho=Symbol.for("@effect/schema/annotation/Concurrency"),hl=Symbol.for("@effect/schema/annotation/Batching"),hc=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),hu=Symbol.for("@effect/schema/annotation/ParseOptions"),hp=Symbol.for("@effect/schema/annotation/Surrogate"),hm=Symbol.for("@effect/schema/annotation/StableFilter"),hh=m(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?eZ(e.annotations[t]):nx()),hd=hh(m7),hf=hh(m9),hg=hh(ht),hb=hh(he),hx=hh(hs),hy=hh(ho),hv=hh(hl),h_=hh(hc),hS=hh(hu),hw=hh(hp),hk=hh(hm),hO=Symbol.for("@effect/schema/annotation/JSONIdentifier"),hI=hh(hO);class hE{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,s,n={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=s,this.annotations=n}toString(){return nv(dV(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:d$(this.annotations)}}}let hT=e=>t=>t._tag===e;class hR{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(){return nv(dV(this),()=>mJ(this.literal))}toJSON(){return{_tag:this._tag,literal:E(this.literal)?String(this.literal):this.literal,annotations:d$(this.annotations)}}}let hN=hT("Literal"),hF=new hR(null,{[he]:"null"});class hA{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(){return nv(dV(this),()=>mJ(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:d$(this.annotations)}}}class hM{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hj=new hM({[ht]:"undefined"});class hC{annotations;_tag="VoidKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hL=new hC({[ht]:"void"});class hU{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let h$=new hU({[ht]:"never"});class hD{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hP=new hD({[ht]:"unknown"});class hz{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hB=new hz({[ht]:"any"});class hq{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hK=new hq({[ht]:"string",[hs]:"a string"}),hJ=hT("StringKeyword");class hV{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hG=new hV({[ht]:"number",[hs]:"a number"}),hH=hT("NumberKeyword");class hW{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hY=new hW({[ht]:"boolean",[hs]:"a boolean"});class hQ{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let hX=new hQ({[ht]:"bigint",[hs]:"a bigint"});class hZ{annotations;_tag="SymbolKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let h0=new hZ({[ht]:"symbol",[hs]:"a symbol"}),h1=hT("SymbolKeyword");class h2{annotations;_tag="ObjectKeyword";constructor(e={}){this.annotations=e}toString(){return dJ(this)}toJSON(){return{_tag:this._tag,annotations:d$(this.annotations)}}}let h3=new h2({[he]:"object",[ht]:"object",[hs]:"an object in the TypeScript meaning, i.e. the `object` type"});class h5{type;annotations;constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:d$(this.annotations)}}toString(){return String(this.type)}}class h4 extends h5{isOptional;constructor(e,t,s={}){super(e,s),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:d$(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}let h6=e=>e.map(e=>e.type);class h8{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,s,n={}){this.elements=e,this.rest=t,this.isReadonly=s,this.annotations=n;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error(m5)}toString(){return nv(dV(this),()=>h7(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:d$(this.annotations)}}}let h7=e=>{let t=e.elements.map(String).join(", ");return nz(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(s,n)=>{let i=String(s),r=i.includes(" | ")?`(${i})`:i;if(n.length>0){let s=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${s}]`:`readonly [...${r}[], ${s}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class h9 extends h4{name;isReadonly;constructor(e,t,s,n,i){super(t,s,i),this.name=e,this.isReadonly=n}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:d$(this.annotations)}}}let de=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return de(e.from)}return!1};class dt{type;isReadonly;parameter;constructor(e,t,s){if(this.type=t,this.isReadonly=s,de(e))this.parameter=e;else throw Error(m3)}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class ds{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,s={}){this.annotations=s;let n={};for(let t=0;t<e.length;t++){let s=e[t].name;if(Object.prototype.hasOwnProperty.call(n,s))throw Error(m6(s));n[s]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let s=dK(t[e].parameter);if(hJ(s)){if(i.string)throw Error(m2("string"));i.string=!0}else if(h1(s)){if(i.symbol)throw Error(m2("symbol"));i.symbol=!0}}this.propertySignatures=dP(e),this.indexSignatures=dz(t)}toString(){return nv(dV(this),()=>dn(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:d$(this.annotations)}}}let dn=e=>{let t=e.propertySignatures.map(e=>(e.isReadonly?"readonly ":"")+String(e.name)+(e.isOptional?"?":"")+": "+e.type).join("; ");if(e.indexSignatures.length>0){let s=e.indexSignatures.map(e=>(e.isReadonly?"readonly ":"")+`[x: ${dK(e.parameter)}]: ${e.type}`).join("; ");return e.propertySignatures.length>0?`{ ${t}; ${s} }`:`{ ${s} }`}return e.propertySignatures.length>0?`{ ${t} }`:"{}"},di=hT("TypeLiteral"),dr=e=>e.filter(e=>e!==h$),da=n8(nL(nC,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),dl={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},dc=e=>iu(e,e=>dd(e)?dc(e.types):[e]),du=e=>{let t=da(e),s=[],n={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[hB];case"UnknownKeyword":return[hP];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,s.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[dl[t]]||i.includes(e.literal)||(i.push(e.literal),s.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),s.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),s.push(e));break;case"TupleType":n.ObjectKeyword||s.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,s.push(e)):n.ObjectKeyword||s.push(e);break;default:s.push(e)}return s};class dp{types;annotations;static make=(e,t)=>{let s=[],n=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===h$||n.has(i)||(n.add(i),s.push(i))}return dp.union(s,t)};static members=(e,t)=>dp.union(dr(e),t);static unify=(e,t)=>dp.union(du(dc(e)),t);static union=(e,t)=>dh(e)?new dp(e,t):1===e.length?e[0]:h$;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(){return nv(dV(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:d$(this.annotations)}}}let dm=(e,t)=>e.map(t),dh=e=>e.length>1,dd=hT("Union"),df=S(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class dg{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=mK(e)}toString(){return dV(this).pipe(n_(()=>nT(nO(this.f)(),e=>dV(e))),nv(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=df.get(e);return t||(df.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:d$(this.annotations)},df.set(e,t)),t}}class db{from;filter;annotations;_tag="Refinement";constructor(e,t,s={}){this.from=e,this.filter=t,this.annotations=s}toString(){return nv(dV(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:d$(this.annotations)}}}let dx=hT("Refinement"),dy={};class dv{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,s,n={}){this.from=e,this.to=t,this.transformation=s,this.annotations=n}toString(){return nv(dV(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:d$(this.annotations)}}}let d_=hT("Transformation");class dS{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}class dw{_tag="ComposeTransformation"}class dk{from;to;decode;encode;constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}}class dO{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;let t={},s={};for(let n of e){let e=n.from;if(t[e])throw Error(m4(e));t[e]=!0;let i=n.to;if(s[i])throw Error(m4(i));s[i]=!0}}}let dI=(i="TypeLiteralTransformation",e=>e._tag===i),dE=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e);return s.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),s)},dT=e=>{let t=`^${mz(e.head)}`;for(let s of e.spans)hJ(s.type)?t+=".*":hH(s.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=mz(s.literal);return new RegExp(t+="$")},dR=e=>{switch(e._tag){case"TupleType":{let t=!1,s=[];for(let n of e.elements)n.isOptional&&(t=!0),s.push(n.type);return t&&s.push(hj),s=s.concat(h6(e.rest)),dp.make(s)}case"Refinement":return dR(e.from);case"Union":return dp.make(e.types.map(dR));case"Suspend":return dR(e.f())}throw Error(errors_.getASTUnsupportedSchema(e))},dN=(e,t)=>{let s=[],n=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new dt(e,t,!0));break;case"Literal":if(k(e.literal)||O(e.literal))s.push(new h9(e.literal,t,!1,!0));else throw Error(m1(e.literal));break;case"Enums":for(let[n,i]of e.enums)s.push(new h9(i,t,!1,!0));break;case"UniqueSymbol":s.push(new h9(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(m0(e))}};return i(e),{propertySignatures:s,indexSignatures:n}},dF=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new h8(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=dC(e.propertySignatures,e=>!1===e.isReadonly?e:new h9(e.name,e.type,e.isOptional,!1,e.annotations)),s=dC(e.indexSignatures,e=>!1===e.isReadonly?e:new dt(e.parameter,e.type,!1));return t===e.propertySignatures&&s===e.indexSignatures?e:new ds(t,s,e.annotations)}case"Union":{let t=dC(e.types,dF);return t===e.types?e:dp.make(t,e.annotations)}case"Suspend":return new dg(()=>dF(e.f()),e.annotations);case"Refinement":{let t=dF(e.from);return t===e.from?e:new db(t,e.filter,e.annotations)}case"Transformation":{let t=dF(e.from),s=dF(e.to);return t===e.from&&s===e.to?e:new dv(t,s,e.transformation,e.annotations)}}return e},dA=e=>{switch(e._tag){case"Declaration":{let t=dC(e.typeParameters,dA);return t===e.typeParameters?e:new hE(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=dC(e.elements,e=>{let t=dA(e.type);return t===e.type?e:new h4(t,e.isOptional)}),s=h6(e.rest),n=dC(s,dA);return t===e.elements&&n===s?e:new h8(t,n.map(e=>new h5(e)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=dC(e.propertySignatures,e=>{let t=dA(e.type);return t===e.type?e:new h9(e.name,t,e.isOptional,e.isReadonly)}),s=dC(e.indexSignatures,e=>{let t=dA(e.type);return t===e.type?e:new dt(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new ds(t,s,e.annotations)}case"Union":{let t=dC(e.types,dA);return t===e.types?e:dp.make(t,e.annotations)}case"Suspend":return new dg(()=>dA(e.f()),e.annotations);case"Refinement":{let t=dA(e.from);return t===e.from?e:new db(t,e.filter,e.annotations)}case"Transformation":return dA(e.to)}return e},dM=e=>n_(hI(e),()=>hb(e)),dj=e=>ny(dM(e),{onNone:()=>void 0,onSome:e=>({[hO]:e})});function dC(e,t){let s=!1,n=nD(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(s=!0),n[i]=a}return s?n:e}let dL=(e,t)=>{switch(e._tag){case"Declaration":{let s=dC(e.typeParameters,e=>dL(e,t));return s===e.typeParameters?e:new hE(s,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let s=dC(e.elements,e=>{let s=dL(e.type,t);return s===e.type?e:new h4(s,e.isOptional)}),n=h6(e.rest),i=dC(n,e=>dL(e,t));return s===e.elements&&i===n?e:new h8(s,i.map(e=>new h5(e)),e.isReadonly,dj(e))}case"TypeLiteral":{let s=dC(e.propertySignatures,e=>{let s=dL(e.type,t);return s===e.type?e:new h9(e.name,s,e.isOptional,e.isReadonly)}),n=dC(e.indexSignatures,e=>{let s=dL(e.type,t);return s===e.type?e:new dt(e.parameter,s,e.isReadonly)});return s===e.propertySignatures&&n===e.indexSignatures?e:new ds(s,n,dj(e))}case"Union":{let s=dC(e.types,e=>dL(e,t));return s===e.types?e:dp.make(s,dj(e))}case"Suspend":return new dg(()=>dL(e.f(),t),dj(e));case"Refinement":{let s=dL(e.from,t);if(t){if(s===e.from)return e;if(!d_(e.from)){let t=hk(e);if(eQ(t)&&!0===t.value)return new db(s,e.filter)}}return s}case"Transformation":return dL(e.from,t)}return e},dU=e=>dL(e,!1),d$=e=>{let t={};for(let s of Object.getOwnPropertySymbols(e))t[String(s)]=e[s];return t},dD=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},dP=n8(nL(nC,e=>dD(e.type))),dz=n8(nL(nC,e=>{switch(dK(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),dB=e=>e.reduce(null,null),dq=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,s=e.indexSignatures.length;return t+s===0?[-4,0,0]:[4,t,s]}case"Declaration":{let t=hw(e);if(Option.isSome(t)){let[e,s,n]=dq(t.value);return[6,s,n]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return dB(e.types.map(dq));case"Refinement":{let[t,s,n]=dq(e.from);return[t+1,s,n]}case"Transformation":return dq(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},dK=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return dK(e.from)}},dJ=e=>nv(dV(e),()=>e._tag),dV=e=>hb(e).pipe(n_(()=>hg(e)),n_(()=>hx(e))),dG=Symbol.for("@effect/schema/EquivalenceHookId"),dH=Symbol.for("@effect/schema/TypeId/GreaterThan"),dW=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),dY=Symbol.for("@effect/schema/TypeId/LessThan"),dQ=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),dX=Symbol.for("@effect/schema/TypeId/Int"),dZ=Symbol.for("@effect/schema/TypeId/MinLength"),d0=Symbol.for("@effect/schema/TypeId/Length"),d1=Symbol.for("effect/Clock"),d2=ti("effect/Clock"),d3=2147483648-1,d5={unsafeSchedule(e,t){let s=ml(t);if(s>d3)return g;let n=!1,i=setTimeout(()=>{n=!0,e()},s);return()=>(clearTimeout(i),!n)}},d4=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),d6=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return d4;let t=d4()-e.bigint();return()=>t+e.bigint()}();class d8{[d1]=d1;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return d6()}currentTimeMillis=ut(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=ut(()=>this.unsafeCurrentTimeNanos());scheduler(){return c9(d5)}sleep(e){return cO(t=>cS(ut(d5.unsafeSchedule(()=>t(uo),e))))}}let d7="InvalidData",d9="MissingData",fe="SourceUnavailable",ft="Unsupported",fs=Symbol.for("effect/ConfigError"),fn={_tag:"ConfigError",[fs]:fs},fi=(e,t)=>{let s=Object.create(fn);return s._op="And",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),s},fr=(e,t)=>{let s=Object.create(fn);return s._op="Or",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),s},fa=(e,t,s={pathDelim:"."})=>{let n=Object.create(fn);return n._op=d7,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=x(this.path,ix(s.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},fo=(e,t,s={pathDelim:"."})=>{let n=Object.create(fn);return n._op=d9,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=x(this.path,ix(s.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},fl=(e,t,s,n={pathDelim:"."})=>{let i=Object.create(fn);return i._op=fe,i.path=e,i.message=t,i.cause=s,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=x(this.path,ix(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},fc=(e,t,s={pathDelim:"."})=>{let n=Object.create(fn);return n._op=ft,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=x(this.path,ix(s.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},fu=m(2,(e,t)=>{switch(e._op){case"And":return fi(fu(e.left,t),fu(e.right,t));case"Or":return fr(fu(e.left,t),fu(e.right,t));case d7:return fa([...t,...e.path],e.message);case d9:return fo([...t,...e.path],e.message);case fe:return fl([...t,...e.path],e.message,e.cause);case ft:return fc([...t,...e.path],e.message)}}),fp={_tag:"Empty"},fm=m(2,(e,t)=>{let s=az(t),n=e;for(;a$(s);){let e=s.head;switch(e._tag){case"Empty":s=s.tail;break;case"AndThen":s=aD(e.first,aD(e.second,s.tail));break;case"MapName":n=ic(n,e.f),s=s.tail;break;case"Nested":n=nB(n,e.name),s=s.tail;break;case"Unnested":if(!x(nX(n),nA(e.name)))return tf(fo(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=n2(n),s=s.tail}}return tg(n)}),fh=(e,t)=>[...e,...t],fd=Symbol.for("effect/ConfigProvider"),ff=ti("effect/ConfigProvider"),fg=Symbol.for("effect/ConfigProviderFlat"),fb=e=>({[fd]:fd,pipe(){return eS(this,arguments)},...e}),fx=e=>({[fg]:fg,patch:e.patch,load:(t,s,n=!0)=>e.load(t,s,n),enumerateChildren:e.enumerateChildren}),fy=e=>fb({load:t=>cB(fS(e,io(),t,!1),e=>ny(nX(e),{onNone:()=>cL(fo(io(),`Expected a single value having structure: ${t}`)),onSome:c9})),flattened:e}),fv=(e,t,s,n)=>{let i=id(s.length,t=>t>=n.length?nx():eZ([e(t),t+1])),r=id(n.length,e=>e>=s.length?nx():eZ([t(e),e+1]));return[fh(s,i),fh(n,r)]},f_=(e,t)=>{let s=t;if("Nested"===s._tag){let t=e.slice();for(;"Nested"===s._tag;)t.push(s.name),s=s.config;return t}return e},fS=(e,t,s,n)=>{switch(s._tag){case"Constant":return c9(il(s.value));case"Described":return ue(()=>fS(e,t,s.config,n));case"Fail":return cL(fo(t,s.message));case"Fallback":return x(ue(()=>fS(e,t,s.first,n)),cE(i=>s.condition(i)?x(fS(e,t,s.second,n),cE(e=>cL(fr(i,e)))):cL(i)));case"Lazy":return ue(()=>fS(e,t,s.config(),n));case"MapOrFail":return ue(()=>x(fS(e,t,s.original,n),cB(cW(e=>x(s.mapOrFail(e),c2(fu(f_(t,s.original))))))));case"Nested":return ue(()=>fS(e,fh(t,il(s.name)),s.config,n));case"Primitive":return x(fm(t,e.patch),cB(t=>x(e.load(t,s,n),cB(e=>{if(0===e.length){let e=x(n0(t),nv(()=>"<n/a>"));return cL(fo([],`Expected ${s.description} with name ${e}`))}return c9(e)}))));case"Sequence":return x(fm(t,e.patch),cB(n=>x(e.enumerateChildren(n),cB(fE),cB(i=>0===i.length?ue(()=>c0(fS(e,n,s.config,!0),il)):x(cW(i,n=>fS(e,nq(t,`[${n}]`),s.config,!0)),c0(e=>{let t=ip(e);return 0===t.length?il(io()):il(t)}))))));case"HashMap":return ue(()=>x(fm(t,e.patch),cB(t=>x(e.enumerateChildren(t),cB(i=>x(i,cW(i=>fS(e,fh(t,il(i)),s.valueConfig,n)),c0(e=>0===e.length?il(rw()):x(fI(e),ic(e=>aE(n7(nP(i),e)))))))))));case"ZipWith":return ue(()=>x(fS(e,t,s.left,n),cj,cB(i=>x(fS(e,t,s.right,n),cj,cB(e=>{if(th(i)&&th(e))return cL(fi(i.left,e.left));if(th(i)&&td(e))return cL(i.left);if(td(i)&&th(e))return cL(e.left);if(td(i)&&td(e)){let n=x(t,ix(".")),r=fw(t,n),[a,o]=fv(r,r,x(i.right,ic(tg)),x(e.right,ic(tg)));return x(a,n7(o),cW(([e,t])=>x(uh(e,t),c0(([e,t])=>s.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},fw=(e,t)=>s=>tf(fo(e,`The element at index ${s} in a sequence at path "${t}" was missing`)),fk=(e,t)=>e.split(RegExp(`\\s*${mz(t)}\\s*`)),fO=(e,t,s,n,i)=>i?x(fk(e,n),cW(e=>s.parse(e.trim())),c2(fu(t))):x(s.parse(e),c1({onFailure:fu(t),onSuccess:il})),fI=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),fE=e=>x(cW(e,fR),c1({onFailure:()=>io(),onSuccess:n8(nC)}),cj,c0(tx)),fT=/^(\[(\d+)\])$/,fR=e=>{let t=e.match(fT);if(null!==t){let e=t[2];return x(void 0!==e&&e.length>0?eZ(e):nx(),nT(fN))}return nx()},fN=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?nx():eZ(t)},fF=Symbol.for("effect/Console"),fA=ti("effect/Console"),fM={[fF]:fF,assert:(e,...t)=>ut(()=>{console.assert(e,...t)}),clear:ut(()=>{console.clear()}),count:e=>ut(()=>{console.count(e)}),countReset:e=>ut(()=>{console.countReset(e)}),debug:(...e)=>ut(()=>{console.debug(...e)}),dir:(e,t)=>ut(()=>{console.dir(e,t)}),dirxml:(...e)=>ut(()=>{console.dirxml(...e)}),error:(...e)=>ut(()=>{console.error(...e)}),group:e=>e?.collapsed?ut(()=>console.groupCollapsed(e?.label)):ut(()=>console.group(e?.label)),groupEnd:ut(()=>{console.groupEnd()}),info:(...e)=>ut(()=>{console.info(...e)}),log:(...e)=>ut(()=>{console.log(...e)}),table:(e,t)=>ut(()=>{console.table(e,t)}),time:e=>ut(()=>console.time(e)),timeEnd:e=>ut(()=>console.timeEnd(e)),timeLog:(e,...t)=>ut(()=>{console.timeLog(e,...t)}),trace:(...e)=>ut(()=>{console.trace(...e)}),warn:(...e)=>ut(()=>{console.warn(...e)}),unsafe:console},fj=Symbol.for("effect/Random"),fC=ti("effect/Random");class fL{seed;[fj]=fj;PRNG;constructor(e){this.seed=e,this.PRNG=new V(e)}get next(){return ut(()=>this.PRNG.number())}get nextBoolean(){return c0(this.next,e=>e>.5)}get nextInt(){return ut(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return c0(this.next,s=>(t-e)*s+e)}nextIntBetween(e,t){return ut(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return fU(e,e=>this.nextIntBetween(0,e))}}let fU=(e,t)=>ue(()=>x(ut(()=>Array.from(e)),cB(e=>{let s=[];for(let t=e.length;t>=2;t-=1)s.push(t);return x(s,cY(s=>x(t(s),c0(t=>f$(e,s-1,t)))),c_(iW(e)))}))),f$=(e,t,s)=>{let n=e[t];return e[t]=e[s],e[s]=n,e},fD=x(ta(),te(d2,new d8),te(fA,fM),te(fC,new fL(4294967296*Math.random()>>>0)),te(ff,(e=>{let{pathDelim:t,seqDelim:s}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=e=>x(e,ix(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return fy(fx({load:(e,t,i=!0)=>{let a=n(e),o=r();return x(a in o?eZ(o[a]):nx(),c2(()=>fo(e,`Expected ${a} to exist in the process context`)),cB(n=>fO(n,e,t,s,i)))},enumerateChildren:e=>ut(()=>r4(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let s=0;s<e.length;s++){let n=x(e,nQ(s)),i=t[s];if(void 0===i||n!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:fp}))})()),te(cn,{[cs]:cs,span:(e,t,s,n,i,r)=>new ca(e,t,s,n,i,r),context:e=>e()})),fP=S(Symbol.for("effect/DefaultServices/currentServices"),()=>u$(fD)),fz=e=>uI(fP,t=>e(tt(t,d2))),fB=fz(e=>e.currentTimeMillis);r=e=>e.next,uI(fP,e=>r(tt(e,fC)));let fq=e=>cB(cP,t=>pF(e,cQ(t))),fK="Sequential",fJ="Parallel",fV={_tag:fK},fG=e=>e._tag===fK,fH=e=>e._tag===fJ,fW={_tag:fJ},fY=e=>({_tag:"ParallelN",parallelism:e}),fQ=Symbol.for("effect/FiberRefs");class fX{locals;[fQ]=fQ;constructor(e){this.locals=e}pipe(){return eS(this,arguments)}}let fZ=(e,t,s,n=!1)=>{let i,r=t,a=s,o=n;for(;void 0===i;)if(nG(r)&&nG(a)){let e=nZ(r)[0],t=n2(r),s=nZ(a)[0],n=nZ(a)[1],l=n2(a);e.startTimeMillis<s.startTimeMillis?(a=l,o=!0):e.startTimeMillis>s.startTimeMillis?r=t:e.id<s.id?(a=l,o=!0):e.id>s.id?r=t:i=[n,o]}else i=[e.initial,!0];return i},f0=m(3,(e,t,s)=>{let n=new Map(e.locals);return s.locals.forEach((e,s)=>{let i=e[0][1];if(!e[0][0][em](t)){if(!n.has(s)){if(eh(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let r=n.get(s),[a,o]=fZ(s,r,e);if(o){let e=s.diff(a,i),o=r[0][1],l=s.join(o,s.patch(e)(o));if(!eh(o,l)){let e;let i=r[0][0];e=i[em](t)?[[i,l],...r.slice(1)]:[[t,l],...r],n.set(s,e)}}}}),new fX(n)}),f1=m(2,(e,t)=>{let s=new Map;return f2(e,s,t),new fX(s)}),f2=(e,t,s)=>{e.locals.forEach((e,n)=>{let i=e[0][1],r=n.patch(n.fork)(i);eh(i,r)?t.set(n,e):t.set(n,[[s,r],...e])})},f3=m(2,(e,t)=>{let s=new Map(e.locals);return s.delete(t),new fX(s)}),f5=m(2,(e,t)=>e.locals.has(t)?eZ(nZ(e.locals.get(t))[1]):nx()),f4=m(2,(e,t)=>x(f5(e,t),nv(()=>t.initial))),f6=m(2,(e,{fiberId:t,fiberRef:s,value:n})=>{if(0===e.locals.size)return new fX(new Map([[s,[[t,n]]]]));let i=new Map(e.locals);return f8(i,t,s,n),new fX(i)}),f8=(e,t,s,n)=>{let i;let r=e.get(s)??[];if(nG(r)){let[e,s]=nZ(r);if(e[em](t)){if(eh(s,n))return;i=[[t,n],...r.slice(1)]}else i=[[t,n],...r]}else i=[[t,n]];e.set(s,i)},f7=m(2,(e,{entries:t,forkAs:s})=>{if(0===e.locals.size)return new fX(new Map(t));let n=new Map(e.locals);return void 0!==s&&f2(e,n,s),t.forEach(([e,t])=>{1===t.length?f8(n,t[0][0],e,t[0][1]):t.forEach(([t,s])=>{f8(n,t,e,s)})}),new fX(n)}),f9="Empty",ge="Remove",gt="Update",gs="AndThen",gn={_tag:f9},gi=(e,t)=>{let s=new Map(e.locals),n=gn;for(let[e,i]of t.locals.entries()){let t=nZ(i)[1],r=s.get(e);if(void 0!==r){let s=nZ(r)[1];eh(s,t)||(n=gr({_tag:gt,fiberRef:e,patch:e.diff(s,t)})(n))}else n=gr({_tag:"Add",fiberRef:e,value:t})(n);s.delete(e)}for(let[e]of s.entries())n=gr({_tag:ge,fiberRef:e})(n);return n},gr=m(2,(e,t)=>({_tag:gs,first:e,second:t})),ga=m(3,(e,t,s)=>{let n=s,i=il(e);for(;nG(i);){let e=nZ(i),s=n2(i);switch(e._tag){case f9:i=s;break;case"Add":n=f6(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=s;break;case ge:n=f3(n,e.fiberRef),i=s;break;case gt:{let r=f4(n,e.fiberRef);n=f6(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=s;break}case gs:i=nB(e.first)(nB(e.second)(s))}}return n}),go="effect/FiberStatus",gl=Symbol.for(go),gc="Done",gu="Running",gp="Suspended",gm=eo(`${go}-${gc}`);class gh{[gl]=gl;_tag=gc;[ee](){return gm}[em](e){return gb(e)&&e._tag===gc}}class gd{runtimeFlags;[gl]=gl;_tag=gu;constructor(e){this.runtimeFlags=e}[ee](){return x(et(go),en(et(this._tag)),en(et(this.runtimeFlags)),ep(this))}[em](e){return gb(e)&&e._tag===gu&&this.runtimeFlags===e.runtimeFlags}}class gf{runtimeFlags;blockingOn;[gl]=gl;_tag=gp;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[ee](){return x(et(go),en(et(this._tag)),en(et(this.runtimeFlags)),en(et(this.blockingOn)),ep(this))}[em](e){return gb(e)&&e._tag===gp&&this.runtimeFlags===e.runtimeFlags&&eh(this.blockingOn,e.blockingOn)}}let gg=new gh,gb=e=>L(e,gl),gx=e=>new gd(e),gy=(e,t)=>new gf(e,t),gv=e=>e._tag===gc,g_={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eS(this,arguments)}},gS={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eS(this,arguments)}},gw={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eS(this,arguments)}},gk={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eS(this,arguments)}},gO=(a=x(nC,nL(e=>e.ordinal)),m(2,(e,t)=>1===a(e,t))),gI=e=>{switch(e){case"All":return uy;case"Debug":return u_;case"Error":return gS;case"Fatal":return g_;case"Info":return uv;case"Trace":return gk;case"None":return uS;case"Warning":return gw}},gE=Symbol.for("effect/Readable"),gT=Symbol.for("effect/Ref"),gR={_A:e=>e};class gN{ref;[gT]=gR;[gE];constructor(e){this.ref=e,this[gE]=gE,this.get=ut(()=>as(this.ref))}get;modify(e){return ut(()=>{let t=as(this.ref),[s,n]=e(t);return t!==n&&an(n)(this.ref),s})}pipe(){return eS(this,arguments)}}let gF=e=>new gN(ae(e)),gA=e=>ut(()=>gF(e)),gM=e=>e.get,gj=m(2,(e,t)=>e.modify(()=>[void 0,t])),gC=m(2,(e,t)=>e.modify(t)),gL=m(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class gU{buckets=[];scheduleTask(e,t){let s,n;for(s=0;s<this.buckets.length;s++)if(this.buckets[s][0]<=t)n=this.buckets[s];else break;if(n)n[1].push(e);else{let n=[];for(let e=0;e<s;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class g${maxNextTickBeforeTimer;running=!1;tasks=new gU;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,s]of(this.tasks.buckets=[],t))for(let e=0;e<s.length;e++)s[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(uB)&&e.getFiberRef(uz)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let gD=S(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new g$(2048));class gP{tasks=new gU;deferred=!1;scheduleTask(e,t){this.deferred?gD.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(uB)&&e.getFiberRef(uz)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,s]of(this.tasks.buckets=[],e))for(let e=0;e<s.length;e++)s[e]()}this.deferred=!0}}let gz=S(Symbol.for("effect/FiberRef/currentScheduler"),()=>uC(gD)),gB=(e,t)=>({_tag:"Par",left:e,right:t}),gq=(e,t)=>({_tag:"Seq",left:e,right:t}),gK=e=>{let t=az(e),s=aP();for(;;){let[e,n]=aJ(t,[gX(),aP()],([e,t],s)=>{let[n,i]=gJ(s);return[g0(e,n),aB(t,i)]});if(s=gV(s,e),aU(n))return aV(s);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},gJ=e=>{let t=e,s=gX(),n=aP(),i=aP();for(;;)switch(t._tag){case"Empty":if(aU(n))return[s,i];t=n.head,n=n.tail;break;case"Par":n=aD(t.right,n),t=t.left;break;case"Seq":{let e=t.left,s=t.right;switch(e._tag){case"Empty":t=s;break;case"Par":{let n=e.left,i=e.right;t=gB(gq(n,s),gq(i,s));break}case"Seq":t=gq(e.left,gq(e.right,s));break;case"Single":t=e,i=aD(s,i)}break}case"Single":if(s=gZ(s,t),aU(n))return[s,i];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},gV=(e,t)=>{if(aU(e))return az(g3(t));if(g1(t))return e;let s=g9(e.head),n=g2(t);return 1===s.length&&1===n.length&&eh(s[0],n[0])?aD(g7(e.head,g3(t)),e.tail):aD(g3(t),e)},gG=Symbol.for("effect/RequestBlock/Entry"),gH={_R:e=>e},gW=Symbol.for("effect/RequestBlock/RequestBlockParallel"),gY={_R:e=>e};class gQ{map;[gW]=gY;constructor(e){this.map=e}}let gX=()=>new gQ(rw()),gZ=(e,t)=>new gQ(rj(e.map,t.dataSource,e=>nS(nE(e,i3(t.blockedRequest)),()=>iH(t.blockedRequest)))),g0=(e,t)=>new gQ(rD(e.map,t.map,(e,t,s)=>rT(e,s,ny(rO(e,s),{onNone:()=>t,onSome:e=>i6(t,e)})))),g1=e=>aT(e.map),g2=e=>Array.from(rN(e.map)),g3=e=>g8(rU(e.map,e=>iH(e))),g5=Symbol.for("effect/RequestBlock/RequestBlockSequential"),g4={_R:e=>e};class g6{map;[g5]=g4;constructor(e){this.map=e}}let g8=e=>new g6(e),g7=(e,t)=>new g6(rD(t.map,e.map,(e,t,s)=>rT(e,s,ny(rO(e,s),{onNone:()=>iV(),onSome:e=>i6(e,t)})))),g9=e=>Array.from(rN(e.map)),be=e=>Array.from(e.map),bt=S(Symbol.for("effect/FiberRef/currentRequestMap"),()=>uC(new Map)),bs=(e,t,s,n)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uI(uG,e=>"unbounded"===e?s():e>1?n(e):t());default:return e>1?n(e):t()}},bn=(e,t,s)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uI(uG,e=>"unbounded"===e||e>1?s():t());default:return e>1?s():t()}},bi=e=>{let t=p2(e);return fz(e=>e.sleep(t))},br=e=>t=>{let s=t.label.replace(/[\s="]/g,"_");return`${s}=${e-t.startTime}ms`},ba="effect/MetricLabel",bo=Symbol.for(ba);class bl{key;value;[bo]=bo;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=eo(ba+this.key+this.value)}[ee](){return this._hash}[em](e){return bu(e)&&this.key===e.key&&this.value===e.value}pipe(){return eS(this,arguments)}}let bc=(e,t)=>new bl(e,t),bu=e=>L(e,bo),bp=e=>{let t,s;return"function"==typeof e?t=e:(t=e.try,s=e.catch),ut(()=>{try{return t()}catch(e){throw cu(l_(s?s(e):new pl(e)))}})},bm=m(3,(e,t,s)=>cT(e,U(t),s)),bh=e=>bO(e,bf,gi),bd=((e,t,s)=>cB(e,e=>t(e)?c9(e):s(e)),m(2,(e,t)=>cH(e,{onFailure:e=>c9(t.onFailure(e)),onSuccess:e=>c9(t.onSuccess(e))}))),bf=cy(e=>c9(e.getFiberRefs())),bg=e=>(...t)=>{let s;let n=nw(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];lI(n)&&(s=void 0!==s?lO(s,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===s&&(s=lv),cy(e=>(e.log(t,s,n),uo))},bb=bg(u_),bx=bg(uv),by=bg(gw),bv=bg(gS),b_=m(2,(e,t)=>cG(e,{onFailure:e=>cD(()=>t(e)),onSuccess:c9})),bS=e=>c0(e,e=>!e),bw=e=>bN((t,s)=>x(e,ga(t,s))),bk=m(3,(e,t,s)=>pD(n=>pP(e,te(n,t,s)))),bO=m(3,(e,t,s)=>cB(t,n=>cB(e,e=>c0(t,t=>[s(n,t),e])))),bI=m(2,(e,t)=>cG(e,{onFailure:e=>{let s=lC(e);switch(s._tag){case"Left":return uf(t(s.left),c$(e));case"Right":return c$(e)}},onSuccess:c9})),bE=m(3,(e,t,s)=>bI(e,e=>U(e,t)?s(e):uo)),bT=m(2,(e,t)=>cG(e,{onFailure:e=>uf(t(e),c$(e)),onSuccess:c9})),bR=e=>{let t,s;return("function"==typeof e?t=e:(t=e.try,s=e.catch),t.length>=1)?cO((e,n)=>{try{t(n).then(t=>e(pw(t)),t=>e(cL(s?s(t):new pl(t))))}catch(t){e(cL(s?s(t):new pl(t)))}}):cO(e=>{try{t().then(t=>e(pw(t)),t=>e(cL(s?s(t):new pl(t))))}catch(t){e(cL(s?s(t):new pl(t)))}})},bN=e=>cy(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),uo)),bF=m(2,(e,t)=>ue(()=>t()?c0(e,eZ):c9(nx()))),bA=BigInt(0),bM=(e,t,s)=>{if(!1===e.getFiberRef(uZ))return pJ(t);let n=e.getFiberRef(uP),i=e.getFiberRef(fP),r=tt(i,cn),a=tt(i,d2),o=e.getFiberRef(u0),l=e.getFiberRefs(),c=f5(l,u1),u=f5(l,u2),p=s.parent?eZ(s.parent):s.root?nx():ts(n,ci),m="Some"===u._tag?void 0!==s.links?[...iQ(u.value),...s.links??[]]:iQ(u.value):s.links??io(),h=r.span(t,p,s.context??ta(),m,o?a.unsafeCurrentTimeNanos():bA,s.kind??"internal");return"function"==typeof s.captureStackTrace&&l2.set(h,s.captureStackTrace),"Some"===c._tag&&r$(c.value,(e,t)=>h.attribute(t,e)),void 0!==s.attributes&&Object.entries(s.attributes).forEach(([e,t])=>h.attribute(e,t)),h},bj=(e,...t)=>{let s=co(1===t.length?void 0:t[0]),n=t[t.length-1];return cy(t=>{let i=bM(t,e,s),r=t.getFiberRef(u0),a=tt(t.getFiberRef(fP),d2);return c3(n(i),e=>ut(()=>{"Ended"!==i.status._tag&&(pu(e)&&l2.has(i)&&i.attribute("code.stacktrace",l2.get(i)()),i.end(r?a.unsafeCurrentTimeNanos():bA,e))}))})},bC=m(2,(e,t)=>bk(e,ci,t)),bL="InterruptSignal",bU="Stateful",b$="Resume",bD="YieldNow",bP=e=>({_tag:bL,cause:e}),bz=e=>({_tag:bU,onFiber:e}),bB=e=>({_tag:b$,effect:e}),bq=()=>({_tag:bD}),bK=Symbol.for("effect/FiberScope");class bJ{[bK]=bK;fiberId=aS;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}}class bV{fiberId;parent;[bK]=bK;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(bz(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let bG=e=>new bV(e.id(),e),bH=S(Symbol.for("effect/FiberScope/Global"),()=>new bJ),bW=Symbol.for("effect/Fiber"),bY={_E:e=>e,_A:e=>e},bQ={[bW]:bY,pipe(){return eS(this,arguments)}},bX=Symbol.for("effect/Fiber"),bZ=((e,t)=>e.interruptAsFork(t),e=>ud(cJ(e.await),e.inheritAll)),b0=((e,t)=>b0(e,e=>ut(()=>t(e))),m(2,(e,t)=>({...bQ,id:()=>e.id(),await:cB(e.await,px(t)),children:e.children,inheritAll:e.inheritAll,poll:cB(e.poll,e=>{switch(e._tag){case"None":return c9(nx());case"Some":return x(px(e.value,t),c0(eZ))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...bQ,id:()=>ab(e.id(),t.id()),await:ug(e.await,t.await,(e,t)=>pp(e)?e:t),children:e.children,inheritAll:uf(t.inheritAll,e.inheritAll),poll:ug(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return nx();case"Some":return pp(e.value)?e:t}}),interruptAsFork:s=>x(ux(e,s),uf(x(t,ux(s))),cS)});let b1="effect/FiberCurrent",b2=Symbol.for("effect/Logger"),b3={_Message:e=>e,_Output:e=>e},b5=e=>({[b2]:b3,log:e,pipe(){return eS(this,arguments)}}),b4=m(2,(e,t)=>b5(s=>t(e.log(s)))),b6=((e,t)=>b5(s=>[e.log(s),t.log(s)]),b5(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${av(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=ev(r[e]);t.length>0&&(l+=" message=",l=b9(t,l))}else{let e=ev(r);e.length>0&&(l+=" message=",l=b9(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=b9(lX(t),l)),a$(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=x(t,br(o))}if(x(e,rF)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xs(s)+"=",l=b9(ev(n),l)}return l})),b8=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,b7=/^[^\s"=]+$/,b9=(e,t)=>t+(e.match(b7)?e:b8(e)),xe=(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${av(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=ev(r[e],0);t.length>0&&(l+=" message=",l=xi(t,l))}else{let e=ev(r,0);e.length>0&&(l+=" message=",l=xi(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xi(lX(t),l)),a$(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=x(t,xr(o))}if(x(e,rF)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xs(s)+"=",l=xi(ev(n,0),l)}return l},b5(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l={},c={};if(rF(e)>0)for(let[t,s]of e)l[t]=xt(s);if(a$(a))for(let e of a)c[e.label]=o-e.startTime;return{message:xt(r),logLevel:i.label,timestamp:s.toISOString(),cause:lT(t)?void 0:lX(t),annotations:l,spans:c,fiberId:av(n)}})),xt=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},xs=e=>e.replace(/[\s="]/g,"_"),xn=e=>JSON.stringify(e),xi=(e,t)=>t+(e.match(b7)?e:xn(e)),xr=e=>t=>{let s=xs(t.label);return`${s}=${e-t.startTime}ms`},xa=Symbol.for("effect/MetricKeyType"),xo="effect/MetricKeyType/Counter",xl=Symbol.for(xo),xc=Symbol.for("effect/MetricKeyType/Frequency"),xu=Symbol.for("effect/MetricKeyType/Gauge"),xp="effect/MetricKeyType/Histogram",xm=Symbol.for(xp),xh=Symbol.for("effect/MetricKeyType/Summary"),xd={_In:e=>e,_Out:e=>e};class xf{incremental;bigint;[xa]=xd;[xl]=xl;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=eo(xo)}_hash;[ee](){return this._hash}[em](e){return xx(e)}pipe(){return eS(this,arguments)}}class xg{boundaries;[xa]=xd;[xm]=xm;constructor(e){this.boundaries=e,this._hash=x(eo(xp),en(et(this.boundaries)))}_hash;[ee](){return this._hash}[em](e){return x_(e)&&eh(this.boundaries,e.boundaries)}pipe(){return eS(this,arguments)}}let xb=e=>new xf(e?.incremental??!1,e?.bigint??!1),xx=e=>L(e,xl),xy=e=>L(e,xc),xv=e=>L(e,xu),x_=e=>L(e,xm),xS=e=>L(e,xh),xw=Symbol.for("effect/MetricKey"),xk={_Type:e=>e},xO=ng(eh);class xI{name;keyType;description;tags;[xw]=xk;constructor(e,t,s,n=[]){this.name=e,this.keyType=t,this.description=s,this.tags=n,this._hash=x(eo(this.name+this.description),en(et(this.keyType)),en(eu(this.tags)))}_hash;[ee](){return this._hash}[em](e){return xE(e)&&this.name===e.name&&eh(this.keyType,e.keyType)&&eh(this.description,e.description)&&xO(this.tags,e.tags)}pipe(){return eS(this,arguments)}}let xE=e=>L(e,xw),xT=(e,t)=>new xI(e,xb(t),nw(t?.description)),xR=m(2,(e,t)=>0===t.length?e:new xI(e.name,e.keyType,e.description,ia(e.tags,t))),xN=Symbol.for("effect/MutableHashMap"),xF={[xN]:xN,[Symbol.iterator](){return new xA(this)},toString(){return ey(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(ex)}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}};class xA{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new xM(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new xA(this.self)}}class xM{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let xj=()=>{let e=Object.create(xF);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},xC=m(2,(e,t)=>{if(!1===ef(t))return e.referential.has(t)?eZ(e.referential.get(t)):nx();let s=t[ee](),n=e.buckets.get(s);return void 0===n?nx():xL(e,n,t)}),xL=(e,t,s,n=!1)=>{for(let i=0,r=t.length;i<r;i++)if(s[em](t[i][0])){let s=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),eZ(s)}return nx()},xU=m(2,(e,t)=>eQ(xC(e,t))),x$=m(3,(e,t,s)=>{if(!1===ef(t))return e.referential.set(t,s),e;let n=t[ee](),i=e.buckets.get(n);return void 0===i?e.buckets.set(n,[[t,s]]):(xD(e,i,t),i.push([t,s])),e.bucketsSize++,e}),xD=(e,t,s)=>{for(let n=0,i=t.length;n<i;n++)if(s[em](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},xP=m(2,(e,t)=>{if(!1===ef(t))return e.referential.delete(t),e;let s=t[ee](),n=e.buckets.get(s);return void 0===n||(xD(e,n,t),0===n.length&&e.buckets.delete(s)),e}),xz=e=>e.referential.size+e.bucketsSize,xB=Symbol.for("effect/MetricState"),xq="effect/MetricState/Counter",xK=Symbol.for(xq),xJ="effect/MetricState/Frequency",xV=Symbol.for(xJ),xG="effect/MetricState/Gauge",xH=Symbol.for(xG),xW="effect/MetricState/Histogram",xY=Symbol.for(xW),xQ="effect/MetricState/Summary",xX=Symbol.for(xQ),xZ={_A:e=>e};class x0{count;[xB]=xZ;[xK]=xK;constructor(e){this.count=e}[ee](){return x(et(xq),en(et(this.count)),ep(this))}[em](e){return yt(e)&&this.count===e.count}pipe(){return eS(this,arguments)}}let x1=ng(eh);class x2{occurrences;[xB]=xZ;[xV]=xV;constructor(e){this.occurrences=e}_hash;[ee](){return x(eo(xJ),en(eu(nP(this.occurrences.entries()))),ep(this))}[em](e){return ys(e)&&x1(nP(this.occurrences.entries()),nP(e.occurrences.entries()))}pipe(){return eS(this,arguments)}}class x3{value;[xB]=xZ;[xH]=xH;constructor(e){this.value=e}[ee](){return x(et(xG),en(et(this.value)),ep(this))}[em](e){return yn(e)&&this.value===e.value}pipe(){return eS(this,arguments)}}class x5{buckets;count;min;max;sum;[xB]=xZ;[xY]=xY;constructor(e,t,s,n,i){this.buckets=e,this.count=t,this.min=s,this.max=n,this.sum=i}[ee](){return x(et(xW),en(et(this.buckets)),en(et(this.count)),en(et(this.min)),en(et(this.max)),en(et(this.sum)),ep(this))}[em](e){return yi(e)&&eh(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eS(this,arguments)}}class x4{error;quantiles;count;min;max;sum;[xB]=xZ;[xX]=xX;constructor(e,t,s,n,i,r){this.error=e,this.quantiles=t,this.count=s,this.min=n,this.max=i,this.sum=r}[ee](){return x(et(xQ),en(et(this.error)),en(et(this.quantiles)),en(et(this.count)),en(et(this.min)),en(et(this.max)),en(et(this.sum)),ep(this))}[em](e){return yr(e)&&this.error===e.error&&eh(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eS(this,arguments)}}let x6=e=>new x0(e),x8=e=>new x2(e),x7=e=>new x3(e),x9=e=>new x5(e.buckets,e.count,e.min,e.max,e.sum),ye=e=>new x4(e.error,e.quantiles,e.count,e.min,e.max,e.sum),yt=e=>L(e,xK),ys=e=>L(e,xV),yn=e=>L(e,xH),yi=e=>L(e,xY),yr=e=>L(e,xX),ya=Symbol.for("effect/MetricHook"),yo={_In:e=>e,_Out:e=>e},yl=e=>({[ya]:yo,pipe(){return eS(this,arguments)},...e}),yc=BigInt(0),yu=e=>{let t=e.keyType.bigint?yc:0,s=e.keyType.incremental?e.keyType.bigint?e=>e>=yc:e=>e>=0:e=>!0;return yl({get:()=>x6(t),update:e=>{s(e)&&(t+=e)}})},yp=e=>{let t=new Map;for(let s of e.keyType.preregisteredWords)t.set(s,0);return yl({get:()=>x8(t),update:e=>{let s=t.get(e)??0;t.set(e,s+1)}})},ym=(e,t)=>{let s=t;return yl({get:()=>x7(s),update:e=>{s=e}})},yh=e=>{let t=e.keyType.boundaries.values,s=t.length,n=new Uint32Array(s+1),i=new Float32Array(s),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;x(t,n8(nC),ic((e,t)=>{i[t]=e}));let c=()=>{let e=nD(s),t=0;for(let r=0;r<s;r++){let s=i[r];t+=n[r],e[r]=[s,t]}return e};return yl({get:()=>x9({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=s;for(;t!==c;){let s=Math.floor(t+(c-t)/2);e<=i[s]?c=s:t=s,c===t+1&&(e<=i[t]?c=t:t=c)}n[t]=n[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},yd=e=>{let{error:t,maxAge:s,maxSize:n,quantiles:i}=e.keyType,r=x(i,n8(nC)),a=nD(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,m=e=>{let i=[],o=0;for(;o!==n-1;){let t=a[o];if(null!=t){let[n,r]=t,a=ms(e-n);mx(a,p7)&&a<=s&&i.push(r)}o+=1}return yf(t,r,n8(i,nC))},h=(e,t)=>{n>0&&(a[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return yl({get:()=>ye({error:t,quantiles:m(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>h(e,t)})},yf=(e,t,s)=>{let n=s.length;if(!nG(t))return io();let i=t[0],r=t.slice(1),a=yg(e,n,nx(),0,i,s),o=il(a);return r.forEach(t=>{o.push(yg(e,n,a.value,a.consumed,t,a.rest))}),ic(o,e=>[e.quantile,e.value])},yg=(e,t,s,n,i,r)=>{let a=e,o=t,l=s,c=n,u=i,p=r,m=e,h=t,d=s,f=n,g=i,b=r;for(;;){if(!nG(p))return{quantile:u,value:nx(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:eZ(n1(p)),consumed:c+p.length,rest:[]};let e=n5(p,e=>e<=p[0]),t=u*o,s=a/2*t,n=c+e[0].length,i=Math.abs(n-t);if(n<t-s){m=a,h=o,d=nX(p),f=n,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue}if(n>t+s)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":m=a,h=o,d=nX(p),f=n,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){m=a,h=o,d=nX(p),f=n,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue}return{quantile:u,value:eZ(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},yb=Symbol.for("effect/MetricPair"),yx={_Type:e=>e},yy=(e,t)=>({[yb]:yx,metricKey:e,metricState:t,pipe(){return eS(this,arguments)}}),yv=Symbol.for("effect/MetricRegistry");class y_{[yv]=yv;map=xj();snapshot(){let e=[];for(let[t,s]of this.map)e.push(yy(t,s.get()));return e}get(e){let t=x(this.map,xC(e),nk);if(null!=t)return t;if(xx(e.keyType))return this.getCounter(e);if(xv(e.keyType))return this.getGauge(e);if(xy(e.keyType))return this.getFrequency(e);if(x_(e.keyType))return this.getHistogram(e);if(xS(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=x(this.map,xC(e),nk);if(null==t){let s=yu(e);x(this.map,xU(e))||x(this.map,x$(e,s)),t=s}return t}getFrequency(e){let t=x(this.map,xC(e),nk);if(null==t){let s=yp(e);x(this.map,xU(e))||x(this.map,x$(e,s)),t=s}return t}getGauge(e){let t=x(this.map,xC(e),nk);if(null==t){let s=ym(e,e.keyType.bigint?BigInt(0):0);x(this.map,xU(e))||x(this.map,x$(e,s)),t=s}return t}getHistogram(e){let t=x(this.map,xC(e),nk);if(null==t){let s=yh(e);x(this.map,xU(e))||x(this.map,x$(e,s)),t=s}return t}getSummary(e){let t=x(this.map,xC(e),nk);if(null==t){let s=yd(e);x(this.map,xU(e))||x(this.map,x$(e,s)),t=s}return t}}let yS=()=>new y_,yw=Symbol.for("effect/Metric"),yk={_Type:e=>e,_In:e=>e,_Out:e=>e},yO=S(Symbol.for("effect/Metric/globalMetricRegistry"),()=>yS()),yI=function(e,t,s){let n=Object.assign(e=>us(e,e=>yF(n,e)),{[yw]:yk,keyType:e,unsafeUpdate:t,unsafeValue:s,register(){return this.unsafeValue([]),this},pipe(){return eS(this,arguments)}});return n},yE=(e,t)=>yT(xT(e,t)),yT=e=>{let t;let s=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=yO.get(e);let i=s.get(n);return void 0!==i||(i=yO.get(xR(e,n)),s.set(n,i)),i};return yI(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get())},yR=m(3,(e,t,s)=>yN(e,[bc(t,s)])),yN=m(2,(e,t)=>yI(e.keyType,(s,n)=>e.unsafeUpdate(s,ia(t,n)),s=>e.unsafeValue(ia(t,s)))),yF=m(2,(e,t)=>uI(uY,s=>ut(()=>e.unsafeUpdate(t,s)))),yA="effect/MetricBoundaries",yM=Symbol.for(yA);class yj{values;[yM]=yM;constructor(e){this.values=e,this._hash=x(eo(yA),en(eu(this.values)))}_hash;[ee](){return this._hash}[em](e){return yC(e)&&eh(this.values,e.values)}pipe(){return eS(this,arguments)}}let yC=e=>L(e,yM),yL=m(2,(e,t)=>uI(bt,s=>ut(()=>{if(s.has(e)){let n=s.get(e);n.state.completed||(n.state.completed=!0,pC(n.result,t))}})));class yU{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}}let y$=Symbol.for("effect/Supervisor"),yD={_T:e=>e};class yP{underlying;value0;[y$]=yD;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,s,n){this.underlying.onStart(e,t,s,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new yP(this,x(this.value,c0(e)))}zip(e){return new yz(this,e)}}class yz{left;right;_tag="Zip";[y$]=yD;constructor(e,t){this.left=e,this.right=t}get value(){return uh(this.left.value,this.right.value)}onStart(e,t,s,n){this.left.onStart(e,t,s,n),this.right.onStart(e,t,s,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new yP(this,x(this.value,c0(e)))}zip(e){return new yz(this,e)}}let yB=e=>L(e,y$)&&U(e,"Zip");class yq{[y$]=yD;fibers=new Set;get value(){return ut(()=>Array.from(this.fibers))}onStart(e,t,s,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new yP(this,x(this.value,c0(e)))}zip(e){return new yz(this,e)}onRun(e,t){return e()}}class yK{effect;[y$]=yD;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,s,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new yP(this,x(this.value,c0(e)))}zip(e){return new yz(this,e)}onRun(e,t){return e()}}let yJ=ut(()=>new yq),yV=e=>new yK(e),yG=S("effect/Supervisor/none",()=>yV(uo)),yH="Empty",yW="AddSupervisor",yY="RemoveSupervisor",yQ="AndThen",yX={_tag:yH},yZ=(e,t)=>({_tag:yQ,first:e,second:t}),y0=(e,t)=>{let s=e,n=t;for(;i7(n);){let e=re(n);switch(e._tag){case yH:n=rt(n);break;case yW:s=s.zip(e.supervisor),n=rt(n);break;case yY:s=y1(s,e.supervisor),n=rt(n);break;case yQ:n=i5(e.first)(i5(e.second)(rt(n)))}}return s},y1=(e,t)=>eh(e,t)?yG:yB(e)?y1(e.left,t).zip(y1(e.right,t)):e,y2=e=>eh(e,yG)?rV():yB(e)?x(y2(e.left),r2(y2(e.right))):r6(e),y3=oW({empty:yX,patch:(e,t)=>y0(t,iH(e)),combine:yZ,diff:(e,t)=>{if(eh(e,t))return yX;let s=y2(e),n=y2(t),i=x(n,r1(s),r5(yX,(e,t)=>yZ(e,{_tag:yW,supervisor:t}))),r=x(s,r1(n),r5(yX,(e,t)=>yZ(e,{_tag:yY,supervisor:t})));return yZ(i,r)}}),y5=yE("effect_fiber_started",{incremental:!0}),y4=yE("effect_fiber_active"),y6=yE("effect_fiber_successes",{incremental:!0}),y8=yE("effect_fiber_failures",{incremental:!0}),y7=yR(yT(new xI("effect_fiber_lifetimes",new xg(x(((e,t)=>{let s=Math.max(1,Math.floor(e)),n=Array(s);for(let e=0;e<s;e++)n[e]=t(e);return n})((o={start:.5,factor:2,count:35}).count-1,e=>o.start*Math.pow(o.factor,e)),i0,e=>new yj(x(e,nK(iH(Number.POSITIVE_INFINITY)),ib)))),nw(l))),"time_unit","milliseconds"),y9="Continue",ve="Yield",vt={_E:e=>e,_A:e=>e},vs=e=>{throw Error(`BUG: FiberRuntime - ${ev(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},vn=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vi=S("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vr={[eE]:(e,t,s)=>X(()=>t.effect_instruction_i1(s)),OnStep:(e,t,s)=>pw(pw(s)),[eT]:(e,t,s)=>X(()=>t.effect_instruction_i2(s)),[eC]:(e,t,s)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),le(e._runtimeFlags)&&e.isInterrupted())?pb(e.getInterruptedCause()):pw(s),[eA]:(e,t,s)=>(X(()=>t.effect_instruction_i2(s)),X(()=>t.effect_instruction_i0()))?(e.pushStack(t),X(()=>t.effect_instruction_i1())):uo},va={[bL]:(e,t,s,n)=>(e.processNewInterruptSignal(n.cause),le(t)?pb(n.cause):s),[b$]:(e,t,s,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[bU]:(e,t,s,n)=>(n.onFiber(e,gx(t)),s),[bD]:(e,t,s,n)=>cB(um(),()=>s)},vo=e=>cY(gK(e),e=>vS(be(e),([e,t])=>{let s=new Map,n=[];for(let e of t)for(let t of(n.push(iQ(e)),e))s.set(t.request,t);let i=n.flat();return uM(vY(e.runAll(n),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),bt,s)},!1,!1));class vl{[bW]=bY;[bX]=vt;pipe(){return eS(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,s){if(this._runtimeFlags=s,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(vJ),this._scheduler=this.getFiberRef(gz),lr(s)){let e=this.getFiberRef(uY);y5.unsafeUpdate(1,e),y4.unsafeUpdate(1,e)}this._tracer=tt(this.getFiberRef(fP),cn)}id(){return this._fiberId}resume(e){this.tell(bB(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>gv(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return bG(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(uX)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return ue(()=>{let t=pE(this._fiberId);return this.tell(bz((s,n)=>{pC(t,ut(()=>e(s,n)))})),pN(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return cO(e=>{let t=t=>e(c9(t));return this.tell(bz((e,s)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),ut(()=>this.tell(bz((e,s)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return cy((e,t)=>{let s=e.id(),n=e.getFiberRefs(),i=t.runtimeFlags,r=f0(n,s,this.getFiberRefs());return e.setFiberRefs(r),ul(x(lo(i,e.getFiberRef(vK)),o4(1),o4(16)))})}get poll(){return ut(()=>nw(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return ut(()=>this.tell(bP(lw(e))))}unsafeInterruptAsFork(e){this.tell(bP(lw(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(vK,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=f3(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=f6(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=tt(this.getFiberRef(fP),cn),this._supervisor=this.getFiberRef(vJ),this._scheduler=this.getFiberRef(gz)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=y9,s=globalThis[b1];globalThis[b1]=this;try{for(;t===y9;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[b1]=s}this._queue.length>0&&!this._running?(this._running=!0,t===ve?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(uz))}drainQueueWhileRunning(e,t){let s=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];s=va[t._tag](this,e,s,t)}return s}isInterrupted(){return!lT(this.getFiberRef(uX))}addInterruptedCause(e){let t=this.getFiberRef(uX);this.setFiberRef(uX,lO(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(bP(lw(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return uu({while:()=>!t,body:()=>{let s=e.next();return s.done?ut(()=>{t=!0}):cS(s.value.await)},step:()=>{}})}return null}reportExitValue(e){if(lr(this._runtimeFlags)){let t=this.getFiberRef(uY),s=this.id().startTimeMillis,n=Date.now();switch(y7.unsafeUpdate(n-s,t),y4.unsafeUpdate(-1,t),e._tag){case eR:y6.unsafeUpdate(1,t);break;case eO:y8.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(uW);lN(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(vh)}log(e,t,s){let n=eQ(s)?s.value:this.getFiberRef(uK);if(gO(this.getFiberRef(vc),n))return;let i=this.getFiberRef(uJ),r=this.getFiberRef(uq),a=this.getLoggers(),o=this.getFiberRefs();if(r8(a)>0){let s=new Date(tt(this.getFiberRef(fP),d2).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:i,annotations:r,date:s})}}evaluateMessageWhileSuspended(e){switch(e._tag){case bD:return ve;case bL:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(pb(e.cause)),this._asyncInterruptor=null),y9;case b$:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),y9;case bU:return e.onFiber(this,null!==this._exitValue?gg:gy(this._runtimeFlags,this._asyncBlockingOn)),y9;default:return vs(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=le(this._runtimeFlags)&&this.isInterrupted()?pb(this.getInterruptedCause()):e;for(;null!==t;){let e=t,s=this.runLoop(e);if(s===vn){let e=vi.currentOp;vi.currentOp=null,e._op===ej?o7(this._runtimeFlags)?(this.tell(bq()),this.tell(bB(pk)),t=null):t=pk:e._op===ew&&(t=null)}else{this._runtimeFlags=x(this._runtimeFlags,o9(16));let e=this.interruptAllChildren();null!==e?t=cB(e,()=>s):(0===this._queue.length?this.setExitValue(s):this.tell(bB(s)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(bB(e));else{this._running=!0;let t=globalThis[b1];globalThis[b1]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[b1]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(bB(e))}patchRuntimeFlags(e,t){let s=ll(e,t);return globalThis[b1]=this,this._runtimeFlags=s,s}initiateAsync(e,t){let s=!1,n=e=>{s||(s=!0,this.tell(bB(e)))};le(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(c$(lS(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eI)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eE&&e._op!==eA)return e;e=this.popStack()}}Tag(e){return c0(uO(uP),t=>tt(t,e))}Left(e){return cL(e.left)}None(e){return cL(new pa)}Right(e){return pw(e.right)}Some(e){return pw(e.value)}Micro(e){return ck(t=>{let s=tz().pipe(tq(tY,this.getFiberRef(uP))),n=t;return e[tS](s,e=>{if("Right"===e._tag)return n(pw(e.right));switch(e.left._tag){case"Aborted":return n(pb(lw(aS)));case"Expected":return n(cL(e.left.error));case"Unexpected":return n(cA(e.left.defect))}}),cO(e=>{n=t=>{e(uo)},tB(s,tH).abort()})})}[eN](e){let t=X(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return void 0!==s?(s._op in vr||vs(s),vr[s._op](this,s,t)):(vi.currentOp=pw(t),vn)}[eR](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in vr||vs(t),vr[t._op](this,t,e.effect_instruction_i0)):(vi.currentOp=e,vn)}[eO](e){let t=e.effect_instruction_i0,s=this.getNextFailCont();if(void 0===s)return vi.currentOp=pb(t),vn;switch(s._op){case eI:case eT:if(!(le(this._runtimeFlags)&&this.isInterrupted()))return X(()=>s.effect_instruction_i1(t));return pb(l$(t));case"OnStep":if(!(le(this._runtimeFlags)&&this.isInterrupted()))return pw(pb(t));return pb(l$(t));case eC:if(this.patchRuntimeFlags(this._runtimeFlags,s.patch),le(this._runtimeFlags)&&this.isInterrupted())return pb(lO(t,this.getInterruptedCause()));return pb(t);default:vs(s)}}[eM](e){return X(()=>e.effect_instruction_i0(this,gx(this._runtimeFlags)))}Blocked(e){let t=this.getFiberRefs(),s=this._runtimeFlags;if(this._steps.length>0){let n=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)n.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=gi(i.refs,t),o=lo(i.flags,s);return pw(cp(e.effect_instruction_i0,cy(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(ga(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=ll(o)(t._runtimeFlags),e.effect_instruction_i1})))}return ua(t=>cB(vk(cm(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return vo(e.effect_instruction_i0)}[eF](e){let t=e.effect_instruction_i0,s=this._runtimeFlags,n=ll(s,t);if(le(n)&&this.isInterrupted())return pb(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return pk;{let t=lo(n,s);return this.pushStack(new cd(t,e)),X(()=>e.effect_instruction_i1(s))}}[eE](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eI](e){return this.pushStack(e),e.effect_instruction_i0}[eT](e){return this.pushStack(e),e.effect_instruction_i0}[ew](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),vi.currentOp=e,vn}[ej](e){return this.isYielding=!1,vi.currentOp=e,vn}[eA](e){let t=e.effect_instruction_i0,s=e.effect_instruction_i1;return t()?(this.pushStack(e),s()):pk}[ek](e){return X(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let s=t;t=cB(um({priority:e}),()=>s)}}try{if("_op"in t&&t._op in this||vs(t),(t=this._tracer.context(()=>y()!==t[eL]._V?cM(`Cannot execute an Effect versioned ${t[eL]._V} with a Runtime of version ${y()}`):this[t._op](t),this))===vn){let e=vi.currentOp;if(e._op===ej||e._op===ew)return vn;return vi.currentOp=null,e._op===eR||e._op===eO?e:pb(lS(e))}}catch(e){t=cc(e)?pb(e.cause):pi(e)?pb(lO(lS(e),lw(aS))):cA(e)}}}run=()=>{this.drainQueueOnCurrentThread()}}let vc=S("effect/FiberRef/currentMinimumLogLevel",()=>uC(gI("Info"))),vu=e=>b5(t=>{tt(f4(t.context,fP),fA).unsafe.log(e.log(t))}),vp=S(Symbol.for("effect/Logger/defaultLogger"),()=>vu(b6)),vm=S(Symbol.for("effect/Logger/tracerLogger"),()=>b5(({annotations:e,cause:t,context:s,fiberId:n,logLevel:i,message:r})=>{let a=nT(f5(s,uP),ts(ci)),o=nE(f5(s,fP),e=>tt(e,d2));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(rU(e,ev));l["effect.fiberId"]=av(n),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=lX(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),vh=S(Symbol.for("effect/FiberRef/currentLoggers"),()=>uL(r6(vp,vm))),vd=m(e=>cx(e[0]),(e,t)=>ur(us(e,e=>vf(s=>t(e,s))))),vf=e=>cy(t=>{let s=t.getFiberRefs(),n=t._runtimeFlags;return cB(vL,t=>u6(t,t=>cy(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=gi(r,s),l=lo(a,n),c=gi(s,r);return i.setFiberRefs(ga(o,i.id(),s)),vW(up(e(t),l),ut(()=>{i.setFiberRefs(ga(c,i.id(),i.getFiberRefs()))}))})))}),vg=e=>{if(Array.isArray(e)||z(e))return[e,nx()];let t=Object.keys(e),s=t.length;return[t.map(t=>e[t]),eZ(e=>{let n={};for(let i=0;i<s;i++)n[t[i]]=e[i];return n})]},vb=(e,t,s)=>{let n=[];for(let t of e)n.push(cj(t));return cB(vv(n,h,{concurrency:s?.concurrency,batching:s?.batching}),e=>{let n=nx(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let s=e[t];"Left"===s._tag?(r[t]=eZ(s.left),o=!0):(a[t]=s.right,r[t]=n)}return o?"Some"===t._tag?cL(t.value(r)):cL(r):s?.discard?uo:"Some"===t._tag?c9(t.value(a)):c9(a)})},vx=(e,t,s)=>{let n=[];for(let t of e)n.push(cj(t));return s?.discard?vv(n,h,{concurrency:s?.concurrency,batching:s?.batching,discard:!0}):c0(vv(n,h,{concurrency:s?.concurrency,batching:s?.batching}),e=>"Some"===t._tag?t.value(e):e)},vy=(e,t)=>{let[s,n]=vg(e);return t?.mode==="validate"?vb(s,n,t):t?.mode==="either"?vx(s,n,t):t?.discard!==!0&&"Some"===n._tag?c0(vv(s,h,t),n.value):vv(s,h,t)},vv=((e,t)=>Array.from({length:t},()=>e),m(e=>z(e[0]),(e,t,s)=>cy(n=>{let i=s?.batching===!0||s?.batching==="inherit"&&n.getFiberRef(uH);return s?.discard?bs(s.concurrency,()=>vF(fV)(s=>i?vS(e,(e,n)=>s(t(e,n)),!0,!1,1):cY(e,(e,n)=>s(t(e,n)))),()=>vF(fW)(s=>vS(e,(e,n)=>s(t(e,n)),i,!1)),s=>vF(fY(s))(n=>vS(e,(e,s)=>n(t(e,s)),i,!1,s))):bs(s?.concurrency,()=>vF(fV)(s=>i?vw(e,1,(e,n)=>s(t(e,n)),!0):cW(e,(e,n)=>s(t(e,n)))),()=>vF(fW)(s=>v_(e,(e,n)=>s(t(e,n)),i)),s=>vF(fY(s))(n=>vw(e,s,(e,s)=>n(t(e,s)),i)))}))),v_=(e,t,s)=>ue(()=>{let n=nP(e),i=Array(n.length);return uf(vS(n,(e,s)=>cB(t(e,s),e=>ut(()=>i[s]=e)),s,!1),c9(i))}),vS=(e,t,s,n,i)=>ua(r=>un(a=>cy(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return uo;let u=0,p=!1,m=i?Math.min(l.length,i):l.length,h=new Set,d=[],f=()=>h.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=d.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(pk),e},v=(e,t=!1)=>{let s=ur(a(e)),n=vI(s,o,o._runtimeFlags,bH);return o._scheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(s)},0),n},_=()=>{n||(c-=l.length,l=[]),p=!0,f()},S=s?cK:cC,w=v(cO(e=>{let n=(e,t)=>{"Blocked"===e._op?x.push(e):(d.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let m=l.pop(),f=u++,_=()=>{let e=l.pop();return f=u++,cB(um(),()=>cB(S(r(t(e,f))),w))},w=e=>l.length>0&&(n(e,f),l.length>0)?_():c9(e),k=v(cB(S(r(t(m,f))),w));g.push(k),h.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),h.delete(k),n(r,f),d.length===c?e(c9(nv(pd(y(),{parallel:!0}),()=>pk))):x.length+d.length===c?e(c9(cp(x.map(e=>e.effect_instruction_i0).reduce(gB),vS([nv(pd(y(),{parallel:!0}),()=>pk),...x.map(e=>e.effect_instruction_i1)],e=>e,s,!0,i)))):a()})}};for(let e=0;e<m;e++)a()}));return cS(c3(cJ(r(bZ(w))),p_({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),s=Array.from(x);return cO(n=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&n(nI(pd(i,{parallel:!0}))),s.length>0&&a&&l()},l=()=>{v(s.pop(),!0).addObserver(o(a,!0)),a++};w.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>cW(b,e=>e.inheritAll)})))}))),vw=(e,t,s,n)=>ue(()=>{let i=nP(e),r=Array(i.length);return uf(vS(i,(e,t)=>c0(s(e,t),e=>r[t]=e),n,!1,t),c9(r))}),vk=e=>vT(e,bH),vO=(e,t,s,n=null)=>{let i=vE(e,t,s,n);return i.resume(e),i},vI=(e,t,s,n=null)=>vE(e,t,s,n),vE=(e,t,s,n=null)=>{let i=aI(),r=f1(t.getFiberRefs(),i),a=new vl(i,r,s),o=f4(r,uP),l=a._supervisor;return l.onStart(o,e,eZ(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==n?n:x(t.getFiberRef(uQ),nv(()=>t.scope()))).add(s,a),a},vT=(e,t)=>cy((s,n)=>c9(vO(e,s,n.runtimeFlags,t))),vR=(e=>R(e[2]),e=>pD(t=>ny(ts(t,vC),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return cB(u7(t,fW),t=>vz(e,t))}}}))),vN=e=>t=>pD(s=>ny(ts(s,vC),{onNone:()=>t,onSome:s=>"ParallelN"===s.strategy._tag&&s.strategy.parallelism===e?t:cB(u7(s,fY(e)),e=>vz(t,e))})),vF=e=>t=>pD(s=>ny(ts(s,vC),{onNone:()=>t(h),onSome:s=>{let n="Parallel"===e._tag?vR:"Sequential"===e._tag?vM:vN(e.parallelism);switch(s.strategy._tag){case"Parallel":return n(t(vR));case"Sequential":return n(t(vM));case"ParallelN":return n(t(vN(s.strategy.parallelism)))}}})),vA=e=>cB(vC,e),vM=e=>pD(t=>ny(ts(t,vC),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return cB(u7(t,fV),t=>vz(e,t))}}})),vj=(e=>cx(e[1]),m(e=>cx(e[1]),(e,t,s,n)=>c0(vy([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching}),([e,t])=>s(e,t)))),vC=ti("effect/Scope"),vL=vC,vU=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},v$={[u3]:u3,[u5]:u5,pipe(){return eS(this,arguments)},fork(e){return ut(()=>{let t=vD(e);if("Closed"===this.state._tag)return t.state=this.state,t;let s=e=>t.close(e);return this.state.finalizers.add(s),vU(t,e=>ut(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(s)})),t})},close(e){return ue(()=>{if("Closed"===this.state._tag)return uo;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?uo:fG(this.strategy)?x(cW(t,t=>cC(t(e))),cB(e=>x(pd(e),nE(ph),nv(()=>pk)))):fH(this.strategy)?x(v_(t,t=>cC(t(e)),!1),cB(e=>x(pd(e,{parallel:!0}),nE(ph),nv(()=>pk)))):x(vw(t,this.strategy.parallelism,t=>cC(t(e)),!1),cB(e=>x(pd(e,{parallel:!0}),nE(ph),nv(()=>pk))))})},addFinalizer(e){return ue(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),uo))}},vD=(e=fV)=>{let t=Object.create(v$);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},vP=(e=fV)=>ut(()=>vD(e)),vz=m(2,(e,t)=>pB(e,tn(e9(vC,t)))),vB=m(2,(e,t)=>cS(vd(cB(uO(e),s=>c_(uE(e,t),s)),t=>uE(e,t)))),vq=m(2,(e,t)=>uI(e,s=>vB(e,t(s)))),vK=uD(li,{differ:lc,fork:lc.empty}),vJ=uD(yG,{differ:y3,fork:yX}),vV=m(3,(e,t,s)=>vG(e,t,{onSelfWin:(e,t)=>cB(e.await,n=>{switch(n._tag){case eR:return cB(e.inheritAll,()=>s.onSelfDone(n,t));case eO:return s.onSelfDone(n,t)}}),onOtherWin:(e,t)=>cB(e.await,n=>{switch(n._tag){case eR:return cB(e.inheritAll,()=>s.onOtherDone(n,t));case eO:return s.onOtherDone(n,t)}})})),vG=((e,t)=>cz(s=>vV(e,t,{onSelfDone:(e,t)=>pS(e,{onFailure:e=>x(bZ(t),b_(t=>lk(e,t))),onSuccess:e=>x(t,ux(s),c_(e))}),onOtherDone:(e,t)=>pS(e,{onFailure:e=>x(bZ(t),b_(t=>lk(t,e))),onSuccess:e=>x(t,ux(s),c_(e))})})),m(3,(e,t,s)=>cy((n,i)=>{let r=i.runtimeFlags,a=ae(!0),o=vE(e,n,r,s.selfScope),l=vE(t,n,r,s.otherScope);return cO(n=>{o.addObserver(()=>vH(o,l,s.onSelfWin,a,n)),l.addObserver(()=>vH(l,o,s.onOtherWin,a,n)),o.startFork(e),l.startFork(t)},ag(o.id(),l.id()))}))),vH=(e,t,s,n,i)=>{at(!0,!1)(n)&&i(s(e,t))},vW=m(2,(e,t)=>ua(s=>cG(s(e),{onFailure:e=>cG(t,{onFailure:t=>c$(lO(e,t)),onSuccess:()=>c$(e)}),onSuccess:e=>c_(t,e)}))),vY=(e,t,s)=>cz(n=>cB(cB(vk(cX(e)),e=>cO(n=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&pc(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&lR(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),s?.(),n(ub(e)))};e.addObserver(e=>{a.forEach(e=>e()),n(e)});let a=t.map((e,t)=>{let s=e=>{i[t]=e,r()};return e.listeners.addObserver(s),()=>e.listeners.removeObserver(s)});return r(),ut(()=>{a.forEach(e=>e())})})),()=>ue(()=>cY(t.flatMap(e=>e.state.completed?[]:[e]),e=>yL(e.request,py(n))))));class vQ{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!vX(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&vZ(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new vQ(this.s,this.stripped)}get done(){return this.index>=this.length}}let vX=e=>{let t=e.charCodeAt(0);return 13===t||10===t},vZ=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),v0=((e,t)=>v1(e.minutes,t.minutes)&&v1(e.hours,t.hours)&&v1(e.days,t.days)&&v1(e.months,t.months)&&v1(e.weekdays,t.weekdays),ng(nh)),v1=(e,t)=>v0(nP(e),nP(t)),v2=Symbol.for("effect/ScheduleInterval"),v3={[v2]:v2,startMillis:0,endMillis:0},v5=(e,t)=>e>t?v3:{[v2]:v2,startMillis:e,endMillis:t},v4=m(2,(e,t)=>v6(e,t)===e),v6=m(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),v8=m(2,(e,t)=>v5(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),v7=e=>e.startMillis>=e.endMillis,v9=e=>ms(e.endMillis-e.startMillis),_e=e=>v5(e,Number.POSITIVE_INFINITY),_t=Symbol.for("effect/ScheduleIntervals"),_s=e=>({[_t]:_t,intervals:e}),_n=m(2,(e,t)=>i7(t.intervals)?i7(e.intervals)?re(e.intervals).startMillis<re(t.intervals).startMillis?_i(rt(e.intervals),t.intervals,re(e.intervals),iV()):_i(e.intervals,rt(t.intervals),re(t.intervals),iV()):t:e),_i=(e,t,s,n)=>{let i=e,r=t,a=s,o=n;for(;i7(i)||i7(r);)if(!i7(i)&&i7(r))a.endMillis<re(r).startMillis?(o=x(o,i5(a)),a=re(r)):a=v5(a.startMillis,re(r).endMillis),r=rt(r),i=iV();else if(i7(i)&&i8(r))a.endMillis<re(i).startMillis?(o=x(o,i5(a)),a=re(i)):a=v5(a.startMillis,re(i).endMillis),r=iV(),i=rt(i);else if(i7(i)&&i7(r))re(i).startMillis<re(r).startMillis?(a.endMillis<re(i).startMillis?(o=x(o,i5(a)),a=re(i)):a=v5(a.startMillis,re(i).endMillis),i=rt(i)):(a.endMillis<re(r).startMillis?(o=x(o,i5(a)),a=re(r)):a=v5(a.startMillis,re(r).endMillis),r=rt(r));else throw Error(K("Intervals.unionLoop"));return _s(x(o,i5(a),iX))},_r=m(2,(e,t)=>_a(e.intervals,t.intervals,iV())),_a=(e,t,s)=>{let n=e,i=t,r=s;for(;i7(n)&&i7(i);){let e=x(re(n),v8(re(i))),t=v7(e)?r:x(r,i5(e));x(re(n),v4(re(i)))?n=rt(n):i=rt(i),r=t}return _s(iX(r))},_o=e=>x(e.intervals,i9,nv(()=>v3)).startMillis,_l=m(2,(e,t)=>_o(e)<_o(t)),_c=m(2,(e,t)=>_l(e,t)?t:e),_u=e=>x(e.intervals,i9,nv(()=>v3)).endMillis,_p=e=>i7(e.intervals),_m="Continue",_h="Done",_d=e=>({_tag:_m,intervals:e}),_f=e=>({_tag:_m,intervals:_s(iH(e))}),_g={_tag:_h},_b=e=>e._tag===_m,_x=e=>e._tag===_h,_y=Symbol.for("effect/Schedule"),_v=e=>L(e,_y),__=Symbol.for("effect/ScheduleDriver"),_S={_Out:e=>e,_In:e=>e,_R:e=>e},_w={_Out:e=>e,_In:e=>e,_R:e=>e};class _k{initial;step;[_y]=_S;constructor(e,t){this.initial=e,this.step=t}pipe(){return eS(this,arguments)}}class _O{schedule;ref;[__]=_w;constructor(e,t){this.schedule=e,this.ref=t}get state(){return c0(gM(this.ref),e=>e[1])}get last(){return cB(gM(this.ref),([e,t])=>{switch(e._tag){case"None":return cU(()=>new pa);case"Some":return c9(e.value)}})}get reset(){return gj(this.ref,[nx(),this.schedule.initial])}next(e){return x(c0(gM(this.ref),e=>e[1]),cB(t=>x(fB,cB(s=>x(ue(()=>this.schedule.step(s,e,t)),cB(([e,t,n])=>{let i=gj(this.ref,[eZ(t),e]);if(_x(n))return uf(i,cL(nx()));let r=_o(n.intervals)-s;return r<=0?c_(i,t):x(i,uf(bi(ms(r))),c_(t))}))))))}}let _I=(e,t)=>new _k(e,t),_E=m(2,(e,t)=>_T(e,e=>ut(()=>t(e)))),_T=m(2,(e,t)=>_z(e,(e,s)=>c0(t(e),e=>mg(s,p2(e))))),_R=m(2,(e,t)=>_I([e.initial,t.initial,!0],(s,n,i)=>i[2]?cB(e.step(s,n,i[0]),([e,r,a])=>_x(a)?c0(t.step(s,n,i[1]),([t,s,n])=>[[e,t,!1],tg(s),n]):c9([[e,i[1],!0],tf(r),a])):c0(t.step(s,n,i[1]),([e,t,s])=>[[i[0],e,!1],tg(t),s]))),_N=m(2,(e,t)=>_F(e,(e,s)=>ut(()=>t(e,s)))),_F=m(2,(e,t)=>_I(e.initial,(s,n,i)=>cB(e.step(s,n,i),([e,s,i])=>_x(i)?c9([e,s,_g]):c0(t(n,s),t=>t?[e,s,i]:[e,s,_g])))),_A=m(2,(e,t)=>_I([e.initial,t.initial],(s,n,i)=>cB(e.step(s,n,i[0]),([e,n,r])=>c0(t.step(s,n,i[1]),([t,s,n])=>_x(r)?[[e,t],s,_g]:_x(n)?[[e,t],s,_g]:[[e,t],s,_d(x(r.intervals,_c(n.intervals)))])))),_M=((e,t)=>_M(e,e=>ut(()=>t(e))),m(2,(e,t)=>_I(e.initial,(s,n,i)=>cB(t(n),t=>e.step(s,t,i))))),_j=((e,t)=>_z(e,(e,s)=>t(s)),e=>_E(e,e=>e)),_C=e=>x(gA([nx(),e.initial]),c0(t=>new _O(e,t))),_L=m(2,(e,t)=>_U(e,t,_r)),_U=m(3,(e,t,s)=>_I([e.initial,t.initial],(n,i,r)=>x(ug(e.step(n,i,r[0]),t.step(n,i,r[1]),(e,t)=>[e,t]),cB(([[n,r,a],[o,l,c]])=>_b(a)&&_b(c)?_$(e,t,i,n,r,a.intervals,o,l,c.intervals,s):c9([[n,o],[r,l],_g]))))),_$=(e,t,s,n,i,r,a,o,l,c)=>{let u=c(r,l);return _p(u)?c9([[n,a],[i,o],_d(u)]):x(r,_l(l))?cB(e.step(_u(r),s,n),([n,i,r])=>_x(r)?c9([[n,a],[i,o],_g]):_$(e,t,s,n,i,r.intervals,a,o,l,c)):cB(t.step(_u(l),s,a),([a,o,l])=>_x(l)?c9([[n,a],[i,o],_g]):_$(e,t,s,n,i,r,a,o,l.intervals,c))},_D=m(2,(e,t)=>_P(e,e=>ut(()=>t(e)))),_P=m(2,(e,t)=>_I(e.initial,(s,n,i)=>cB(e.step(s,n,i),([e,s,n])=>c0(t(s),t=>[e,t,n])))),_z=m(2,(e,t)=>_I(e.initial,(s,n,i)=>cB(e.step(s,n,i),([e,n,i])=>{if(_x(i))return c9([e,n,i]);let r=i.intervals;return c0(t(n,v9(v5(s,_o(r)))),t=>{let i=p2(t),a=_o(r),o=s+ml(i),l=o-a;return[e,n,_f(v5(o,Math.max(0,_u(r)+l)))]})}))),_B=e=>_G(_7,t=>t<e),_q=((e,t,s)=>_I([e.initial,t],(t,n,[i,r])=>cB(e.step(t,n,i),([e,t,n])=>_x(n)?c9([[e,r],r,n]):c0(s(r,t),t=>[[e,t],r,n]))),m(2,(e,t)=>_K(e,t,_n))),_K=m(3,(e,t,s)=>_I([e.initial,t.initial],(n,i,r)=>ug(e.step(n,i,r[0]),t.step(n,i,r[1]),([e,t,n],[i,r,a])=>{if(_x(n)&&_x(a))return[[e,i],[t,r],_g];if(_x(n)&&_b(a))return[[e,i],[t,r],_d(a.intervals)];if(_b(n)&&_x(a))return[[e,i],[t,r],_d(n.intervals)];if(_b(n)&&_b(a))return[[e,i],[t,r],_d(s(n.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")}))),_J=m(2,(e,t)=>_F(e,(e,s)=>bS(t(e)))),_V=m(2,(e,t)=>_F(e,(e,s)=>t(e))),_G=m(2,(e,t)=>_N(e,(e,s)=>t(s))),_H=((e,t)=>_D(_L(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class _W{error;[_H];constructor(e){this.error=e,this[_H]=_H}}let _Y=e=>L(e,_H),_Q=e=>cE(e,e=>cA(new _W(e))),_X=e=>cI(e,e=>ny(lK(e,e=>lE(e)&&_Y(e.defect)?eZ(e.defect):nx()),{onNone:()=>c$(e),onSome:e=>cL(e.error)})),_Z=((e,t)=>_Z(e,t,(e,t)=>cL(e)),m(3,(e,t,s)=>cB(_C(t),t=>cH(e,{onFailure:e=>s(e,nx()),onSuccess:n=>_0(e,t,s,n)})))),_0=(e,t,s,n)=>cH(t.next(n),{onFailure:()=>c6(t.last),onSuccess:n=>cH(e,{onFailure:e=>s(e,eZ(n)),onSuccess:n=>_0(e,t,s,n)})}),_1=m(2,(e,t)=>_3(e,t,(e,t)=>cL(e))),_2=m(2,(e,t)=>{if(_v(t))return _1(e,t);let s=t.schedule??_7,n=t.while?_V(s,e=>{let s=t.while(e);return"boolean"==typeof s?c9(s):_Q(s)}):s,i=t.until?_J(n,e=>{let s=t.until(e);return"boolean"==typeof s?c9(s):_Q(s)}):n;return _X(_1(e,t.times?_L(i,_B(t.times)):i))}),_3=m(3,(e,t,s)=>cB(_C(t),t=>_5(e,t,s))),_5=(e,t,s)=>cE(e,n=>cH(t.next(n),{onFailure:()=>x(t.last,c6,cB(e=>s(n,e))),onSuccess:()=>_5(e,t,s)})),_4=((e,t)=>_4(e,void 0,t),m(3,(e,t,s)=>cB(_C(s),s=>_6(e,t,s)))),_6=(e,t,s)=>cH(s.next(t),{onFailure:()=>c6(s.last),onSuccess:()=>cB(e,t=>_6(e,t,s))}),_8=_I(nx(),(e,t,s)=>{switch(s._tag){case"None":return c9([eZ(e),p7,_f(_e(e))]);case"Some":return c9([eZ(s.value),ms(e-s.value),_f(_e(e))])}}),_7=(c=e=>e+1,_I(0,(e,t,s)=>ut(()=>[c(s),s,_f(_e(e))])));class _9{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>cO(t=>{if(this.free<e){let s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,t(c9(e)))};return this.waiters.add(s),ut(()=>{this.waiters.delete(s)})}return this.taken+=e,t(c9(e))});updateTaken=e=>cy(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(gz).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(uz)),c9(this.free)));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>ua(s=>cB(s(this.take(e)),e=>vW(s(t),this.release(e))))}let Se=e=>new _9(e),St=((e,t)=>{let s=p2(t);return cB(p$(),t=>c0(Sc(nx()),n=>[pP(Ss(e,s,n),t),Sn(n)]))},(e,t,s)=>{let n=ml(p2(t));return x(pT(),us(t=>cZ(e,t)),c0(e=>eZ([s+n,e])))}),Ss=(e,t,s)=>ua(n=>x(fz(e=>e.currentTimeMillis),cB(n=>Sp(s,s=>{switch(s._tag){case"None":return eZ(St(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?eZ(St(e,t,n)):nx()}}})),cB(e=>eY(e)?cM("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(pN(e.value[1]))))),Sn=e=>gj(e,nx()),Si=((e,t)=>cB(yJ,s=>x(Si(e,s),vW(cB(s.value,t)))),m(2,(e,t)=>uj(vJ,e=>e.zip(t))(e))),Sr=((e,{duration:t,onTimeout:s})=>cJ(Sr(e,{onTimeout:()=>cU(s),onSuccess:c9,duration:t})),m(2,(e,{duration:t,onSuccess:s,onTimeout:n})=>cz(i=>vG(e,cX(bi(t)),{onSelfWin:(e,t)=>cB(e.await,n=>"Success"===n._tag?cB(e.inheritAll,()=>c_(ux(t,i),s(n.value))):cB(ux(t,i),()=>pb(n.cause))),onOtherWin:(e,t)=>cB(e.await,s=>"Success"===s._tag?cB(e.inheritAll,()=>c_(ux(t,i),n())):cB(ux(t,i),()=>pb(s.cause))),otherScope:bH})))),Sa=Symbol.for("effect/Ref/SynchronizedRef"),So={_A:e=>e};class Sl{ref;withLock;[Sa]=So;[gT]=gR;[gE];constructor(e,t){this.ref=e,this.withLock=t,this[gE]=gE,this.get=gM(this.ref)}get;modify(e){return this.modifyEffect(t=>c9(e(t)))}modifyEffect(e){return this.withLock(x(cB(gM(this.ref),e),cB(([e,t])=>c_(gj(this.ref,t),e))))}pipe(){return eS(this,arguments)}}let Sc=e=>ut(()=>Su(e)),Su=e=>new Sl(gF(e),Se(1).withPermits(1)),Sp=m(2,(e,t)=>e.modifyEffect(e=>{let s=t(e);switch(s._tag){case"None":return c9([e,e]);case"Some":return c0(s.value,e=>[e,e])}})),Sm=((e,t,s)=>({[bW]:bY,id:()=>x(e.id(),ab(t.id())),await:x(e.await,cJ,vj(cJ(t.await),s,{concurrent:!0}),cC),children:e.children,inheritAll:uf(t.inheritAll,e.inheritAll),poll:ug(e.poll,t.poll,(e,t)=>x(e,nT(e=>x(t,nE(t=>pO(e,t,{onSuccess:s,onFailure:lk})))))),interruptAsFork:s=>uf(e.interruptAsFork(s),t.interruptAsFork(s)),pipe(){return eS(this,arguments)}}),e=>(t,s)=>{let n=aI(),i=[[uP,[[n,e.context]]]];s?.scheduler&&i.push([gz,[[n,s.scheduler]]]);let r=f7(e.fiberRefs,{entries:i,forkAs:n});s?.updateRefs&&(r=s.updateRefs(r,n));let a=new vl(n,r,e.runtimeFlags),o=t;s?.scope&&(o=cB(u7(s.scope,fV),e=>uf(u4(e,cz(e=>eh(e,a.id())?uo:ux(a,e))),c3(t,t=>u8(e,t)))));let l=a._supervisor;return l!==yG&&(l.onStart(e.context,o,nx(),a),a.addObserver(e=>l.onEnd(e,a))),bH.add(e.runtimeFlags,a),s?.immediate===!1?a.resume(o):a.start(o),a});class Sh extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}let Sd=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new Sh(e);return Error.stackTraceLimit=t,s},Sf=Symbol.for("effect/Runtime/FiberFailure"),Sg=Symbol.for("effect/Runtime/FiberFailure/Cause");class Sb extends Error{[Sf];[Sg];constructor(e){super(),this[Sf]=Sf,this[Sg]=e;let t=l4(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[Sg].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[eb](){return this.toString()}}let Sx=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new Sb(e);return Error.stackTraceLimit=t,s},Sy=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return pg(e.left);case"Right":return pw(e.right);case"Some":return pw(e.value);case"None":return pg(pa())}},Sv=e=>t=>{let s=Sy(t);if(s)return s;let n=new gP,i=Sm(e)(t,{scheduler:n});n.flush();let r=i.unsafePoll();if(r)return r;throw Sd(i)},S_=e=>(t,s)=>new Promise(n=>{let i=Sy(t);i&&n(i);let r=Sm(e)(t);r.addObserver(e=>{n(e)}),s?.signal!==void 0&&(s.signal.aborted?r.unsafeInterruptAsFork(r.id()):s.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())},{once:!0}))});class SS{context;runtimeFlags;fiberRefs;constructor(e,t,s){this.context=e,this.runtimeFlags=t,this.fiberRefs=s}pipe(){return eS(this,arguments)}}let Sw=ln(1,32,4),Sk=new SS((u={context:ta(),runtimeFlags:Sw,fiberRefs:new fX(new Map)}).context,u.runtimeFlags,u.fiberRefs),SO=(e,t)=>S_(Sk)(e,t).then(e=>{switch(e._tag){case eR:return e.effect_instruction_i0;case eO:throw Sx(e.effect_instruction_i0)}}),SI=e=>{let t=Sv(Sk)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw Sx(t.effect_instruction_i0)},SE=m(2,(e,t)=>e.modifyEffect(t)),ST=Symbol.for("effect/Layer"),SR={[ST]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eS(this,arguments)}},SN=Symbol.for("effect/Layer/MemoMap"),SF=e=>L(e,ST),SA=e=>"Fresh"===e._tag;class SM{ref;[SN];constructor(e){this.ref=e,this[SN]=SN}getOrElseMemoize(e,t){return x(SE(this.ref,s=>{let n=s.get(e);if(void 0!==n){let[e,i]=n;return c9([x(e,cB(([e,t])=>x(bw(e),c_(t))),c3(p_({onFailure:()=>uo,onSuccess:()=>u6(t,i)}))),s])}return x(gA(0),cB(n=>x(pT(),cB(i=>x(gA(()=>uo),c0(r=>{let a=ua(a=>x(vP(),cB(o=>x(a(cB(SL(e,o,!0),e=>bh(e(this)))),cC,cB(a=>{switch(a._tag){case eO:return x(pM(i,a.effect_instruction_i0),uf(u8(o,a)),uf(c$(a.effect_instruction_i0)));case eR:return x(gj(r,e=>x(u8(o,e),uc(gC(n,e=>[1===e,e-1])),cS)),uf(gL(n,e=>e+1)),uf(u6(t,t=>x(ut(()=>s.delete(e)),uf(gM(r)),cB(e=>e(t))))),uf(pj(i,a.effect_instruction_i0)),c_(a.effect_instruction_i0[1]))}}))))),o=[x(pN(i),c3(pS({onFailure:()=>uo,onSuccess:()=>gL(n,e=>e+1)}))),e=>x(gM(r),cB(t=>t(e)))];return[a,SA(e)?s:s.set(e,o)]}))))))}),cJ)}}let Sj=ue(()=>c0(Sc(new Map),e=>new SM(e))),SC=m(2,(e,t)=>cB(Sj,s=>cB(SL(e,t),e=>e(s)))),SL=(e,t,s=!1)=>{switch(e._tag){case"Locally":return ut(()=>s=>e.f(s.getOrElseMemoize(e.self,t)));case"ExtendScope":return ut(()=>t=>vA(s=>t.getOrElseMemoize(e.layer,s)));case"Fold":return ut(()=>s=>x(s.getOrElseMemoize(e.layer,t),cG({onFailure:n=>s.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>s.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return ut(()=>s=>x(e.layer,SC(t)));case"FromEffect":return s?ut(()=>t=>e.effect):ut(()=>s=>s.getOrElseMemoize(e,t));case"Provide":return ut(()=>s=>x(s.getOrElseMemoize(e.first,t),cB(n=>x(s.getOrElseMemoize(e.second,t),pP(n)))));case"Scoped":return s?ut(()=>s=>vz(e.effect,t)):ut(()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return ut(()=>s=>s.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return ut(()=>s=>x(s.getOrElseMemoize(e.first,t),ug(s.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return ut(()=>s=>x(s.getOrElseMemoize(e.first,t),vj(s.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},SU=e=>S$(l_(e)),S$=e=>Sz(c$(e)),SD=m(2,(e,t)=>Sq(e,{onFailure:SU,onSuccess:t})),SP=m(2,(e,t)=>{let s=tr(e),n=s?e:t;return Sz(c0(s?t:e,e=>e9(n,e)))});function Sz(e){let t=Object.create(SR);return t._tag="FromEffect",t.effect=e,t}let SB=m(2,(e,{onFailure:t,onSuccess:s})=>{let n=Object.create(SR);return n._tag="Fold",n.layer=e,n.failureK=t,n.successK=s,n}),Sq=m(2,(e,{onFailure:t,onSuccess:s})=>SB(e,{onFailure:e=>{let s=lC(e);switch(s._tag){case"Left":return t(s.left);case"Right":return S$(s.right)}},onSuccess:s})),SK=m(2,(e,t)=>{let s=tr(e),n=s?e:t;return SV(c0(s?t:e,e=>e9(n,e)))}),SJ=e=>SV(x(e,c_(ta()))),SV=e=>{let t=Object.create(SR);return t._tag="Scoped",t.effect=e,t},SG=m(2,(e,t)=>cv(vP(),s=>cB(SC(t,s),t=>pz(e,t)),(e,t)=>u8(e,t))),SH=m(2,(e,t)=>{let s=gi(Sk.fiberRefs,t.fiberRefs),n=lo(Sk.runtimeFlags,t.runtimeFlags);return ua(i=>cy(r=>{let a=r.getFiberRef(uP),o=r.getFiberRefs(),l=ga(r.id(),o)(s),c=r._runtimeFlags,u=ll(n)(c),p=gi(l,o),m=lo(u,c);return r.setFiberRefs(l),r._runtimeFlags=u,vW(pz(i(e),tn(a,t.context)),cy(e=>(e.setFiberRefs(ga(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=ll(m)(e._runtimeFlags),uo)))}))}),SW=m(2,(e,t)=>SF(t)?SG(e,t):e8(t)?pz(e,t):SH(e,t)),SY=Symbol.for("effect/MutableList"),SQ={[SY]:SY,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let s=t.value;return t=t.next,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return ey(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(ex)}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},SX=e=>({value:e,removed:!1,prev:void 0,next:void 0}),SZ=()=>{let e=Object.create(SQ);return e.head=void 0,e.tail=void 0,e._length=0,e},S0=e=>0===S1(e),S1=e=>e._length,S2=m(2,(e,t)=>{let s=SX(t);return void 0===e.head&&(e.head=s),void 0===e.tail||(e.tail.next=s,s.prev=e.tail),e.tail=s,e._length+=1,e}),S3=e=>{let t=e.head;if(void 0!==t)return S5(e,t),t.value},S5=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},S4=Symbol.for("effect/MutableQueue"),S6=Symbol.for("effect/mutable/MutableQueue/Empty"),S8={[S4]:S4,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return ey(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(ex)}},[eb](){return this.toJSON()},pipe(){return eS(this,arguments)}},S7=e=>{let t=Object.create(S8);return t.queue=SZ(),t.capacity=e,t},S9=()=>S7(void 0),we=m(2,(e,t)=>{let s=S1(e.queue);return(void 0===e.capacity||s!==e.capacity)&&(S2(t)(e.queue),!0)}),wt=m(2,(e,t)=>S0(e.queue)?t:S3(e.queue)),ws=(e,t,s,n)=>aQ({_tag:"Complete",key:e,exit:t,entryStats:s,timeToLiveMillis:n}),wn=(e,t)=>aQ({_tag:"Pending",key:e,deferred:t}),wi=(e,t)=>aQ({_tag:"Refreshing",deferred:e,complete:t}),wr=Symbol.for("effect/Cache/MapKey");class wa{current;[wr]=wr;previous=void 0;next=void 0;constructor(e){this.current=e}[ee](){return x(et(this.current),en(et(this.previous)),en(et(this.next)),ep(this))}[em](e){return this===e||wl(e)&&eh(this.current,e.current)&&eh(this.previous,e.previous)&&eh(this.next,e.next)}}let wo=e=>new wa(e),wl=e=>L(e,wr);class wc{head=void 0;tail=void 0;add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,s=e.next;void 0!==s&&(e.next=void 0,void 0!==t?(t.next=s,s.previous=t):(this.head=s,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}let wu=()=>new wc,wp=(e,t,s,n,i,r)=>({map:e,keys:t,accesses:s,updating:n,hits:i,misses:r}),wm=()=>wp(xj(),wu(),S9(),ae(!1),0,0),wh=Symbol.for("effect/Cache"),wd={_Key:e=>e,_Error:e=>e,_Value:e=>e},wf=e=>e,wg=e=>({loadedMillis:e});class wb{capacity;context;fiberId;lookup;timeToLive;[wh]=wd;cacheState;constructor(e,t,s,n,i){this.capacity=e,this.context=t,this.fiberId=s,this.lookup=n,this.timeToLive=i,this.cacheState=wm()}get(e){return c0(this.getEither(e),tx)}get cacheStats(){return ut(()=>wf({hits:this.cacheState.hits,misses:this.cacheState.misses,size:xz(this.cacheState.map)}))}getOption(e){return ue(()=>ny(xC(this.cacheState.map,e),{onNone:()=>{let t=wo(e);return this.trackAccess(t),this.trackMiss(),c9(nx())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return ue(()=>ny(xC(this.cacheState.map,e),{onNone:()=>{let t=wo(e);return this.trackAccess(t),this.trackMiss(),c9(nx())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return ut(()=>xU(this.cacheState.map,e))}entryStats(e){return ut(()=>{let t=xC(this.cacheState.map,e);if(eQ(t))switch(t.value._tag){case"Complete":return eZ(wg(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return eZ(wg(t.value.complete.entryStats.loadedMillis))}return nx()})}getEither(e){return ue(()=>{let t,s;let n=nk(xC(this.cacheState.map,e));return(void 0===n&&(s=pE(this.fiberId),t=wo(e),xU(this.cacheState.map,e)?n=nk(xC(this.cacheState.map,e)):x$(this.cacheState.map,e,wn(t,s))),void 0===n)?(this.trackAccess(t),this.trackMiss(),c0(this.lookupValueOf(e,s),tg)):cB(this.resolveMapValue(n),ny({onNone:()=>this.getEither(e),onSome:e=>c9(tf(e))}))})}invalidate(e){return ut(()=>{xP(this.cacheState.map,e)})}invalidateWhen(e,t){return ut(()=>{let s=xC(this.cacheState.map,e);eQ(s)&&"Complete"===s.value._tag&&"Success"===s.value.exit._tag&&t(s.value.exit.value)&&xP(this.cacheState.map,e)})}get invalidateAll(){return ut(()=>{this.cacheState.map=xj()})}refresh(e){return fz(t=>ue(()=>{let s=pE(this.fiberId),n=nk(xC(this.cacheState.map,e));if(void 0===n&&(xU(this.cacheState.map,e)?n=nk(xC(this.cacheState.map,e)):x$(this.cacheState.map,e,wn(wo(e),s))),void 0===n)return cS(this.lookupValueOf(e,s));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return eh(nk(xC(this.cacheState.map,e)),n)&&xP(this.cacheState.map,e),cS(this.get(e));return x(this.lookupValueOf(e,s),bF(()=>{if(eh(nk(xC(this.cacheState.map,e)),n)){let t=wi(s,n);return x$(this.cacheState.map,e,t),!0}return!1}),cS);case"Pending":case"Refreshing":return pN(n.deferred)}}))}set(e,t){return fz(s=>ut(()=>{let n=s.unsafeCurrentTimeMillis(),i=pw(t),r=ws(wo(e),i,wg(n),n+ml(p2(this.timeToLive(i))));x$(this.cacheState.map,e,r)}))}get size(){return ut(()=>xz(this.cacheState.map))}get values(){return ut(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return ut(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return ut(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return fz(s=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(s,e.timeToLiveMillis))return xP(this.cacheState.map,e.key.current),c9(nx());return this.trackHit(),c0(e.exit,eZ);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return c9(nx());return c0(pN(e.deferred),eZ);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(s,e.complete.timeToLiveMillis)){if(t)return c9(nx());return c0(pN(e.deferred),eZ)}return c0(e.complete.exit,eZ)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(we(this.cacheState.accesses,e),at(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=wt(this.cacheState.accesses,S6);t===S6?e=!1:this.cacheState.keys.add(t)}let t=xz(this.cacheState.map);for(e=t>this.capacity;e;){let s=this.cacheState.keys.remove();void 0!==s?xU(this.cacheState.map,s.current)&&(xP(this.cacheState.map,s.current),t-=1,e=t>this.capacity):e=!1}an(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return fz(s=>ue(()=>x(this.lookup(e),pP(this.context),cC,cB(n=>{let i=s.unsafeCurrentTimeMillis(),r=wg(i),a=ws(wo(e),n,r,i+ml(p2(this.timeToLive(n))));return x$(this.cacheState.map,e,a),uf(pA(t,n),n)}),c5(()=>uf(fq(t),ut(()=>{xP(this.cacheState.map,e)}))))))}}let wx=(e,t,s)=>new wb(e,ta(),ah,t,e=>p2(s(e))),wy=(()=>uC(wx(65536,()=>c0(pT(),e=>({listeners:new yU,handle:e})),()=>mn(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),ue(()=>{let t=e(x),s=X(()=>t.next()),n=e=>e.done?c9(e.value):cB(Y(e.value),e=>n(X(()=>t.next(e))));return n(s)})}),wv=e=>e.length>=1?cO((t,s)=>{e(s).then(e=>t(pw(e)),e=>t(pf(e)))}):cO(t=>{e().then(e=>t(pw(e)),e=>t(pf(e)))}),w_=function(){let e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],s=co(e?arguments[2]:arguments[1]);if(e){let e=arguments[0];return bj(t,s,t=>bC(e,t))}return e=>bj(t,s,t=>bC(e,t))},wS=(e,t=[])=>({value:e,forest:t}),ww=e=>c0(wq(e),e=>wO(e)),wk=e=>SI(ww(e)),wO=e=>e.value+wI("\n",e.forest),wI=(e,t)=>{let s,n="",i=t.length;for(let r=0;r<i;r++){s=t[r];let a=r===i-1;n+=e+(a?"":"")+" "+s.value+wI(e+(i>1&&!a?"  ":"   "),s.forest)}return n},wE=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},wT=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},wR=e=>"ast"in e?eZ(e.ast):nx(),wN=e=>wR(e).pipe(nT(hd),cB(t=>{let s=t(e);return k(s)?c9({message:s,override:!1}):cx(s)?c0(s,e=>({message:e,override:!1})):k(s.message)?c9({message:s.message,override:s.override}):c0(s.message,e=>({message:e,override:s.override}))})),wF=e=>t=>t._tag===e,wA=wF("Composite"),wM=wF("Refinement"),wj=wF("Transformation"),wC=e=>wN(e).pipe(cB(t=>!t.override&&(wA(e)||wM(e)&&"From"===e.kind||wj(e)&&"Transformation"!==e.kind)?wj(e)||wM(e)?wC(e.issue):nx():c9(t.message))),wL=e=>wR(e).pipe(nT(h_),nR(t=>nw(t(e)))),wU=e=>wC(e).pipe(c4(()=>wL(e)),cE(()=>c9(e.message??`Expected ${String(e.ast)}, actual ${mJ(e.actual)}`))),w$=e=>nv(wL(e),()=>String(e.ast)),wD=e=>e.message??"is forbidden",wP=e=>e.message??"is unexpected",wz=e=>hf(e.ast).pipe(cB(e=>{let t=e();return k(t)?c9(t):t}),cE(()=>c9(e.message??"is missing"))),wB=(e,t)=>cH(wC(e),{onFailure:t,onSuccess:e=>c9(wS(e))}),wq=e=>{switch(e._tag){case"Type":return c0(wU(e),wS);case"Forbidden":return c9(wS(w$(e),[wS(wD(e))]));case"Unexpected":return c9(wS(wP(e)));case"Missing":return c0(wz(e),wS);case"Transformation":return wB(e,()=>c0(wq(e.issue),t=>wS(w$(e),[wS(wE(e.kind),[t])])));case"Refinement":return wB(e,()=>c0(wq(e.issue),t=>wS(w$(e),[wS(wT(e.kind),[t])])));case"Pointer":return c0(wq(e.issue),t=>wS(mY(e.path),[t]));case"Composite":{let t=w$(e);return wB(e,()=>mG(e.issues)?c0(vv(e.issues,wq),e=>wS(t,e)):c0(wq(e.issues),e=>wS(t,[e])))}}};class wK{path;actual;issue;_tag="Pointer";constructor(e,t,s){this.path=e,this.actual=t,this.issue=s}}class wJ{actual;message;_tag="Unexpected";constructor(e,t){this.actual=e,this.message=t}}class wV{ast;message;_tag="Missing";actual=void 0;constructor(e,t){this.ast=e,this.message=t}}class wG{ast;actual;issues;output;_tag="Composite";constructor(e,t,s,n){this.ast=e,this.actual=t,this.issues=s,this.output=n}}class wH{ast;actual;kind;issue;_tag="Refinement";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class wW{ast;actual;kind;issue;_tag="Transformation";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class wY{ast;actual;message;_tag="Type";constructor(e,t,s){this.ast=e,this.actual=t,this.message=s}}class wQ{ast;actual;message;_tag="Forbidden";constructor(e,t,s){this.ast=e,this.actual=t,this.message=s}}let wX=Symbol.for("@effect/schema/ParseErrorTypeId");class wZ extends pG("ParseError"){[wX]=wX;get message(){return this.toString()}toString(){return wk(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[eb](){return this.toJSON()}}let w0=e=>new wZ({issue:e}),w1=tg,w2=tf,w3=tb,w5=m(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):cB(e,t)),w4=m(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?tg(t(e.right)):c0(e,t)),w6=m(2,(e,t)=>"Left"===e._tag?tf(t(e.left)):"Right"===e._tag?e:c2(e,t)),w8=e=>{if("Left"===e._tag||"Right"===e._tag)return e},w7=m(2,(e,t)=>"Left"===e._tag?tf(t.onFailure(e.left)):"Right"===e._tag?tg(t.onSuccess(e.right)):c1(e,t)),w9=(e,t)=>void 0===t||O(t)?e:void 0===e?t:{...e,...t},ke=(e,t,s)=>{let n=kc(e,t);return(e,t)=>n(e,w9(s,t))},kt=(e,t,s)=>{let n=ke(e,t,s);return(e,t)=>ty(n(e,t),w0)},ks=(e,t,s)=>{let n=kc(e,t);return(e,t)=>n(e,{...w9(s,t),isEffectAllowed:!0})},kn=(e,t)=>ks(e.ast,!0,t),ki=(e,t)=>ks(e.ast,!1,t),kr=(e,t)=>kt(dA(e.ast),!0,t),ka=(e,t)=>{let s=kc(dA(e.ast),!0);return(e,n)=>td(s(e,{exact:!0,...w9(t,n)}))},ko=S(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),kl=S(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),kc=(e,t)=>{let s=t?ko:kl,n=s.get(e);if(n)return n;let i=km(e,t),r=hS(e),a=eQ(r)?(e,t)=>i(e,w9(t,r.value)):i;return s.set(e,a),a},ku=e=>nk(hy(e)),kp=e=>nk(hv(e)),km=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=kc(e.from,!0);return(s,n)=>kb(w5(w6(t(s,n),t=>new wH(e,s,"From",t)),t=>ny(e.filter(t,n??dy,e),{onNone:()=>tg(t),onSome:t=>tf(new wH(e,s,"Predicate",t))})),e,s,n)}{let t=kc(dA(e),!0),s=kc(kg(e.from),!1);return(n,i)=>kb(w5(t(n,i),e=>s(e,i)),e,n,i)}case"Transformation":{let s=kv(e.transformation,t),n=t?kc(e.from,!0):kc(e.to,!1),i=t?kc(e.to,!0):kc(e.from,!1);return(r,a)=>kb(w5(w6(n(r,a),s=>new wW(e,r,t?"Encoded":"Type",s)),n=>w5(w6(s(n,a??dy,e),t=>new wW(e,r,"Transformation",t)),s=>w6(i(s,a),s=>new wW(e,r,t?"Type":"Encoded",s)))),e,r,a)}case"Declaration":{let s=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>kb(s(t,n??dy,e),e,t,n)}case"Literal":return kh(e,t=>t===e.literal);case"UniqueSymbol":return kh(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return kh(e,N);case"NeverKeyword":return kh(e,M);case"UnknownKeyword":case"AnyKeyword":return tg;case"StringKeyword":return kh(e,k);case"NumberKeyword":return kh(e,O);case"BooleanKeyword":return kh(e,I);case"BigIntKeyword":return kh(e,E);case"SymbolKeyword":return kh(e,T);case"ObjectKeyword":return kh(e,C);case"Enums":return kh(e,t=>e.enums.some(([e,s])=>s===t));case"TemplateLiteral":{let t=dT(e);return kh(e,e=>k(e)&&t.test(e))}case"TupleType":{let s=e.elements.map(e=>kc(e.type,t)),n=e.rest.map(e=>kc(e.type,t)),i=e.elements.filter(e=>!e.isOptional);e.rest.length>0&&(i=i.concat(e.rest.slice(1)));let r=i.length,a=e.elements.length>0?e.elements.map((e,t)=>t).join(" | "):"never",o=ku(e),l=kp(e);return(t,c)=>{let u;if(!nJ(t))return tf(new wY(e,t));let p=c?.errors==="all",m=[],h=0,d=[],f=t.length;for(let s=f;s<=r-1;s++){let n=new wK(s,t,new wV(i[s-f]));if(!p)return tf(new wG(e,t,n,d));m.push([h++,n])}if(0===e.rest.length)for(let s=e.elements.length;s<=f-1;s++){let n=new wK(s,t,new wJ(t[s],`is unexpected, expected: ${a}`));if(!p)return tf(new wG(e,t,n,d));m.push([h++,n])}let g=0;for(;g<s.length;g++)if(f<g+1){if(e.elements[g].isOptional)continue}else{let n=(0,s[g])(t[g],c),i=w8(n);if(i){if(th(i)){let s=new wK(g,t,i.left);if(!p)return tf(new wG(e,t,s,ky(d)));m.push([h++,s]);continue}d.push([h++,i.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cB(cj(n),n=>{if(th(n)){let o=new wK(i,t,n.left);return p?(r.push([s,o]),uo):tf(new wG(e,t,o,ky(a)))}return a.push([s,n.right]),uo}))}}if(nG(n)){let[s,...i]=n;for(;g<f-i.length;g++){let n=s(t[g],c),i=w8(n);if(i){if(th(i)){let s=new wK(g,t,i.left);if(!p)return tf(new wG(e,t,s,ky(d)));m.push([h++,s]);continue}d.push([h++,i.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cB(cj(n),n=>{if(!th(n))return a.push([s,n.right]),uo;{let o=new wK(i,t,n.left);return p?(r.push([s,o]),uo):tf(new wG(e,t,o,ky(a)))}}))}}for(let s=0;s<i.length;s++)if(!(f<(g+=s)+1)){let n=i[s](t[g],c),r=w8(n);if(r){if(th(r)){let s=new wK(g,t,r.left);if(!p)return tf(new wG(e,t,s,ky(d)));m.push([h++,s]);continue}d.push([h++,r.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cB(cj(n),n=>{if(th(n)){let o=new wK(i,t,n.left);return p?(r.push([s,o]),uo):tf(new wG(e,t,o,ky(a)))}return a.push([s,n.right]),uo}))}}}let b=({es:s,output:n})=>nb(s)?tf(new wG(e,t,ky(s),ky(n))):tg(ky(n));if(u&&u.length>0){let e=u;return ue(()=>{let t={es:ii(m),output:ii(d)};return cB(vv(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>b(t))})}return b({output:d,es:m})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return kh(e,D);let s=[],n={},i=[];for(let r of e.propertySignatures)s.push([kc(r.type,t),r]),n[r.name]=null,i.push(r.name);let r=e.indexSignatures.map(e=>[kc(e.parameter,t),kc(e.type,t),e.parameter]),a=dp.make(e.indexSignatures.map(e=>e.parameter).concat(i.map(e=>T(e)?new hA(e):new hR(e)))),o=kc(a,t),l=ku(e),c=kp(e);return(t,u)=>{let p,m;if(!B(t))return tf(new wY(e,t));let h=u?.errors==="all",d=[],f=0,g=u?.onExcessProperty==="error",b=u?.onExcessProperty==="preserve",x={};if(g||b){for(let s of p=mq(t))if(th(w8(o(s,u)))){if(g){let n=new wK(s,t,new wJ(t[s],`is unexpected, expected: ${String(a)}`));if(!h)return tf(new wG(e,t,n,x));d.push([f++,n]);continue}x[s]=t[s]}}let y=u?.exact===!0;for(let n=0;n<s.length;n++){let i=s[n][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(y){let s=new wK(r,t,new wV(i));if(!h)return tf(new wG(e,t,s,x));d.push([f++,s]);continue}}let o=(0,s[n][0])(t[r],u),l=w8(o);if(l){if(th(l)){let s=new wK(r,t,a?l.left:new wV(i));if(!h)return tf(new wG(e,t,s,x));d.push([f++,s]);continue}x[r]=l.right}else{let s=f++;m||(m=[]),m.push(({es:n,output:l})=>cB(cj(o),o=>{if(th(o)){let c=new wK(r,t,a?o.left:new wV(i));return h?(n.push([s,c]),uo):tf(new wG(e,t,c,l))}return l[r]=o.right,uo}))}}for(let s=0;s<r.length;s++){let i=r[s],a=i[0],o=i[1];for(let s of mB(t,i[2])){let i=w8(a(s,u));if(i&&td(i)){let i=o(t[s],u),r=w8(i);if(r){if(th(r)){let n=new wK(s,t,r.left);if(!h)return tf(new wG(e,t,n,x));d.push([f++,n]);continue}Object.prototype.hasOwnProperty.call(n,s)||(x[s]=r.right)}else{let r=f++,a=s;m||(m=[]),m.push(({es:o,output:l})=>cB(cj(i),i=>{if(!th(i))return Object.prototype.hasOwnProperty.call(n,s)||(l[s]=i.right),uo;{let s=new wK(a,t,i.left);return h?(o.push([r,s]),uo):tf(new wG(e,t,s,l))}}))}}}}let v=({es:s,output:n})=>{if(nb(s))return tf(new wG(e,t,ky(s),n));if(u?.propertyOrder==="original"){let e=p||mq(t);for(let t of i)-1===e.indexOf(t)&&e.push(t);let s={};for(let t of e)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return tg(s)}return tg(n)};if(m&&m.length>0){let e=m;return ue(()=>{let t={es:ii(d),output:Object.assign({},x)};return cB(vv(e,e=>e(t),{concurrency:l,batching:c,discard:!0}),()=>v(t))})}return v({es:d,output:x})}}case"Union":{let s=kf(e.types,t),n=mq(s.keys),i=n.length,r=new Map;for(let s=0;s<e.types.length;s++)r.set(e.types[s],kc(e.types[s],t));let a=ku(e)??1,o=kp(e);return(t,l)=>{let c;let u=[],p=0,m=[];if(i>0){if(B(t))for(let e=0;e<i;e++){let i=n[e],r=s.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))m=m.concat(r[e]);else{let e=dp.make(s.keys[i].literals);u.push([p++,new wG(new ds([new h9(i,e,!1,!0)],[]),t,new wK(i,t,new wY(e,t[i])))])}}else{let e=dp.make(s.keys[i].literals),n=new h9(i,e,!1,!0);u.push([p++,new wG(new ds([n],[]),t,new wK(i,t,new wV(n)))])}}else u.push([p++,new wY(e,t)])}s.otherwise.length>0&&(m=m.concat(s.otherwise));for(let e=0;e<m.length;e++){let s=m[e],n=r.get(s)(t,l),i=c&&0!==c.length?void 0:w8(n);if(i){if(td(i))return tg(i.right);u.push([p++,i.left])}else{let e=p++;c||(c=[]),c.push(t=>ue(()=>"finalResult"in t?uo:cB(cj(n),s=>(td(s)?t.finalResult=tg(s.right):t.es.push([e,s.left]),uo))))}}let h=s=>nb(s)?1===s.length&&"Type"===s[0][1]._tag?tf(s[0][1]):tf(new wG(e,t,ky(s))):tf(new wY(e,t));if(c&&c.length>0){let e=c;return ue(()=>{let t={es:ii(u)};return cB(vv(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:h(t.es))})}return h(u)}}case"Suspend":{let s=mK(()=>kc(dE(e.f(),e.annotations),t));return(e,t)=>s()(e,t)}}},kh=(e,t)=>s=>t(s)?tg(s):tf(new wY(e,s)),kd=(e,t)=>{switch(e._tag){case"Declaration":{let s=hw(e);if(eQ(s))return kd(s.value,t);break}case"TypeLiteral":{let s=[];for(let n=0;n<e.propertySignatures.length;n++){let i=e.propertySignatures[n],r=t?dU(i.type):dA(i.type);hN(r)&&!i.isOptional&&s.push([i.name,r])}return s}case"Refinement":return kd(e.from,t);case"Suspend":return kd(e.f(),t);case"Transformation":return kd(t?e.from:e.to,t)}return[]},kf=(e,t)=>{let s={},n=[];for(let i=0;i<e.length;i++){let r=e[i],a=kd(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,n]=a[e],i=String(n.literal);s[t]=s[t]||{buckets:{},literals:[]};let o=s[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),s[t].literals.push(n)}else{o[i]=[r],s[t].literals.push(n);break}}else n.push(r)}return{keys:s,otherwise:n}},kg=e=>dx(e)?kg(e.from):e,kb=(e,t,s,n)=>{let i=w8(e);if(i)return i;if(n?.isEffectAllowed===!0)return e;try{return SI(cj(e))}catch(e){return tf(new wQ(t,s,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},kx=([e],[t])=>e>t?1:e<t?-1:0;function ky(e){return e.sort(kx).map(e=>e[1])}let kv=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return tg;case"TypeLiteralTransformation":return s=>{let n=tg(s);for(let s of e.propertySignatureTransformations){let[e,i]=t?[s.from,s.to]:[s.to,s.from],r=t?s.decode:s.encode;n=w4(n,t=>{let s=r(Object.prototype.hasOwnProperty.call(t,e)?eZ(t[e]):nx());return delete t[e],eQ(s)&&(t[i]=s.value),t})}return n}}},k_=Symbol.for("@effect/schema/PrettyHookId"),kS=hh(k_),kw=Symbol.for("@effect/schema/Schema"),kk=e=>class{[kw]=kO;static Type;static Encoded;static [kw]=kO;static ast=e;static annotations(e){return kk(kE(this.ast,e))}static pipe(){return eS(this,arguments)}static toString(){return String(e)}},kO={_A:e=>e,_I:e=>e,_R:e=>e},kI=e=>{if(!e)return{};let t={};for(let s of Object.getOwnPropertySymbols(e))t[s]=e[s];if(void 0!==e.typeId){let s=e.typeId;"object"==typeof s?(t[m8]=s.id,t[s.id]=s.annotation):t[m8]=s}let s=(s,n)=>{void 0!==e[s]&&(t[n]=e[s])};return s("message",m7),s("missingMessage",m9),s("identifier",he),s("title",ht),s("description",hs),s("examples",hn),s("default",hi),s("documentation",ha),s("jsonSchema",hr),s("arbitrary",mE),s("pretty",k_),s("equivalence",dG),s("concurrency",ho),s("batching",hl),s("parseIssueTitle",hc),s("parseOptions",hu),t},kE=(e,t)=>dE(e,kI(t)),kT=e=>String(e.ast),kR=e=>kk(dU(e.ast)),kN=e=>kk(dA(e.ast)),kF=(e,t)=>{let s=kn(e,t);return(e,t)=>w6(s(e,t),w0)},kA=e=>L(e,kw)&&C(e[kw]),kM=e=>dh(e)?dp.make(dm(e,e=>new hR(e))):new hR(e[0]),kj=(e,t=kM(e))=>class extends kk(t){static annotations(e){return kj(this.literals,kE(this.ast,e))}static literals=[...e]};function kC(...e){return nG(e)?kj(e):kq}let kL=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new AST.TemplateLiteral("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,kL)}throw Error(errors_.getSchemaUnsupportedLiteralSpanErrorMessage(e))},kU=(e,t,s)=>kk(new hE(e.map(e=>e.ast),(...e)=>t.decode(...e.map(kk)),(...e)=>t.encode(...e.map(kk)),kI(s))),k$=(e,t)=>{let s=()=>(t,s,n)=>e(t)?w1(t):w2(new wY(n,t));return kk(new hE([],s,s,kI(t)))},kD=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],s=arguments[2];return kU(e,t,s)}let e=arguments[0],t=arguments[1];return k$(e,t)};class kP extends kk(hj){static annotations=super.annotations}class kz extends kk(hL){static annotations=super.annotations}class kB extends kk(hF){static annotations=super.annotations}class kq extends kk(h$){static annotations=super.annotations}class kK extends kk(hP){static annotations=super.annotations}class kJ extends kk(hB){static annotations=super.annotations}class kV extends kk(hX){static annotations=super.annotations}class kG extends kk(h0){static annotations=super.annotations}class kH extends kk(hK){static annotations=super.annotations}class kW extends kk(hG){static annotations=super.annotations}class kY extends kk(hY){static annotations=super.annotations}class kQ extends kk(h3){static annotations=super.annotations}let kX=e=>dp.members(e.map(e=>e.ast)),kZ=(e,t=kX(e))=>class extends kk(t){static annotations(e){return kZ(this.members,kE(this.ast,e))}static members=[...e]};function k0(...e){return dh(e)?kZ(e):nG(e)?e[0]:kq}let k1=e=>k0(e,kB),k2=e=>k0(e,kP),k3=e=>k0(e,kB,kP);class k5{ast;from;[kw];_Token;constructor(e,t){this.ast=e,this.from=t}annotations(e){return new k5(new AST.OptionalType(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...kI(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}let k4=(e,t)=>new h8(e.map(e=>kA(e)?new h4(e.ast,!1):e.ast),t.map(e=>kA(e)?new h5(e.ast):e.ast),!0),k6=(e,t,s=k4(e,t))=>class extends kk(s){static annotations(e){return k6(this.elements,this.rest,kE(this.ast,e))}static elements=[...e];static rest=[...t]},k8=(e,t)=>class extends k6([],[e],t){static annotations(e){return k8(this.value,kE(this.ast,e))}static value=e},k7=e=>k8(e),k9=e=>e?'"?:"':'":"';class Oe extends h4{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}toString(){let e=k9(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class Ot extends h4{isReadonly;fromKey;constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.fromKey=i}}class Os extends h4{isReadonly;defaultValue;constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}}let On=e=>void 0===e?"never":k(e)?JSON.stringify(e):String(e);class Oi{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}toString(){return`PropertySignature<${k9(this.to.isOptional)}, ${this.to.type}, ${On(this.from.fromKey)}, ${k9(this.from.isOptional)}, ${this.from.type}>`}}let Or=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Oe(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Oi(new Ot(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new Os(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Oa=Symbol.for("@effect/schema/PropertySignature");class Oo{ast;[kw];[Oa]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return eS(this,arguments)}annotations(e){return new Oo(Or(this.ast,kI(e)))}toString(){return String(this.ast)}}let Ol=e=>new Oo(e);class Oc extends Oo{from;constructor(e,t){super(e),this.from=t}annotations(e){return new Oc(Or(this.ast,kI(e)),this.from)}}let Ou=m(2,(e,t)=>{let s=e.ast;switch(s._tag){case"PropertySignatureDeclaration":return Ol(new Oe(s.type,s.isOptional,s.isReadonly,s.annotations,t));case"PropertySignatureTransformation":return Ol(new Oi(s.from,new Os(s.to.type,s.to.isOptional,s.to.isReadonly,s.to.annotations,t),s.decode,s.encode))}}),Op=(e,t,s)=>Ol(new Oi(new Ot(e.ast,!0,!0,{},void 0),new Os(t.ast,!1,!0,{},void 0),e=>eZ(s.decode(e)),nT(s.encode))),Om=(e,t,s)=>Ol(new Oi(new Ot(e.ast,!0,!0,{},void 0),new Os(t.ast,!0,!0,{},void 0),s.decode,s.encode)),Oh=(e,t)=>{let s=t?.exact,n=t?.default,i=t?.nullable,r=t?.as=="Option",a=t?.onNoneEncoding?n_(t.onNoneEncoding):h;return s?n?i?Ou(Op(k1(e),kN(e),{decode:ny({onNone:n,onSome:e=>null===e?n():e}),encode:eZ}),n).ast:Ou(Op(e,kN(e),{decode:ny({onNone:n,onSome:h}),encode:eZ}),n).ast:r?i?Op(k1(e),IK(kN(e)),{decode:nN(A),encode:a}).ast:Op(e,IK(kN(e)),{decode:h,encode:h}).ast:i?Om(k1(e),kN(e),{decode:nN(A),encode:h}).ast:new Oe(e.ast,!0,!0,{},void 0):n?i?Ou(Op(k3(e),kN(e),{decode:ny({onNone:n,onSome:e=>null==e?n():e}),encode:eZ}),n).ast:Ou(Op(k2(e),kN(e),{decode:ny({onNone:n,onSome:e=>void 0===e?n():e}),encode:eZ}),n).ast:r?i?Op(k3(e),IK(kN(e)),{decode:nN(e=>null!=e),encode:a}).ast:Op(k2(e),IK(kN(e)),{decode:nN(F),encode:a}).ast:i?Om(k3(e),k2(kN(e)),{decode:nN(A),encode:h}).ast:new Oe(k2(e).ast,!0,!0,{},void 0)},Od=m(e=>kA(e[0]),(e,t)=>new Oc(Oh(e,t),e)),Of=e=>L(e,Oa),Og=(e,t)=>{let s=mq(e),n=[];if(s.length>0){let i=[],r=[],a=[];for(let t=0;t<s.length;t++){let o=s[t],l=e[o];if(Of(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,s=e.isOptional,a=e.annotations;i.push(new h9(o,t,s,!0)),r.push(new h9(o,dA(t),s,!0,a)),n.push(new h9(o,t,s,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new h9(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new h9(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new dk(t,o,e.decode,e.encode))}}}else i.push(new h9(o,l.ast,!1,!0)),r.push(new h9(o,dA(l.ast),!1,!0)),n.push(new h9(o,l.ast,!1,!0))}if(nG(a)){let e=[],s=[];for(let n of t){let{indexSignatures:t,propertySignatures:a}=dN(n.key.ast,n.value.ast);a.forEach(e=>{i.push(e),r.push(new h9(e.name,dA(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),s.push(new dt(t.parameter,dA(t.type),t.isReadonly))})}return new dv(new ds(i,e,{[ht]:"Struct (Encoded side)"}),new ds(r,s,{[ht]:"Struct (Type side)"}),new dO(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:s}=dN(e.key.ast,e.value.ast);s.forEach(e=>n.push(e)),t.forEach(e=>i.push(e))}return new ds(n,i)},Ob=(e,t)=>{for(let s of mq(e)){let n=e[s];if(void 0===t[s]&&Of(n)){let e=n.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[s]=i())}}return t},Ox=(e,t,s=Og(e,t))=>class extends kk(s){static annotations(e){return Ox(this.fields,this.records,kE(this.ast,e))}static fields={...e};static records=[...t];static make=(t,s)=>{let n=Ob(e,{...t});return I5(s)?n:kr(this)(n)}};function Oy(e,...t){return Ox(e,t)}let Ov=(e,t,s)=>class extends Ox({},[{key:e,value:t}],s){static annotations(s){return Ov(e,t,kE(this.ast,s))}static key=e;static value=t},O_=(e,t)=>Ov(e,t),OS=(e,t,s)=>{if(di(e)&&di(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=n.findIndex(e=>e.name===t);if(-1===i)n.push(e);else{let{isOptional:r,type:a}=n[i];n[i]=new h9(t,OO(a,e.type,s.concat(t)),r,!0)}}return new ds(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(mZ(e,t,s))},Ow=(p=[m7,hr],e=>{let t;for(let s of p)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(void 0===t&&(t={}),t[s]=e.annotations[s]);return t}),Ok=(e,t)=>t.map(t=>new db(t,e.filter,Ow(e))),OO=(e,t,s)=>dp.make(OE([e],[t],s)),OI=e=>dd(e)?e.types:[e],OE=(e,t,s)=>iu(e,e=>iu(t,t=>{switch(e._tag){case"Union":return OE(e.types,OI(t),s);case"Suspend":return[new dg(()=>OO(e.f(),t,s))];case"Refinement":return Ok(e,OE(OI(e.from),OI(t),s));case"TypeLiteral":switch(t._tag){case"Union":return OE([e],t.types,s);case"Suspend":return[new dg(()=>OO(e,t.f(),s))];case"Refinement":return Ok(t,OE([e],OI(t.from),s));case"TypeLiteral":return[OS(e,t,s)];case"Transformation":if(dI(t.transformation))return[new dv(OS(e,t.from,s),OS(dA(e),t.to,s),new dO(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(dI(e.transformation))switch(t._tag){case"TypeLiteral":return[new dv(OS(e.from,t,s),OS(e.to,dA(t),s),new dO(e.transformation.propertySignatureTransformations))];case"Transformation":if(dI(t.transformation))return[new dv(OS(e.from,t.from,s),OS(e.to,t.to,s),new dO(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw Error(mZ(e,t,s))})),OT=m(2,(e,t)=>kk(OO(e.ast,t.ast,[]))),OR=e=>kk(new dg(()=>e().ast)),ON=Symbol.for("@effect/schema/refine"),OF=(e,t,s)=>class extends kk(s){static annotations(e){return OF(this.from,this.filter,kE(this.ast,e))}static [ON]=e;static from=e;static filter=t;static make=(e,t)=>I5(t)?e:kr(this)(e)},OA=(e,t,s)=>{if(I(e))return e?nx():eZ(new wY(t,s));if(k(e))return eZ(new wY(t,s,e));if(void 0!==e){if("_tag"in e)return eZ(e);let n=new wY(t,s,e.message);return eZ(nG(e.path)?new wK(e.path,s,n):n)}return nx()},OM=(e,t,s)=>{if(mH(e))return OA(e,t,s);if(nG(e)){let n=im(e,e=>OA(e,t,s));if(nG(n))return eZ(1===n.length?n[0]:new wG(t,s,n))}return nx()};function Oj(e,t){return s=>{function n(t,s,n){return OM(e(t,s,n),n,t)}let i=new db(s.ast,n,kI(t));return OF(s,n,i)}}let OC=(e,t,s)=>class extends kk(s){static annotations(e){return OC(this.from,this.to,kE(this.ast,e))}static from=e;static to=t},OL=m(e=>kA(e[0])&&kA(e[1]),(e,t,s)=>OC(e,t,new dv(e.ast,t.ast,new dS(s.decode,s.encode)))),OU=m(e=>kA(e[0])&&kA(e[1]),(e,t,s)=>OL(e,t,{decode:e=>w1(s.decode(e)),encode:e=>w1(s.encode(e))})),O$=Symbol.for("@effect/schema/TypeId/Trimmed"),OD=e=>t=>t.pipe(Oj(e=>e===e.trim(),{typeId:O$,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),OP=(e,t)=>s=>s.pipe(Oj(t=>t.length>=e,{typeId:dZ,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Oz=Symbol.for("@effect/schema/TypeId/Pattern"),OB=(e,t)=>s=>{let n=e.source;return s.pipe(Oj(t=>(e.lastIndex=0,e.test(t)),{typeId:{id:Oz,annotation:{regex:e}},description:`a string matching the pattern ${n}`,jsonSchema:{pattern:n},arbitrary:()=>t=>t.stringMatching(e),...t}))},Oq=Symbol.for("@effect/schema/TypeId/Lowercased"),OK=e=>t=>t.pipe(Oj(e=>e===e.toLowerCase(),{typeId:Oq,description:"a lowercase string",...e}));class OJ extends kH.pipe(OK({identifier:"Lowercased",title:"Lowercased"})){static annotations=super.annotations}let OV=Symbol.for("@effect/schema/TypeId/Uppercased"),OG=e=>t=>t.pipe(Oj(e=>e===e.toUpperCase(),{typeId:OV,description:"an uppercase string",...e}));class OH extends kH.pipe(OG({identifier:"Uppercased",title:"Uppercased"})){static annotations=super.annotations}let OW=(e,t)=>s=>{let n=C(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=C(e)?Math.max(n,Math.floor(e.max)):n;return n!==i?s.pipe(Oj(e=>e.length>=n&&e.length<=i,{typeId:d0,description:`a string at least ${n} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:n,maxLength:i},...t})):s.pipe(Oj(e=>e.length===n,{typeId:d0,description:1===n?"a single character":`a string ${n} character(s) long`,jsonSchema:{minLength:n,maxLength:n},...t}))};class OY extends kH.pipe(OW(1,{identifier:"Char"})){static annotations=super.annotations}let OQ=e=>OP(1,{description:"a non empty string",...e});class OX extends OU(kH,OJ,{decode:e=>e.toLowerCase(),encode:h}).annotations({identifier:"Lowercase"}){static annotations=super.annotations}class OZ extends OU(kH,OH,{decode:e=>e.toUpperCase(),encode:h}).annotations({identifier:"Uppercase"}){static annotations=super.annotations}class O0 extends kH.pipe(OD({identifier:"Trimmed",title:"Trimmed"})){static annotations=super.annotations}class O1 extends OU(kH,O0,{decode:e=>e.trim(),encode:h}).annotations({identifier:"Trim"}){static annotations=super.annotations}class O2 extends kH.pipe(OQ({identifier:"NonEmpty",title:"NonEmpty"})){static annotations=super.annotations}let O3=Symbol.for("@effect/schema/TypeId/UUID"),O5=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class O4 extends kH.pipe(OB(O5,{typeId:O3,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()})){static annotations=super.annotations}let O6=Symbol.for("@effect/schema/TypeId/ULID"),O8=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class O7 extends kH.pipe(OB(O8,{typeId:O6,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()})){static annotations=super.annotations}let O9=Symbol.for("@effect/schema/TypeId/Finite"),Ie=e=>t=>t.pipe(Oj(e=>Number.isFinite(e),{typeId:O9,description:"a finite number",...e})),It=(e,t)=>s=>s.pipe(Oj(t=>t>e,{typeId:dH,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),Is=(e,t)=>s=>s.pipe(Oj(t=>t>=e,{typeId:dW,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),In=e=>t=>t.pipe(Oj(e=>Number.isSafeInteger(e),{typeId:dX,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),Ii=(e,t)=>s=>s.pipe(Oj(t=>t<e,{typeId:dY,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),Ir=(e,t)=>s=>s.pipe(Oj(t=>t<=e,{typeId:dQ,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),Ia=Symbol.for("@effect/schema/TypeId/NonNaN"),Io=e=>t=>t.pipe(Oj(e=>!Number.isNaN(e),{typeId:Ia,description:"a number excluding NaN",...e})),Il=e=>It(0,e),Ic=e=>Ii(0,e),Iu=e=>Ir(0,e),Ip=e=>Is(0,e),Im=e=>OL(e,kW,{strict:!1,decode:(e,t,s)=>w3(mI(e),()=>new wY(s,e)),encode:e=>w1(String(e))});class Ih extends Im(kH).annotations({identifier:"NumberFromString"}){static annotations=super.annotations}class Id extends kW.pipe(Ie({identifier:"Finite",title:"Finite"})){static annotations=super.annotations}class If extends kW.pipe(In({identifier:"Int",title:"Int"})){static annotations=super.annotations}class Ig extends kW.pipe(Io({identifier:"NonNaN",title:"NonNaN"})){static annotations=super.annotations}class Ib extends kW.pipe(Il({identifier:"Positive",title:"Positive"})){static annotations=super.annotations}class Ix extends kW.pipe(Ic({identifier:"Negative",title:"Negative"})){static annotations=super.annotations}class Iy extends kW.pipe(Iu({identifier:"NonPositive",title:"NonPositive"})){static annotations=super.annotations}class Iv extends kW.pipe(Ip({identifier:"NonNegative",title:"NonNegative"})){static annotations=super.annotations}let I_=Symbol.for("@effect/schema/TypeId/JsonNumber");class IS extends kW.pipe(Oj(e=>!Number.isNaN(e)&&Number.isFinite(e),{typeId:I_,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}})){static annotations=super.annotations}class Iw extends OU(kY,kY,{decode:i$,encode:i$}){static annotations=super.annotations}class Ik extends OU(kH,kG,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"}){static annotations=super.annotations}class IO extends OL(kH,kV,{decode:(e,t,s)=>w3(iL(e),()=>new wY(s,e)),encode:e=>w1(String(e))}).annotations({identifier:"bigint"}){static annotations=super.annotations}class II extends OL(kW,kV,{decode:(e,t,s)=>w3(iU(e),()=>new wY(s,e)),encode:(e,t,s)=>w3(iC(e),()=>new wY(s,e))}).annotations({identifier:"BigintFromNumber"}){static annotations=super.annotations}let IE=(e,t,s,n)=>w7(e,{onFailure:e=>new wG(s,n,e),onSuccess:t});class IT extends kD(p8,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(p9),e.bigUint().map(e=>me(e)),e.bigUint().map(e=>mt(e)),e.maxSafeNat().map(e=>ms(e)),e.maxSafeNat().map(e=>mn(e)),e.maxSafeNat().map(e=>mi(e)),e.maxSafeNat().map(e=>mr(e)),e.maxSafeNat().map(e=>ma(e)),e.maxSafeNat().map(e=>mo(e))),equivalence:()=>md}){static annotations=super.annotations}class IR extends OL(kV,IT,{decode:e=>w1(me(e)),encode:(e,t,s)=>ny(mc(e),{onNone:()=>w2(new wY(s,e)),onSome:e=>w1(e)})}).annotations({identifier:"DurationFromNanos"}){static annotations=super.annotations}class IN extends OU(kW,IT,{decode:e=>ms(e),encode:e=>ml(e)}).annotations({identifier:"DurationFromMillis"}){static annotations=super.annotations}let IF=function(...e){return Array.isArray(e[0])?k6(e[0],e.slice(1)):k6(e,[])}(Iv.pipe(Ie({[ht]:"seconds",[hs]:"seconds"})),Iv.pipe(Ie({[ht]:"nanos",[hs]:"nanos"})));class IA extends OU(IF,IT,{decode:([e,t])=>me(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>mp(e)}).annotations({identifier:"Duration"}){static annotations=super.annotations}let IM=Symbol.for("@effect/schema/TypeId/ValidDate"),Ij=e=>t=>t.pipe(Oj(e=>!Number.isNaN(e.getTime()),{typeId:IM,description:"a valid Date",...e}));class IC extends kD(P,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>nf}){static annotations=super.annotations}class IL extends IC.pipe(Ij({identifier:"ValidDateFromSelf",description:"a valid Date instance"})){static annotations=super.annotations}class IU extends OU(kH,IC,{decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"}){static annotations=super.annotations}class I$ extends IU.pipe(Ij({identifier:"Date"})){static annotations=super.annotations}class ID extends OU(kW,IC,{decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"}){static annotations=super.annotations}let IP=e=>"None"===e._tag?nx():eZ(e.value),Iz=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(IP),IB=e=>ny({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),Iq=e=>(t,s,n)=>eW(t)?eY(t)?w1(nx()):IE(e(t.value,s),eZ,n,t):w2(new wY(n,t)),IK=e=>kD([e],{decode:e=>Iq(kn(e)),encode:e=>Iq(ki(e))},{description:`Option<${kT(e)}>`,pretty:IB,arbitrary:Iz,equivalence:nF}),IJ=()=>e=>`BigDecimal(${iM(iE(e))})`,IV=()=>e=>e.tuple(e.bigInt(),e.integer()).map(([e,t])=>iS(e,t));class IG extends kD(i_,{identifier:"BigDecimalFromSelf",pretty:IJ,arbitrary:IV,equivalence:()=>iR}){static annotations=super.annotations}class IH extends OL(kH,IG,{decode:(e,t,s)=>iA(e).pipe(ny({onNone:()=>w2(new wY(s,e)),onSome:e=>w1(iE(e))})),encode:e=>w1(iM(iE(e)))}).annotations({identifier:"BigDecimal"}){static annotations=super.annotations}class IW extends OL(kW,IG,{decode:e=>w1(iF(e)),encode:e=>w1(ij(e))}).annotations({identifier:"BigDecimalFromNumber"}){static annotations=super.annotations}let IY=e=>kA(e)||Of(e),IQ=e=>mq(e).every(t=>IY(e[t])),IX=e=>"fields"in e?e.fields:IX(e[ON]),IZ=e=>IQ(e)?Oy(e):kA(e)?e:Oy(IX(e)),I0=e=>IQ(e)?e:IX(e),I1=e=>(t,s)=>I4({kind:"Class",identifier:e,schema:IZ(t),fields:I0(t),Base:aY,annotations:s}),I2=(e,t)=>{let s={...e};for(let n of mq(t)){if(n in e)throw Error(m6(n));s[n]=t[n]}return s},I3=(e,t)=>eY(hg(e.ast))?e.annotations({title:t}):e,I5=e=>I(e)?e:e?.disableValidation??!1,I4=({Base:e,annotations:t,fields:s,identifier:n,kind:i,schema:r,toStringOverride:a})=>{let o=Symbol.for(`@effect/schema/${i}/${n}`),l=I3(r,`${n} (Constructor)`),c=I3(r,`${n} (Encoded side)`),u=I3(kN(r),`${n} (Type side)`),p=e=>L(e,o)&&ka(u)(e);return class extends e{constructor(e={},t=!1){e={...e},"Class"!==i&&delete e._tag,e=Ob(s,e),I5(t)||(e=kr(l)(e)),super(e,!0)}static [kw]=kO;static get ast(){return OU(c,kD([u],{decode:()=>(e,t,s)=>e instanceof this||p(e)?w1(e):w2(new wY(s,e)),encode:()=>(e,t)=>e instanceof this?w1(e):w4(ki(u)(e,t),e=>new this(e,!0))},{identifier:n,title:n,description:`an instance of ${n}`,pretty:e=>t=>`${n}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:h,[hp]:u.ast,...t}),{decode:e=>new this(e,!0),encode:h}).annotations({[hp]:r.ast}).ast}static pipe(){return eS(this,arguments)}static annotations(e){return kk(this.ast).annotations(e)}static toString(){return`(${String(c)} <-> ${n})`}static make(...e){return new this(...e)}static fields={...s};static identifier=n;static extend(e){return(t,n)=>{let a=I0(t),o=IZ(t),l=I2(s,a);return I4({kind:i,identifier:e,schema:OT(r,o),fields:l,Base:this,annotations:n})}}static transformOrFail(e){return(t,n,a)=>{let o=I2(s,t);return I4({kind:i,identifier:e,schema:OL(r,kN(Oy(o)),n),fields:o,Base:this,annotations:a})}}static transformOrFailFrom(e){return(t,n,a)=>{let o=I2(s,t);return I4({kind:i,identifier:e,schema:OL(kR(r),Oy(o),n),fields:o,Base:this,annotations:a})}}get[o](){return o}toString(){if(void 0!==a){let e=a(this);if(void 0!==e)return e}return`${n}({ ${mq(s).map(e=>`${mV(e)}: ${mJ(this[e])}`).join(", ")} })`}}},I6=k0(Oy({_tag:kC("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Oy({_tag:kC("Runtime"),id:If.annotations({title:"id",description:"id"}),startTimeMillis:If.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Oy({_tag:kC("Composite"),left:OR(()=>I6),right:OR(()=>I6)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),I8=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(Ee),I7=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${I7(e.right)}, ${I7(e.left)})`}};class I9 extends kD(aO,{identifier:"FiberIdFromSelf",pretty:()=>I7,arbitrary:()=>I8}){static annotations=super.annotations}let Ee=e=>{switch(e._tag){case"None":return aS;case"Runtime":return aw(e.id,e.startTimeMillis);case"Composite":return ak(Ee(e.left),Ee(e.right))}},Et=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:Et(e.left),right:Et(e.right)}}};class Es extends OU(I6,I9,{decode:Ee,encode:Et}).annotations({identifier:"FiberId"}){static annotations=super.annotations}class En extends OU(kK,kY,{decode:w,encode:h}).annotations({identifier:"BooleanFromUnknown"}){static annotations=super.annotations}let Ei=(e,t=2)=>{let s=p2(e);return _j(_D(_7,e=>mf(s,Math.pow(t,e))))},Er=e=>_E(_7,()=>e),Ea={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},Eo={silent:{level:-1},fatal:{level:Ea.fatal},error:{level:Ea.error},warn:{level:Ea.warn},log:{level:Ea.log},info:{level:Ea.info},success:{level:Ea.success},fail:{level:Ea.fail},ready:{level:Ea.info},start:{level:Ea.info},box:{level:Ea.info},debug:{level:Ea.debug},trace:{level:Ea.trace},verbose:{level:Ea.verbose}};function El(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}let Ec=(...e)=>e.reduce((e,t)=>(function e(t,s,n=".",i){if(!El(s))return e(t,{},n,i);let r=Object.assign({},s);for(let s in t){if("__proto__"===s||"constructor"===s)continue;let a=t[s];null==a||i&&i(r,s,a,n)||(Array.isArray(a)&&Array.isArray(r[s])?r[s]=[...a,...r[s]]:El(a)&&El(r[s])?r[s]=e(a,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=a)}return r})(e,t,"",void 0),{}),Eu=!1,Ep=[];class Em{options;_lastLog;_mockFn;constructor(e={}){let t=e.types||Eo;for(let s in this.options=Ec({...e,defaults:{...e.defaults},level:Eh(e.level,t),reporters:[...e.reporters||[]]},{types:Eo,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:s,...this.options.defaults,...t[s]};this[s]=this._wrapLogFn(e),this[s].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=Eh(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new Em({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){Eu=!0}resumeLogs(){for(let e of(Eu=!1,Ep.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(Eu){Ep.push([this,e,s,t]);return}return this._logFn(e,s,t)}}_logFn(e,t,s){var n,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:Eh(e.level,this.options.types)};s||1!==t.length||((i=n=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(n.message||n.args)&&!n.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function Eh(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}Em.prototype.add=Em.prototype.addReporter,Em.prototype.remove=Em.prototype.removeReporter,Em.prototype.clear=Em.prototype.removeReporter,Em.prototype.withScope=Em.prototype.withTag,Em.prototype.mock=Em.prototype.mockTypes,Em.prototype.pause=Em.prototype.pauseLogs,Em.prototype.resume=Em.prototype.resumeLogs;let Ed=m(2,(e,t)=>uM(vc,t)(e)),Ef=e=>SJ(vq(vh,rZ(e))),Eg=e=>SJ(vq(vh,r0(e))),Eb=m(2,(e,t)=>SD(Eg(e),()=>Ef(t))),Ex=Symbol("uploadthing-custom-id-symbol"),Ey=kC("inline","attachment");kC("public-read","private");class Ev extends I1("FileUploadData")({name:kH,size:kW,type:kH}){}class E_ extends Ev.extend("FileUploadDataWithCustomId")({customId:k1(kH)}){}class ES extends E_.extend("UploadedFileData")({key:kH,url:kH}){}class Ew extends I1("PresignedBaseSchema")({key:kH,fileName:kH,fileType:kH,fileUrl:kH,pollingJwt:kH,pollingUrl:kH,contentDisposition:Ey,customId:k1(kH)}){}class Ek extends Ew.extend("MPUResponseSchema")({urls:k7(kH),uploadId:kH,chunkSize:kW,chunkCount:kW}){}class EO extends Ew.extend("PSPResponseSchema")({url:kH,fields:O_(kH,kH)}){}let EI=k7(k0(EO,Ek));class EE extends I1("PollUploadResponse")({status:kH,fileData:Od(Oy({fileKey:k1(kH),fileName:kH,fileSize:kW,fileType:kH,metadata:k1(kH),customId:k1(kH),callbackUrl:Od(kH),callbackSlug:Od(kH)}))}){}class ET extends I1("FailureCallbackResponse")({success:kY,message:Od(kH)}){}class ER extends I1("ServerCallbackPostResponse")({status:kH}){}class EN extends I1("UploadActionPayload")({files:k7(Ev),input:kK}){}class EF extends I1("FailureActionPayload")({fileKey:kH,uploadId:k1(kH),storageProviderError:Od(kH),fileName:kH}){}class EA extends I1("MultipartCompleteActionPayload")({fileKey:kH,uploadId:kH,etags:k7(Oy({tag:kH,partNumber:kW}))}){}let EM=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),Ej=(e,t)=>wy(function*(){let s=yield*nr(s4(`/api/pollUpload/${e}`)).pipe(cq(na),cq(kF(EE)),cq(e=>"done"===e.status&&e.fileData?c9(e.fileData):cL(new sX)),_2({while:e=>e instanceof sX,schedule:Ei(10,4).pipe(_q(Er(1e3)),_A(_8),_G(mb(mi(1))))}),bm("RetryError",()=>new nn({code:"UPLOAD_FAILED",message:"File took too long to upload"}))),n=s.callbackUrl+`?slug=${s.callbackSlug}`;n.startsWith("http")||(n="http://"+n),yield*bx("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",n);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(s.metadata??"{}"),file:new ES({url:`https://utfs.io/f/${encodeURIComponent(e)}`,key:e,name:s.fileName,size:s.fileSize,customId:s.customId,type:s.fileType})}),r=yield*bR({try:()=>nu(i,t),catch:e=>new nn({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return EM((yield*nr(n,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(bm("FetchError",()=>c9(new Response(null,{status:500}))))))?yield*bx("Successfully simulated callback for file",e):yield*bv(`
Failed to simulate callback for file '${s.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${n}' is accessible without any authentication. You can verify this by running 'curl -X POST ${n}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),s}),EC=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},EL={fatal:"",error:"",warn:"",info:"",log:"",debug:"",trace:"",success:""},EU=function(e={}){return new Em(e)}({reporters:[{log:e=>{let{type:t,tag:s,date:n,args:i}=e,r=EL[t],a=EC(` ${r} ${s} ${n.toLocaleTimeString()} `,t);console.log(i.map(e=>ne(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in sC&&"function"==typeof sC.cwd?sC.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),E$={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},ED=(e="info")=>(EU.level=Ea[e],Ed({silent:uS,error:gS,warn:gw,info:uv,debug:u_,trace:gk,verbose:uy}[e])),EP=Eb(vp,b5(({logLevel:e,message:t})=>{EU[E$[e._tag]](t)})),Ez=(e,t)=>wy(function*(){yield*bb(`Uploading file ${e.name} with ${t.urls.length} chunks of size ${t.chunkSize} bytes each`);let s=yield*vv(t.urls,(s,n)=>{let i=t.chunkSize*n,r=Math.min(i+t.chunkSize,e.size);return EB({url:s,chunk:e.slice(i,r),contentDisposition:t.contentDisposition,contentType:e.type,fileName:e.name,maxRetries:10,key:t.key,uploadId:t.uploadId}).pipe(cq(e=>({tag:e,partNumber:n+1})),bm("RetryError",e=>cA(e)))},{concurrency:"inherit"});yield*bb("File",e.name,"uploaded successfully."),yield*bb("Completing multipart upload..."),yield*Eq(t,s),yield*bb("Multipart upload complete.")}),EB=e=>nr(e.url,{method:"PUT",body:e.chunk,headers:{"Content-Type":e.contentType,"Content-Disposition":function(e,t){return[e,`filename="${encodeURI(t)}"`,`filename*=UTF-8''${encodeURI(t)}`].join("; ")}(e.contentDisposition,e.fileName)}}).pipe(cq(e=>e.ok&&e.headers.get("Etag")?c9(e.headers.get("Etag")):cL(new sX)),_2({while:e=>e instanceof sX,schedule:Ei(ms(10),4).pipe(_R(Er(mn(1))),_A(_8),_G(mb(mi(1)))),times:e.maxRetries}),bE("RetryError",()=>EK({key:e.key,uploadId:e.uploadId}).pipe(cq(t=>{new nn({code:"UPLOAD_FAILED",message:`Failed to upload file ${e.fileName} to S3`,cause:t})})))),Eq=(e,t)=>nr(s4("/api/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(cq(na),cq(kF(Oy({success:kY,message:Od(kH)}))),w_("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),EK=e=>nr(s4("/api/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(cq(na),cq(kF(ET)),w_("abortMultipartUpload",{attributes:{presigned:e}})),EJ=e=>e||(sC.env.UPLOADTHING_SECRET?sC.env.UPLOADTHING_SECRET:void 0),EV=e=>{let t=EJ(e);if(!t?.startsWith("sk_"))throw new nn({code:"MISSING_ENV",message:"Missing or invalid API key. API keys must start with `sk_`."});return t};class EG extends pV{constructor(e,t,s){super({reason:`You uploaded a ${e} file that was ${s7(s)}, but the limit for that type is ${t}`}),this._tag="FileSizeMismatch",this.name="FileSizeMismatchError"}}class EH extends pV{constructor(e,t,s,n){super({reason:`You uploaded ${n} file(s) of type '${e}', but the ${t} for that type is ${s}`}),this._tag="FileCountMismatch",this.name="FileCountMismatchError"}}let EW=(e,t)=>wy(function*(){let s={};for(let n of e){let e=yield*s5(n.name,s9(t));s[e]=(s[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new sG(e,"maxFileSize");let r=yield*s8(i);if(n.size>r)return yield*new EG(e,i,n.size)}for(let e in s){let n=t[e];if(!n)return yield*new sG(e);let i=s[e],r=n.minFileCount,a=n.maxFileCount;if(r>a)return yield*new nn({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new EH(e,"minimum",r,i);if(i>a)return yield*new EH(e,"maximum",a,i)}return null});class EY extends to("uploadthing/RequestInput")(){}let EQ=wy(function*(){let{config:e,req:t,isDev:s}=yield*EY,n=new URL(t.url);if(e?.callbackUrl?n=yield*ns(e.callbackUrl):sC.env.UPLOADTHING_URL&&(n=yield*ns(sC.env.UPLOADTHING_URL)),s||!n.host.includes("localhost"))return n;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(by("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),n):yield*ns(i)});EY.pipe(cq(({action:e,hook:t})=>{if("callback"===t)return EX;switch(e){case"upload":return E0;case"multipart-complete":return E1;case"failure":return E2}}),c0(e=>({success:!0,...e})));let EX=wy(function*(){let{req:e,uploadable:t,apiKey:s}=yield*EY,n=yield*bR({try:async()=>np(await e.clone().text(),e.headers.get("x-uploadthing-signature"),s),catch:()=>new nn({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*bb("Signature verified:",n),!n)return yield*bv("Invalid signature"),yield*new nn({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*cB(no(e),kF(Oy({status:kH,file:ES,metadata:O_(kH,kK)})));yield*bb("Handling callback request with input:",i);let r=yield*bR({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new nn({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(bI(e=>bv("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*bb("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*nr(s4("/api/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(cq(na),cq(kF(ER))),{body:null}}),EZ=e=>wy(function*(){let{uploadable:t,middlewareArgs:s}=yield*EY,{files:n,input:i}=e;yield*bb("Running middleware");let r=yield*bR({try:async()=>t._def.middleware({...s,input:i,files:n}),catch:e=>e instanceof nn?e:new nn({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(bI(e=>bv("An error occured in your middleware function",e)));if(r[Ex]&&r[Ex].length!==n.length){let e=`Expected files override to have the same length as original files, got ${r[Ex].length} but expected ${n.length}`;return yield*bv(e),yield*new nn({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*vv(n,(e,t)=>wy(function*(){let s=r[Ex]?.[t];return s&&s.size!==e.size&&(yield*by("File size mismatch. Reverting to original size")),{name:s?.name??e.name,size:e.size,customId:s?.customId}}));return{metadata:r,filesWithCustomIds:a}}),E0=wy(function*(){let e;let t=yield*EY,{files:s,input:n}=yield*cB(no(t.req),kF(EN));yield*bb("Handling upload request with input:",{files:s,input:n}),yield*bb("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*bR({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(n),catch:e=>new nn({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(bI(e=>bv("An error occured trying to parse input",e)));yield*bb("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*EZ({input:r,files:s});yield*bb("Parsing route config",t.uploadable._def.routerConfig);let l=yield*s3(t.uploadable._def.routerConfig).pipe(bm("InvalidRouteConfig",e=>new nn({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*bb("Route config parsed successfully",l),yield*bb("Validating files meet the config requirements",s),yield*EW(s,l).pipe(c2(e=>new nn({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*EQ.pipe(bI(e=>bv("Failed to resolve callback URL",e)),bm("InvalidURL",e=>new nn({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*bb("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*nr(s4("/api/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(cq(na),cq(kF(EI)));if(yield*bb("UploadThing responded with:",u),yield*bb("Sending presigned URLs to client"),t.isDev){let s=yield*ni;e=vv(u,e=>Ej(e.key,t.apiKey).pipe(cj),{concurrency:10}).pipe(SW(EP),bk(ni,s),SO)}return{body:u,cleanup:e}}),E1=wy(function*(){let e=yield*EY,t=yield*cB(no(e.req),kF(EA));yield*bb("Handling multipart-complete request with input:",t),yield*bb("Notifying UploadThing that multipart upload is complete");let s=yield*Eq({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*bb("UploadThing responded with:",s),{body:null}}),E2=wy(function*(){let{req:e,uploadable:t}=yield*EY,{fileKey:s,uploadId:n}=yield*cB(no(e),kF(EF));yield*bb("Handling failure request with input:",{fileKey:s,uploadId:n}),yield*bb("Notifying UploadThing that upload failed");let i=yield*EK({key:s,uploadId:n});return yield*bb("UploadThing responded with:",i),yield*bb("Running 'onUploadError' callback"),yield*bp({try:()=>{t._def.onUploadError({error:new nn({code:"UPLOAD_FAILED",message:`Upload failed for ${s}`}),fileKey:s})},catch:e=>new nn({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(bI(e=>bv("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}});class E3 extends Blob{constructor(e,t,s){let n={...s,type:s?.type??(sJ(t)||"application/octet-stream"),lastModified:s?.lastModified??Date.now()};super(e,n),this.name=t,this.customId=n.customId,this.lastModified=n.lastModified}}let E5=(e,t)=>wy(function*(){yield*bb(`Uploading file ${e.name} using presigned POST URL`);let s=new FormData;Object.entries(t.fields).forEach(([e,t])=>s.append(e,t)),s.append("file",e);let n=yield*nr(t.url,{method:"POST",body:s,headers:new Headers({Accept:"application/xml"})}).pipe(bT(()=>nr(s4("/api/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:t.key,uploadId:null}),headers:{"Content-Type":"application/json"}}).pipe(cq(na),cq(kF(ET)))));if(!n.ok){let t=yield*wv(n.text);return yield*bv(`Failed to upload file ${e.name} to presigned POST URL. Response: ${t}`),yield*new nn({code:"UPLOAD_FAILED",message:"Failed to upload file",cause:t})}yield*bb("File",e.name,"uploaded successfully")});function E4(){if("undefined"!=typeof window)throw new nn({code:"INTERNAL_SERVER_ERROR",message:"The `utapi` can only be used on the server."})}let E6=e=>E7(e).pipe(cq(e=>vv(e,e=>E9(e).pipe(bI(e=>bv("Upload failed:",e)),bd({onFailure:e=>({data:null,error:nn.toObject(e instanceof nn?e:new nn({message:"Failed to upload file.",code:"BAD_REQUEST",cause:e}))}),onSuccess:e=>({data:e,error:null})})),{concurrency:10}))),E8=(e,t)=>vv(e,(e,s)=>wy(function*(){let n=ne(e)?e.url:e;if("string"==typeof n&&n.startsWith("data:"))return t[s]=nn.toObject(new nn({code:"BAD_REQUEST",message:"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only."})),null;n=new URL(n);let{name:i=n.pathname.split("/").pop()??"unknown-filename",customId:r}=ne(e)?e:{},a=yield*nr(n);if(!a.ok){t[s]=nn.toObject(new nn({code:"BAD_REQUEST",message:"Failed to download requested file.",cause:a}));return}return yield*wv(()=>a.blob()).pipe(cq(e=>new E3([e],i,{customId:r})))}),{concurrency:10}),E7=e=>wy(function*(){let{files:t,metadata:s,contentDisposition:n,acl:i}=e,r=t.map(e=>({name:e.name??"unnamed-blob",type:e.type,size:e.size,..."customId"in e?{customId:e.customId}:{}}));yield*bb("Getting presigned URLs for files",r);let a=Oy({data:EI}),o=yield*nr(s4("/api/uploadFiles"),{method:"POST",cache:"no-store",body:JSON.stringify({files:r,metadata:s,contentDisposition:n,acl:i}),headers:{"Content-Type":"application/json"}}).pipe(cq(na),cq(kF(a)),bm("ParseError",e=>cA(e)),bm("FetchError",e=>cA(e)));return yield*bb("Got presigned URLs:",o.data),t.map((e,t)=>({file:e,presigned:o.data[t]}))}),E9=e=>wy(function*(){let{file:t,presigned:s}=e;return"urls"in s?yield*Ez(t,s):yield*E5(t,s),yield*nr(s4(`/api/pollUpload/${s.key}`)).pipe(cq(na),cq(kF(EE)),us(bb("Polled upload",s.key)),cq(e=>"done"===e.status?c9(void 0):cL(new sX)),_2({while:e=>e instanceof sX,schedule:Ei(ms(10),4).pipe(_R(Er(mn(1))),_A(_8),_G(mb(mi(1))))}),bm("RetryError",e=>cA(e))),{key:s.key,url:s.fileUrl,name:t.name,size:t.size,type:t.type,customId:"customId"in t?t.customId??null:null}});class Te{constructor(e){this.requestUploadThing=(e,t,s)=>{let n=s4(e);SI(bb("Requesting UploadThing:",{url:n,body:t,headers:this.defaultHeaders}));let i=new Headers([["Content-Type","application/json"]]);for(let[e,t]of Object.entries(this.defaultHeaders))"string"==typeof t&&i.set(e,t);return nr(n,{method:"POST",cache:"no-store",body:JSON.stringify(t),headers:i}).pipe(cq(na),cq(kF(s)),bm("FetchError",e=>bv("Request failed:",e).pipe(cq(()=>cA(e)))),bm("ParseError",e=>bv("Response parsing failed:",e).pipe(cq(()=>cA(e)))),us(e=>bb("UploadThing response:",e)))},this.executeAsync=(e,t)=>e.pipe(ED(this.logLevel),SW(EP),bk(ni,{fetch:this.fetch,baseHeaders:this.defaultHeaders}),e=>SO(e,t?{signal:t}:void 0)),this.deleteFiles=async(e,t)=>{E4();let{keyType:s=this.defaultKeyType}=t??{};class n extends I1("DeleteFileResponse")({success:kY,deletedCount:kW}){}return await this.executeAsync(this.requestUploadThing("/api/deleteFiles","fileKey"===s?{fileKeys:nt(e)}:{customIds:nt(e)},n))},this.getFileUrls=async(e,t)=>{E4();let{keyType:s=this.defaultKeyType}=t??{};class n extends I1("GetFileUrlResponse")({data:k7(Oy({key:kH,url:kH}))}){}return await this.executeAsync(this.requestUploadThing("/api/getFileUrl","fileKey"===s?{fileKeys:e}:{customIds:e},n))},this.listFiles=async e=>{E4();class t extends I1("ListFileResponse")({hasMore:kY,files:k7(Oy({id:kH,customId:k1(kH),key:kH,name:kH,status:kC("Deletion Pending","Failed","Uploaded","Uploading")}))}){}return await this.executeAsync(this.requestUploadThing("/api/listFiles",{...e},t))},this.renameFiles=async e=>{E4();class t extends I1("RenameFileResponse")({success:kY}){}return await this.executeAsync(this.requestUploadThing("/api/renameFiles",{updates:nt(e)},t))},this.renameFile=this.renameFiles,this.getUsageInfo=async()=>{E4();class e extends I1("GetUsageInfoResponse")({totalBytes:kW,appTotalBytes:kW,filesUploaded:kW,limitBytes:kW}){}return await this.executeAsync(this.requestUploadThing("/api/getUsageInfo",{},e))},this.getSignedURL=async(e,t)=>{E4();let s=t?.expiresIn?function(e){let t=e.toString().split(/(\d+)/).filter(Boolean);return Number(t[0])*({s:1,m:60,h:3600,d:86400})[(t[1]??"s").trim().slice(0,1)]}(t.expiresIn):void 0,{keyType:n=this.defaultKeyType}=t??{};if(t?.expiresIn&&isNaN(s))throw new nn({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(s&&s>604800)throw new nn({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});class i extends I1("GetSignedUrlResponse")({url:kH}){}return await this.executeAsync(this.requestUploadThing("/api/requestFileAccess","fileKey"===n?{fileKey:e,expiresIn:s}:{customId:e,expiresIn:s},i))},this.updateACL=async(e,t,s)=>{E4();let{keyType:n=this.defaultKeyType}=s??{},i=nt(e).map(e=>"fileKey"===n?{fileKey:e,acl:t}:{customId:e,acl:t}),r=Oy({success:kY});return await this.executeAsync(this.requestUploadThing("/api/updateACL",{updates:i},r))},E4(),function(){let e,t;if(void 0===sC)return;let s=sC.versions?.node?.split(".");s&&([e,t]=s.map(e=>parseInt(e,10)));let n=sC.env?.NODE;if(!e&&n){let s=/v(\d+)\.(\d+)\.(\d+)/.exec(n)?.[0];s&&([e,t]=s.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(SI(bv(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),sC.exit?.(1)))}();let t=EV(e?.apiKey);this.fetch=e?.fetch??globalThis.fetch,this.defaultHeaders={"x-uploadthing-api-key":t,"x-uploadthing-version":"6.13.2","x-uploadthing-be-adapter":"server-sdk","x-uploadthing-fe-package":void 0},this.defaultKeyType=e?.defaultKeyType??"fileKey",this.logLevel=e?.logLevel}async uploadFiles(e,t){return E4(),await this.executeAsync(cB(E6({files:nt(e),contentDisposition:t?.contentDisposition??"inline",metadata:t?.metadata??{},acl:t?.acl}),t=>c9(Array.isArray(e)?t:t[0])).pipe(us(e=>bb("Finished uploading:",e))),t?.signal)}async uploadFilesFromUrl(e,t){E4();let s={},n=await this.executeAsync(E8(nt(e),s).pipe(cq(e=>e.filter(e=>null!=e)),cq(e=>E6({files:e,contentDisposition:t?.contentDisposition??"inline",metadata:t?.metadata??{},acl:t?.acl}))),t?.signal),i=nt(e).map((e,t)=>s[t]?{data:null,error:s[t]}:n.shift()),r=Array.isArray(e)?i:i[0];return SI(bb("Finished uploading:",r)),r}}}};